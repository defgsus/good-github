# [<](2022-11-13.md) 2022-11-14 [>](2022-11-15.md)

2,141,137 events recorded by [gharchive.org](https://www.gharchive.org/) of which 2,141,137 were push events containing 3,251,591 commit messages that amount to 271,342,725 characters filtered with [words.py@e23d022007...](https://github.com/defgsus/good-github/blob/e23d022007992279f9bcb3a9fd40126629d787e2/src/words.py) to these 30 messages:


## [sojourn-13/sojourn-station](https://github.com/sojourn-13/sojourn-station)@[6f63bb322c...](https://github.com/sojourn-13/sojourn-station/commit/6f63bb322c9537b53dea3fbc456bfa099abcbb95)
#### Monday 2022-11-14 00:01:48 by WilsonWeave

Mining Profits Nerf, replacing problematic Offers (#4137)

* Sheet Snatchers Offers!! Wow!!

Makes Lancer station offer 300 credits for up to 4 sheet snatchers at a time, considering Solnishko buys many more knives at a time, for 150 each, this seems more than fair considering the effort  and materials involved. Also ain't no one cooking food for trade offers chief.

Also makes Boris station offer 400 credits for up to 2  guild made advanced sheet snatchers at a time.  Having literally only one, extremely niche and rare to obtain offer as the only offer for a station is a really bad idea. Might not make the most sense for this station, but I'll consider replacing it with something more fitting. Eventually. But it works for now.

* More beacon fiddling, part TWO!! WOW! !EGHGHG!!!

Makes the religion stations buy meat, not as much per slab as Dionis does (given it's a tier one, roundstart station), but they can buy more at a time based on RNG.

Gives meat and all of it's sub-types a base price of 20 credits (hopefully)

Ghost-kitchen, AKA the VERY under utilized chef station now buys dinner trays. Slightly cheaper than knives. But I may change this to be more profitable than knives, albeit very restricted in number sold at a time, given it's one steel PLUS a tool-step. (Though honestly, I think I'm gonna tone back kitchen knife sales to 100, at LEAST, here soon.)

BUG FIX!!! Casino station no longer has an unlisted secret inventory, it now correctly displays, and gives a name to the extra tab. TODO! Make rigsuits more expensive overall, because you're paying a premium for a usually inferior rigsuit. (And voidsuits suits on that note). Oh and make it so the gems are properly sold for a million credits instead of twenty or two hundred million credits.

Casino station now buys cardboard boxes. For the meantime, it's plain cardboard boxes, while it's supposed to be a rebate, the boxes used for the Casino sales are a special subtype that include a LOT of non-box special objects. It works as an alternate favor method for now.

Brings a few more kitchen dishes up to closer par with roach-meat burgers. Vermouth pays FIVE HUNDRED credits for certain types of roach burgers roundstart. Bacon is a somewhat limited resource, and a pain to cook, so it should a LEAST be closer to roach meat. Effected stations are the trash refining station and the bluespace station.

* LONEGAR MINING NERF???

Cuts the offers for ore stacks on Recoll station MAJORLY, no longer will you buy stacks of diamonds with a single redemption of pitchblende.

LONG overdue.

Also replaces offers that were pointed out as problematic by Trillby for having storage items. Casino station gets a wood pulp request instead. Kitchen gets bottles of raw product.

---
## [srcwr/zones](https://github.com/srcwr/zones)@[4612921fd8...](https://github.com/srcwr/zones/commit/4612921fd82276c6b5e45dd6380099222c5937d0)
#### Monday 2022-11-14 00:09:56 by rtldg

fuck you ripext parsing it as ints and not giving me floats

---
## [sharlenlxm/free-programming-books](https://github.com/sharlenlxm/free-programming-books)@[5fd70502a0...](https://github.com/sharlenlxm/free-programming-books/commit/5fd70502a063c46914fd444d2511c8233f81777f)
#### Monday 2022-11-14 04:16:20 by Mathieu FONTAINE

Update free-programming-cheatsheets.md - React (#7095)

I suggested a React cheat sheet that I use very often. It is one of the most exhaustive and qualitative in my opinion.

---
## [johny111/IDIB](https://github.com/johny111/IDIB)@[a9c8c022b6...](https://github.com/johny111/IDIB/commit/a9c8c022b6f7ca56cc06946c705d66b9b0973a2f)
#### Monday 2022-11-14 06:23:35 by idesignibuy

test

The functions of the individuals who make up the fashion business—designers, retailers, factory employees, seamstresses, tailors, technically proficient embroiderers, the press, marketing people, salespeople (or "maker"), fit mannequins, runway models, couture models, textile producers, pattern makers, and sketch artists—form the foundation of the industry.  

The business of creating garments may be used, to sum up, the fashion industry in its most basic form, but that would ignore the crucial contrast underlying fashion and apparel. One of humanity's essential needs is clothes, which serve a functional purpose. Our range of services also includes tailoring software solutions and web-to-print software solutions in apparel and Fashion Design Software. 

Fashion, however, also takes into account individual preferences, cultural evolution, and preconceptions about style. But fashion also considers personal preferences, societal development, and preconceived notions about what is fashionable.  

From Hussein Chalayan and Miuccia Prada, whose autumn designs featured futuristic technology and industrial materials. The trends introduced by well-known fashion names are typically adapted by mass market designers. Modern high-end designers are increasingly turning to mass-market shops in order to create more affordable products and expand their clientele.  Check Fashion Design Software & Apparel Design Software 

Most essential, designers use their creativity to generate original concepts. Currently valued at approximately 108 billion dollars, the Indian textile sector is predicted to grow to 223 billion dollars by 2021. 
 The sector directly employs about 45 million people, and it indirectly supports the livelihoods of an additional 60 million people. The country's textile industry is responsible for 14% of the country's total Index of Industrial Production and about 5% of India's GDP (IIP). The textile industry, which accounts for roughly 13.5 percent of India's total exports, or 42.24 billion dollars, is another important export driver.  

While brands like Zara, Armani, Forever21, or Uniqlo are popular with Indian consumers and generate higher per-square-foot sales than department or hypermarket stores, Benetton, Zodiac, Z3, Zara, Vero Moda, Calvin Klein, Diesel, and Tommy Hilfiger have experienced strong sales growth in the country.  

Some Indian companies that have launched their own fashion labels include the Arvind group, Madura Fashion and Lifestyle, Raymond Apparel, Trent Retail, Reliance Retail, and Future Group. Indian fashion is renowned for its colorfulness, elegance, and cultural history.  

It emphasizes the subtlety and beauty that has persisted for a long time. Since it has changed, in addition to being comfortable, stylish, and beautiful. The fashion business in India is a combination of vibrant traditions that have swept into the present global landscape.  

From ethnic to western, salwar kameez to high-street design, the Indian fashion industry has witnessed several shifts. It goes without saying that the thousands of years of rich heritage and knowledge that India's fashion industry has benefited from is due to the fact that the fashion for sewn clothing has existed in India since ancient times. including Shirt design software, Suits design software, Jacket design software, Hoodie design software, Abaya design software, Thobe design software, and much more. 

The years 2000–2010 saw the zenith of celebrity obsession in a variety of ways. People became fixated on TV shows, pop singers, and ornate clothing, with celebrities like Lady Gaga, Katy Perry, Paris Hilton, Shakira, Britney Spears, Rihanna, Taylor Swift, and Jennifer Lopez taking the place of models and setting trends.  

The years from 2010 and 2020 are known as the years of change for the fashion industry, numerous changes have been made in the Indian fashion industry, from salwar kameez to high-street design, and from ethnic to western.  

Without a doubt, artificial intelligence and a new wave of sustainability have benefited the fashion business in India.  

Wearing a sharara was a major deal for us when we were dressed in Indian attire, and in those days, wearing jeans with brightly colored floral designs made us look more trendy and quirky. 

  

Athleisure fashion entered the decade as formal clothing left. The 2010s saw a casualization of fashion. The rise of social media platforms led to a relaxed culture becoming more well-liked, which paved the way for the coziest fashion trend of the decade.  

As they developed with better fabrics, more brilliant colors, and graphic designs, the personalized and stylized exercise clothing broke through the limitations of gyms. In his spring/summer 2020 collection campaign, bridal designer Sabyasachi Mukherjee honoured plus-size fashion, incorporating it into the larger movement in Indian fashion to make it more inclusive in terms of size and skin tone.  

Because of the technological explosion and the development of artificial intelligence, it is now simpler for companies to connect with customers regardless of where they are located. The consulting firm McKinsey anticipated that AI would have a growing impact on the business of everything from design to production in the future in its annual review of the $3 trillion fashion sector.  

On that topic, I'd like to conclude by saying that Indian dress is usually visually appealing due to both the comfort and the varied fashion trends. A lot of Indian women currently work in the fashion industry since Indian fashion evolution not only improved a woman's overall appearance but also gave her confidence and inspired her imagination.

---
## [markoooooooo/ooo](https://github.com/markoooooooo/ooo)@[d048d9f1b4...](https://github.com/markoooooooo/ooo/commit/d048d9f1b4b1ce9d1ebd0861f340da85854d07b5)
#### Monday 2022-11-14 06:36:09 by Marko

vault backup: 2022-11-14 14:36:01

Affected files:
.obsidian/plugins/obsidian-kindle-plugin/data.json
.obsidian/workspace.json
Aguirre-Cosmological Koans.md
Aurelius-Hays-Meditations.md
Borges_et_al-Ficciones.md
Buddhadasa-Santikaro-Under the Bodhi Tree.md
Davis-High Weirdness.md
Davis-Thacker-TechGnosis.md
Dobbs_et_al-No Ordinary Disruption.md
Dostoevsky-Ready-Crime and Punishment.md
Epictetus-Long-Enchiridion.md
Garfield-Losing Ourselves.md
Gray-How We Learn to Move.md
Hamid-How to Get Filthy Rich In Rising Asia.md
Heartiste-Heartiste On Game.md
Hyatt-Tharcher-The Psychopaths Bible.md
Irvine-A Guide to the Good Life.md
Kornfield-A Path With Heart.md
Lem-The Futurological Congress.md
Malice_et_al-The Anarchist Handbook.md
Murray-The War on the West.md
Palahniuk-Fight Club.md
Peterson-12 Rules for Life.md
Seneca-Campbell-Letters from a Stoic.md
Snyder-Demystifying Awakening.md
Srinivasan-The Network State.md
Tomassi-The Rational Male.md
Watts-The Book on the Taboo Against Knowing Who You Are.md
Watts-What Is Zen.md

---
## [Metastruct/garrysmod-chatsounds](https://github.com/Metastruct/garrysmod-chatsounds)@[088f7ca630...](https://github.com/Metastruct/garrysmod-chatsounds/commit/088f7ca6306dd083b7a32f59683f1e3d49187f9c)
#### Monday 2022-11-14 08:00:43 by Sensuka

more tf2 chatsounds in tf2_extras folder (#420)

* More Killing Floor Chatsounds

the title speaks for itself, it adds more killing floor chatsounds, hurray.

* more killing floor sounds, again

same thing but different sounds

* Delete and she never listened.ogg

* Delete ha ha ha haaa.ogg

* Delete heheheheheheh.ogg

* Delete i always told her.ogg

* Delete id make something of myself.ogg

* killing floor patriarch

adds more patriarch

* killing floor chatsounds

the title again speaks, it adds a few sounds from killing floor

* more tf2 chatsounds in tf2_extra folder

for shits & giggles

---
## [gergogyulai/main](https://github.com/gergogyulai/main)@[3e73c3a192...](https://github.com/gergogyulai/main/commit/3e73c3a1922bc4757eff589970e90a07dfe39549)
#### Monday 2022-11-14 08:31:35 by gergogyulai

My name is Walter Hartwell White.

My name is Walter Hartwell White. I live at 308 Negra Arroyo Lane, Albuquerque, New Mexico, 87104. This is my confession. If you're watching this tape, I'm probably dead– murdered by my brother-in-law, Hank Schrader. Hank has been building a meth empire for over a year now, and using me as his chemist. Shortly after my 50th birthday, he asked that I use my chemistry knowledge to cook methamphetamine, which he would then sell using connections that he made through his career with the DEA. I was... astounded. I... I always thought Hank was a very moral man, and I was particularly vulnerable at the time – something he knew and took advantage of. I was reeling from a cancer diagnosis that was poised to bankrupt my family. Hank took me in on a ride-along and showed me just how much money even a small meth operation could make. And I was weak. I didn't want my family to go into financial ruin, so I agreed. Hank had a partner, a businessman named Gustavo Fring. Hank sold me into servitude to this man. And when I tried to quit, Fring threatened my family. I didn't know where to turn. Eventually, Hank and Fring had a falling-out. Things escalated. Fring was able to arrange – uh, I guess... I guess you call it a "hit" – on Hank, and failed, but Hank was seriously injured. And I wound up paying his medical bills, which amounted to a little over $177,000. Upon recovery, Hank was bent on revenge. Working with a man named Hector Salamanca, he plotted to kill Fring. The bomb that he used was built by me, and he gave me no option in it. I have often contemplated suicide, but I'm a coward. I wanted to go to the police, but I was frightened. Hank had risen to become the head of the Albuquerque DEA. To keep me in line, he took my children. For three months, he kept them. My wife had no idea of my criminal activities, and was horrified to learn what I had done. I was in hell. I hated myself for what I had brought upon my family. Recently, I tried once again to quit, and in response, he gave me this. [Walt points to the bruise on his face left by Hank in "Blood Money."] I can't take this anymore. I live in fear every day that Hank will kill me, or worse, hurt my family. All I could think to do was to make this video and hope that the world will finally see this man for what he really is.

---
## [KDE/kate](https://github.com/KDE/kate)@[cbee1809e7...](https://github.com/KDE/kate/commit/cbee1809e701ee975a35b9b43b87ba97a0938f4b)
#### Monday 2022-11-14 08:34:20 by Waqar Ahmed

lsp: enable snippet support

This change announces to the servers that we support snippets, even though
in reality we don't. However, we can still work with snippet-y text by
removing the snippet markers and using that with our own snippet handler
which is not quite ready to accept lsp style snippets.

The benefit of this change is that we don't have to put in hacks to add
"()" parens to stuff. We also don't have to move our cursor manually which
can be incorrect in many cases e.g., string.isEmpty(), with cursor in
between the parens doesn't make sense.

For cpp/clangd the existing logic was okay-ish. However some servers like
dart-analyzer do something different. If you dont have snippets, the
server will just remove the snippet markers from the text and send it to
you. This results in sometimes very annoying editing experience. For e.g.,

- maxLines: ,| // cursor position at the end is annoying
- initState() {
  // some comment
  }() // () what are parens doing here??

Thus its better to just remove those markers ourselves and then we can
just set the cursor position as we want and don't have to manually
decide anything.

---
## [youzhick/postgres](https://github.com/youzhick/postgres)@[7fed801135...](https://github.com/youzhick/postgres/commit/7fed801135bae14d63b11ee4a10f6083767046d8)
#### Monday 2022-11-14 09:34:29 by Tom Lane

Clean up inconsistent use of fflush().

More than twenty years ago (79fcde48b), we hacked the postmaster
to avoid a core-dump on systems that didn't support fflush(NULL).
We've mostly, though not completely, hewed to that rule ever since.
But such systems are surely gone in the wild, so in the spirit of
cleaning out no-longer-needed portability hacks let's get rid of
multiple per-file fflush() calls in favor of using fflush(NULL).

Also, we were fairly inconsistent about whether to fflush() before
popen() and system() calls.  While we've received no bug reports
about that, it seems likely that at least some of these call sites
are at risk of odd behavior, such as error messages appearing in
an unexpected order.  Rather than expend a lot of brain cells
figuring out which places are at hazard, let's just establish a
uniform coding rule that we should fflush(NULL) before these calls.
A no-op fflush() is surely of trivial cost compared to launching
a sub-process via a shell; while if it's not a no-op then we likely
need it.

Discussion: https://postgr.es/m/2923412.1661722825@sss.pgh.pa.us

---
## [chandanr/linux](https://github.com/chandanr/linux)@[912b7f2cd5...](https://github.com/chandanr/linux/commit/912b7f2cd52902766dc591b18c6c84febeee2bbd)
#### Monday 2022-11-14 10:19:38 by Darrick J. Wong

xfs: change the order in which child and parent defer ops are finished

The defer ops code has been finishing items in the wrong order -- if a
top level defer op creates items A and B, and finishing item A creates
more defer ops A1 and A2, we'll put the new items on the end of the
chain and process them in the order A B A1 A2.  This is kind of weird,
since it's convenient for programmers to be able to think of A and B as
an ordered sequence where all the sub-tasks for A must finish before we
move on to B, e.g. A A1 A2 D.

Right now, our log intent items are not so complex that this matters,
but this will become important for the atomic extent swapping patchset.
In order to maintain correct reference counting of extents, we have to
unmap and remap extents in that order, and we want to complete that work
before moving on to the next range that the user wants to swap.  This
patch fixes defer ops to satsify that requirement.

The primary symptom of the incorrect order was noticed in an early
performance analysis of the atomic extent swap code.  An astonishingly
large number of deferred work items accumulated when userspace requested
an atomic update of two very fragmented files.  The cause of this was
traced to the same ordering bug in the inner loop of
xfs_defer_finish_noroll.

If the ->finish_item method of a deferred operation queues new deferred
operations, those new deferred ops are appended to the tail of the
pending work list.  To illustrate, say that a caller creates a
transaction t0 with four deferred operations D0-D3.  The first thing
defer ops does is roll the transaction to t1, leaving us with:

t1: D0(t0), D1(t0), D2(t0), D3(t0)

Let's say that finishing each of D0-D3 will create two new deferred ops.
After finish D0 and roll, we'll have the following chain:

t2: D1(t0), D2(t0), D3(t0), d4(t1), d5(t1)

d4 and d5 were logged to t1.  Notice that while we're about to start
work on D1, we haven't actually completed all the work implied by D0
being finished.  So far we've been careful (or lucky) to structure the
dfops callers such that D1 doesn't depend on d4 or d5 being finished,
but this is a potential logic bomb.

There's a second problem lurking.  Let's see what happens as we finish
D1-D3:

t3: D2(t0), D3(t0), d4(t1), d5(t1), d6(t2), d7(t2)
t4: D3(t0), d4(t1), d5(t1), d6(t2), d7(t2), d8(t3), d9(t3)
t5: d4(t1), d5(t1), d6(t2), d7(t2), d8(t3), d9(t3), d10(t4), d11(t4)

Let's say that d4-d11 are simple work items that don't queue any other
operations, which means that we can complete each d4 and roll to t6:

t6: d5(t1), d6(t2), d7(t2), d8(t3), d9(t3), d10(t4), d11(t4)
t7: d6(t2), d7(t2), d8(t3), d9(t3), d10(t4), d11(t4)
...
t11: d10(t4), d11(t4)
t12: d11(t4)
<done>

When we try to roll to transaction #12, we're holding defer op d11,
which we logged way back in t4.  This means that the tail of the log is
pinned at t4.  If the log is very small or there are a lot of other
threads updating metadata, this means that we might have wrapped the log
and cannot get roll to t11 because there isn't enough space left before
we'd run into t4.

Let's shift back to the original failure.  I mentioned before that I
discovered this flaw while developing the atomic file update code.  In
that scenario, we have a defer op (D0) that finds a range of file blocks
to remap, creates a handful of new defer ops to do that, and then asks
to be continued with however much work remains.

So, D0 is the original swapext deferred op.  The first thing defer ops
does is rolls to t1:

t1: D0(t0)

We try to finish D0, logging d1 and d2 in the process, but can't get all
the work done.  We log a done item and a new intent item for the work
that D0 still has to do, and roll to t2:

t2: D0'(t1), d1(t1), d2(t1)

We roll and try to finish D0', but still can't get all the work done, so
we log a done item and a new intent item for it, requeue D0 a second
time, and roll to t3:

t3: D0''(t2), d1(t1), d2(t1), d3(t2), d4(t2)

If it takes 48 more rolls to complete D0, then we'll finally dispense
with D0 in t50:

t50: D<fifty primes>(t49), d1(t1), ..., d102(t50)

We then try to roll again to get a chain like this:

t51: d1(t1), d2(t1), ..., d101(t50), d102(t50)
...
t152: d102(t50)
<done>

Notice that in rolling to transaction #51, we're holding on to a log
intent item for d1 that was logged in transaction #1.  This means that
the tail of the log is pinned at t1.  If the log is very small or there
are a lot of other threads updating metadata, this means that we might
have wrapped the log and cannot roll to t51 because there isn't enough
space left before we'd run into t1.  This is of course problem #2 again.

But notice the third problem with this scenario: we have 102 defer ops
tied to this transaction!  Each of these items are backed by pinned
kernel memory, which means that we risk OOM if the chains get too long.

Yikes.  Problem #1 is a subtle logic bomb that could hit someone in the
future; problem #2 applies (rarely) to the current upstream, and problem
#3 applies to work under development.

This is not how incremental deferred operations were supposed to work.
The dfops design of logging in the same transaction an intent-done item
and a new intent item for the work remaining was to make it so that we
only have to juggle enough deferred work items to finish that one small
piece of work.  Deferred log item recovery will find that first
unfinished work item and restart it, no matter how many other intent
items might follow it in the log.  Therefore, it's ok to put the new
intents at the start of the dfops chain.

For the first example, the chains look like this:

t2: d4(t1), d5(t1), D1(t0), D2(t0), D3(t0)
t3: d5(t1), D1(t0), D2(t0), D3(t0)
...
t9: d9(t7), D3(t0)
t10: D3(t0)
t11: d10(t10), d11(t10)
t12: d11(t10)

For the second example, the chains look like this:

t1: D0(t0)
t2: d1(t1), d2(t1), D0'(t1)
t3: d2(t1), D0'(t1)
t4: D0'(t1)
t5: d1(t4), d2(t4), D0''(t4)
...
t148: D0<50 primes>(t147)
t149: d101(t148), d102(t148)
t150: d102(t148)
<done>

This actually sucks more for pinning the log tail (we try to roll to t10
while holding an intent item that was logged in t1) but we've solved
problem #1.  We've also reduced the maximum chain length from:

    sum(all the new items) + nr_original_items

to:

    max(new items that each original item creates) + nr_original_items

This solves problem #3 by sharply reducing the number of defer ops that
can be attached to a transaction at any given time.  The change makes
the problem of log tail pinning worse, but is improvement we need to
solve problem #2.  Actually solving #2, however, is left to the next
patch.

Note that a subsequent analysis of some hard-to-trigger reflink and COW
livelocks on extremely fragmented filesystems (or systems running a lot
of IO threads) showed the same symptoms -- uncomfortably large numbers
of incore deferred work items and occasional stalls in the transaction
grant code while waiting for log reservations.  I think this patch and
the next one will also solve these problems.

As originally written, the code used list_splice_tail_init instead of
list_splice_init, so change that, and leave a short comment explaining
our actions.

Signed-off-by: Darrick J. Wong <darrick.wong@oracle.com>
Reviewed-by: Dave Chinner <dchinner@redhat.com>
Reviewed-by: Brian Foster <bfoster@redhat.com>
(cherry picked from commit 27dada070d59c28a441f1907d2cec891b17dcb26)
Signed-off-by: Chandan Babu R <chandan.babu@oracle.com>

---
## [aerospacelab-sa/odoo](https://github.com/aerospacelab-sa/odoo)@[61270ee8bf...](https://github.com/aerospacelab-sa/odoo/commit/61270ee8bffb6e85f8ff0d19c7a3889fdce2f486)
#### Monday 2022-11-14 10:44:08 by qsm-odoo

[FIX] website, *: allow to re-edit company team snippet images

*: website_sale

Since [1], it was not possible to edit a company team snippet image
anymore as soon as the page was saved once. Indeed that commit added
o_not_editable/contenteditable="false" on the parent column to make sure
no text can be added in that column and contenteditable="true" on the
images so that they are still editable (even though HTML-specs-wise
adding contenteditable="true" on images probably does not mean much as
images are self-closing tags, our editor understand that as the ability
to edit the image anyway). That contenteditable="true" part is however
removed when leaving edit mode... and was not restored upon entering
edit mode again.

This fixes the problems with a specific JS patch, we'll review to see if
better can be done in master.

Funny enough, that bug was actually gone in 15.0... by mistake. A recent
bug fix actually reintroduced that isolated bug at [2] (by reintroducing
the fact that images in a non-editable environment are not possible to
edit). The 3 opened tickets this commit mentions were actually reported
for 15.0 immediately after that, while the 14.0 being broken about this
since the beginning apparently did not bother anyone.

Note: as a forward-ported fix, this also takes the opportunity to clean
a bit what was done at [3]. (calling `_super`, no duplicated code,
adding comments, ...).

[1]: https://github.com/odoo/odoo/commit/656cac1bf21c7c5a56aa569008aac58436c747fb
[2]: https://github.com/odoo/odoo/commit/e113bae04a64a8bd341a80736086ab7c25079dd3
[3]: https://github.com/odoo/odoo/commit/e2f7b8fad76dc816b2f6864340d3740446117cdb

opw-3031217
opw-3032482
opw-3035289

closes odoo/odoo#104193

X-original-commit: e7c8fed8e373d7005c16c88d3a7bad6f425d13e5
Signed-off-by: Romain Derie (rde) <rde@odoo.com>
Signed-off-by: Quentin Smetz (qsm) <qsm@odoo.com>

---
## [kc9eye/UData](https://github.com/kc9eye/UData)@[cfcf5dbcc5...](https://github.com/kc9eye/UData/commit/cfcf5dbcc532f04b3e46df5adaa8000d360f3424)
#### Monday 2022-11-14 13:04:51 by Paul Lane

fucking resort order, GOD DAMN!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

---
## [Paxilmaniac/Skyrat-tg](https://github.com/Paxilmaniac/Skyrat-tg)@[7c9e26bb85...](https://github.com/Paxilmaniac/Skyrat-tg/commit/7c9e26bb85a40ee3f5a570fe4f51df3c4f350ea5)
#### Monday 2022-11-14 14:11:09 by SkyratBot

[MIRROR] Fixes Some Incredulously Fucked Up Recycler Behavior [MDB IGNORE] (#17018)

* Fixes Some Incredulously Fucked Up Recycler Behavior (#70638)

* test one

Hey there!

Did you know that if you toss someone into a recycled emagger, that we delete _all_ of that mob's contents? You probably didn't because this shit is broken broken. Like, ow.

That's because we manually moved an item to nullspace, which caused a _slew_ of odd behavior in the Destroy chain for `obj/item` since it moves it to nullspace at a very specific point in time and makes all of it's assumptions on when you move the thing to nullspace. If it's in nullspace before you call qdel, you would shit out the ass with hanging references stuck on the mob (like `w_uniform` pointing to something in nullspace, like the image above).

All fixed now, though.

* I FUCKING LOVE UNIT TESTS

THIS SHIT WILL NEVER BREAK AGAIN!!!

* i blanked

my guy hasn't moved for twenty minutes

Co-authored-by: Mothblocks <35135081+Mothblocks@ users.noreply.github.com>

* wrong documentation

Co-authored-by: Mothblocks <35135081+Mothblocks@ users.noreply.github.com>

* Fixes Some Incredulously Fucked Up Recycler Behavior

Co-authored-by: san7890 <the@san7890.com>
Co-authored-by: Mothblocks <35135081+Mothblocks@ users.noreply.github.com>

---
## [lrug/lrug.org](https://github.com/lrug/lrug.org)@[89e810b2a0...](https://github.com/lrug/lrug.org/commit/89e810b2a05dff59d0ff8b6698b387fd28706e47)
#### Monday 2022-11-14 14:26:20 by Tom Stuart

Remove references to “our own little bubbles” for in-person meetings

This made sense for virtual meetings but is a confusing non sequitur now
that we’ve returned to in-person.

Arguably we should also return to saying more about the scope of the
code of conduct with respect to the socialising part of the evening, per
e.g. the last pre-pandemic announcement [0], but that’s a separate
decision.

[0] https://lrug.org/meetings/2020/march/#afterwards

---
## [Tomoms/android_kernel_essential_msm8998](https://github.com/Tomoms/android_kernel_essential_msm8998)@[470f714072...](https://github.com/Tomoms/android_kernel_essential_msm8998/commit/470f714072e7096b7a841ac51645b9d3efa989b3)
#### Monday 2022-11-14 14:40:47 by Christian Brauner

BACKPORT: signal: add pidfd_send_signal() syscall

The kill() syscall operates on process identifiers (pid). After a process
has exited its pid can be reused by another process. If a caller sends a
signal to a reused pid it will end up signaling the wrong process. This
issue has often surfaced and there has been a push to address this problem [1].

This patch uses file descriptors (fd) from proc/<pid> as stable handles on
struct pid. Even if a pid is recycled the handle will not change. The fd
can be used to send signals to the process it refers to.
Thus, the new syscall pidfd_send_signal() is introduced to solve this
problem. Instead of pids it operates on process fds (pidfd).

/* prototype and argument /*
long pidfd_send_signal(int pidfd, int sig, siginfo_t *info, unsigned int flags);

/* syscall number 424 */
The syscall number was chosen to be 424 to align with Arnd's rework in his
y2038 to minimize merge conflicts (cf. [25]).

In addition to the pidfd and signal argument it takes an additional
siginfo_t and flags argument. If the siginfo_t argument is NULL then
pidfd_send_signal() is equivalent to kill(<positive-pid>, <signal>). If it
is not NULL pidfd_send_signal() is equivalent to rt_sigqueueinfo().
The flags argument is added to allow for future extensions of this syscall.
It currently needs to be passed as 0. Failing to do so will cause EINVAL.

/* pidfd_send_signal() replaces multiple pid-based syscalls */
The pidfd_send_signal() syscall currently takes on the job of
rt_sigqueueinfo(2) and parts of the functionality of kill(2), Namely, when a
positive pid is passed to kill(2). It will however be possible to also
replace tgkill(2) and rt_tgsigqueueinfo(2) if this syscall is extended.

/* sending signals to threads (tid) and process groups (pgid) */
Specifically, the pidfd_send_signal() syscall does currently not operate on
process groups or threads. This is left for future extensions.
In order to extend the syscall to allow sending signal to threads and
process groups appropriately named flags (e.g. PIDFD_TYPE_PGID, and
PIDFD_TYPE_TID) should be added. This implies that the flags argument will
determine what is signaled and not the file descriptor itself. Put in other
words, grouping in this api is a property of the flags argument not a
property of the file descriptor (cf. [13]). Clarification for this has been
requested by Eric (cf. [19]).
When appropriate extensions through the flags argument are added then
pidfd_send_signal() can additionally replace the part of kill(2) which
operates on process groups as well as the tgkill(2) and
rt_tgsigqueueinfo(2) syscalls.
How such an extension could be implemented has been very roughly sketched
in [14], [15], and [16]. However, this should not be taken as a commitment
to a particular implementation. There might be better ways to do it.
Right now this is intentionally left out to keep this patchset as simple as
possible (cf. [4]).

/* naming */
The syscall had various names throughout iterations of this patchset:
- procfd_signal()
- procfd_send_signal()
- taskfd_send_signal()
In the last round of reviews it was pointed out that given that if the
flags argument decides the scope of the signal instead of different types
of fds it might make sense to either settle for "procfd_" or "pidfd_" as
prefix. The community was willing to accept either (cf. [17] and [18]).
Given that one developer expressed strong preference for the "pidfd_"
prefix (cf. [13]) and with other developers less opinionated about the name
we should settle for "pidfd_" to avoid further bikeshedding.

The  "_send_signal" suffix was chosen to reflect the fact that the syscall
takes on the job of multiple syscalls. It is therefore intentional that the
name is not reminiscent of neither kill(2) nor rt_sigqueueinfo(2). Not the
fomer because it might imply that pidfd_send_signal() is a replacement for
kill(2), and not the latter because it is a hassle to remember the correct
spelling - especially for non-native speakers - and because it is not
descriptive enough of what the syscall actually does. The name
"pidfd_send_signal" makes it very clear that its job is to send signals.

/* zombies */
Zombies can be signaled just as any other process. No special error will be
reported since a zombie state is an unreliable state (cf. [3]). However,
this can be added as an extension through the @flags argument if the need
ever arises.

/* cross-namespace signals */
The patch currently enforces that the signaler and signalee either are in
the same pid namespace or that the signaler's pid namespace is an ancestor
of the signalee's pid namespace. This is done for the sake of simplicity
and because it is unclear to what values certain members of struct
siginfo_t would need to be set to (cf. [5], [6]).

/* compat syscalls */
It became clear that we would like to avoid adding compat syscalls
(cf. [7]).  The compat syscall handling is now done in kernel/signal.c
itself by adding __copy_siginfo_from_user_generic() which lets us avoid
compat syscalls (cf. [8]). It should be noted that the addition of
__copy_siginfo_from_user_any() is caused by a bug in the original
implementation of rt_sigqueueinfo(2) (cf. 12).
With upcoming rework for syscall handling things might improve
significantly (cf. [11]) and __copy_siginfo_from_user_any() will not gain
any additional callers.

/* testing */
This patch was tested on x64 and x86.

/* userspace usage */
An asciinema recording for the basic functionality can be found under [9].
With this patch a process can be killed via:

 #define _GNU_SOURCE
 #include <errno.h>
 #include <fcntl.h>
 #include <signal.h>
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
 #include <sys/stat.h>
 #include <sys/syscall.h>
 #include <sys/types.h>
 #include <unistd.h>

 static inline int do_pidfd_send_signal(int pidfd, int sig, siginfo_t *info,
                                         unsigned int flags)
 {
 #ifdef __NR_pidfd_send_signal
         return syscall(__NR_pidfd_send_signal, pidfd, sig, info, flags);
 #else
         return -ENOSYS;
 #endif
 }

 int main(int argc, char *argv[])
 {
         int fd, ret, saved_errno, sig;

         if (argc < 3)
                 exit(EXIT_FAILURE);

         fd = open(argv[1], O_DIRECTORY | O_CLOEXEC);
         if (fd < 0) {
                 printf("%s - Failed to open \"%s\"\n", strerror(errno), argv[1]);
                 exit(EXIT_FAILURE);
         }

         sig = atoi(argv[2]);

         printf("Sending signal %d to process %s\n", sig, argv[1]);
         ret = do_pidfd_send_signal(fd, sig, NULL, 0);

         saved_errno = errno;
         close(fd);
         errno = saved_errno;

         if (ret < 0) {
                 printf("%s - Failed to send signal %d to process %s\n",
                        strerror(errno), sig, argv[1]);
                 exit(EXIT_FAILURE);
         }

         exit(EXIT_SUCCESS);
 }

/* Q&A
 * Given that it seems the same questions get asked again by people who are
 * late to the party it makes sense to add a Q&A section to the commit
 * message so it's hopefully easier to avoid duplicate threads.
 *
 * For the sake of progress please consider these arguments settled unless
 * there is a new point that desperately needs to be addressed. Please make
 * sure to check the links to the threads in this commit message whether
 * this has not already been covered.
 */
Q-01: (Florian Weimer [20], Andrew Morton [21])
      What happens when the target process has exited?
A-01: Sending the signal will fail with ESRCH (cf. [22]).

Q-02:  (Andrew Morton [21])
       Is the task_struct pinned by the fd?
A-02:  No. A reference to struct pid is kept. struct pid - as far as I
       understand - was created exactly for the reason to not require to
       pin struct task_struct (cf. [22]).

Q-03: (Andrew Morton [21])
      Does the entire procfs directory remain visible? Just one entry
      within it?
A-03: The same thing that happens right now when you hold a file descriptor
      to /proc/<pid> open (cf. [22]).

Q-04: (Andrew Morton [21])
      Does the pid remain reserved?
A-04: No. This patchset guarantees a stable handle not that pids are not
      recycled (cf. [22]).

Q-05: (Andrew Morton [21])
      Do attempts to signal that fd return errors?
A-05: See {Q,A}-01.

Q-06: (Andrew Morton [22])
      Is there a cleaner way of obtaining the fd? Another syscall perhaps.
A-06: Userspace can already trivially retrieve file descriptors from procfs
      so this is something that we will need to support anyway. Hence,
      there's no immediate need to add another syscalls just to make
      pidfd_send_signal() not dependent on the presence of procfs. However,
      adding a syscalls to get such file descriptors is planned for a
      future patchset (cf. [22]).

Q-07: (Andrew Morton [21] and others)
      This fd-for-a-process sounds like a handy thing and people may well
      think up other uses for it in the future, probably unrelated to
      signals. Are the code and the interface designed to permit such
      future applications?
A-07: Yes (cf. [22]).

Q-08: (Andrew Morton [21] and others)
      Now I think about it, why a new syscall? This thing is looking
      rather like an ioctl?
A-08: This has been extensively discussed. It was agreed that a syscall is
      preferred for a variety or reasons. Here are just a few taken from
      prior threads. Syscalls are safer than ioctl()s especially when
      signaling to fds. Processes are a core kernel concept so a syscall
      seems more appropriate. The layout of the syscall with its four
      arguments would require the addition of a custom struct for the
      ioctl() thereby causing at least the same amount or even more
      complexity for userspace than a simple syscall. The new syscall will
      replace multiple other pid-based syscalls (see description above).
      The file-descriptors-for-processes concept introduced with this
      syscall will be extended with other syscalls in the future. See also
      [22], [23] and various other threads already linked in here.

Q-09: (Florian Weimer [24])
      What happens if you use the new interface with an O_PATH descriptor?
A-09:
      pidfds opened as O_PATH fds cannot be used to send signals to a
      process (cf. [2]). Signaling processes through pidfds is the
      equivalent of writing to a file. Thus, this is not an operation that
      operates "purely at the file descriptor level" as required by the
      open(2) manpage. See also [4].

/* References */
[1]:  https://lore.kernel.org/lkml/20181029221037.87724-1-dancol@google.com/
[2]:  https://lore.kernel.org/lkml/874lbtjvtd.fsf@oldenburg2.str.redhat.com/
[3]:  https://lore.kernel.org/lkml/20181204132604.aspfupwjgjx6fhva@brauner.io/
[4]:  https://lore.kernel.org/lkml/20181203180224.fkvw4kajtbvru2ku@brauner.io/
[5]:  https://lore.kernel.org/lkml/20181121213946.GA10795@mail.hallyn.com/
[6]:  https://lore.kernel.org/lkml/20181120103111.etlqp7zop34v6nv4@brauner.io/
[7]:  https://lore.kernel.org/lkml/36323361-90BD-41AF-AB5B-EE0D7BA02C21@amacapital.net/
[8]:  https://lore.kernel.org/lkml/87tvjxp8pc.fsf@xmission.com/
[9]:  https://asciinema.org/a/IQjuCHew6bnq1cr78yuMv16cy
[11]: https://lore.kernel.org/lkml/F53D6D38-3521-4C20-9034-5AF447DF62FF@amacapital.net/
[12]: https://lore.kernel.org/lkml/87zhtjn8ck.fsf@xmission.com/
[13]: https://lore.kernel.org/lkml/871s6u9z6u.fsf@xmission.com/
[14]: https://lore.kernel.org/lkml/20181206231742.xxi4ghn24z4h2qki@brauner.io/
[15]: https://lore.kernel.org/lkml/20181207003124.GA11160@mail.hallyn.com/
[16]: https://lore.kernel.org/lkml/20181207015423.4miorx43l3qhppfz@brauner.io/
[17]: https://lore.kernel.org/lkml/CAGXu5jL8PciZAXvOvCeCU3wKUEB_dU-O3q0tDw4uB_ojMvDEew@mail.gmail.com/
[18]: https://lore.kernel.org/lkml/20181206222746.GB9224@mail.hallyn.com/
[19]: https://lore.kernel.org/lkml/20181208054059.19813-1-christian@brauner.io/
[20]: https://lore.kernel.org/lkml/8736rebl9s.fsf@oldenburg.str.redhat.com/
[21]: https://lore.kernel.org/lkml/20181228152012.dbf0508c2508138efc5f2bbe@linux-foundation.org/
[22]: https://lore.kernel.org/lkml/20181228233725.722tdfgijxcssg76@brauner.io/
[23]: https://lwn.net/Articles/773459/
[24]: https://lore.kernel.org/lkml/8736rebl9s.fsf@oldenburg.str.redhat.com/
[25]: https://lore.kernel.org/lkml/CAK8P3a0ej9NcJM8wXNPbcGUyOUZYX+VLoDFdbenW3s3114oQZw@mail.gmail.com/

Cc: "Eric W. Biederman" <ebiederm@xmission.com>
Cc: Jann Horn <jannh@google.com>
Cc: Andy Lutomirsky <luto@kernel.org>
Cc: Andrew Morton <akpm@linux-foundation.org>
Cc: Oleg Nesterov <oleg@redhat.com>
Cc: Al Viro <viro@zeniv.linux.org.uk>
Cc: Florian Weimer <fweimer@redhat.com>
Signed-off-by: Christian Brauner <christian@brauner.io>
Reviewed-by: Tycho Andersen <tycho@tycho.ws>
Reviewed-by: Kees Cook <keescook@chromium.org>
Reviewed-by: David Howells <dhowells@redhat.com>
Acked-by: Arnd Bergmann <arnd@arndb.de>
Acked-by: Thomas Gleixner <tglx@linutronix.de>
Acked-by: Serge Hallyn <serge@hallyn.com>
Acked-by: Aleksa Sarai <cyphar@cyphar.com>

(cherry picked from commit 3eb39f47934f9d5a3027fe00d906a45fe3a15fad)

Conflicts:
        arch/x86/entry/syscalls/syscall_32.tbl - trivial manual merge
        arch/x86/entry/syscalls/syscall_64.tbl - trivial manual merge
        include/linux/proc_fs.h - trivial manual merge
        include/linux/syscalls.h - trivial manual merge
        include/uapi/asm-generic/unistd.h - trivial manual merge
        kernel/signal.c - struct kernel_siginfo does not exist in 4.14
        kernel/sys_ni.c - cond_syscall is used instead of COND_SYSCALL
        arch/x86/entry/syscalls/syscall_32.tbl
        arch/x86/entry/syscalls/syscall_64.tbl

(1. manual merges because of 4.14 differences
 2. change prepare_kill_siginfo() to use struct siginfo instead of
kernel_siginfo
 3. use copy_from_user() instead of copy_siginfo_from_user() in copy_siginfo_from_user_any()
 4. replaced COND_SYSCALL with cond_syscall
 5. Removed __ia32_sys_pidfd_send_signal in arch/x86/entry/syscalls/syscall_32.tbl.
 6. Replaced __x64_sys_pidfd_send_signal with sys_pidfd_send_signal in arch/x86/entry/syscalls/syscall_64.tbl.)

Bug: 135608568
Test: test program using syscall(__NR_pidfd_send_signal,..) to send SIGKILL
Change-Id: I34da11c63ac8cafb0353d9af24c820cef519ec27
Signed-off-by: Suren Baghdasaryan <surenb@google.com>
Signed-off-by: electimon <electimon@gmail.com>

---
## [sioodmy/dotfiles](https://github.com/sioodmy/dotfiles)@[d17a2001c1...](https://github.com/sioodmy/dotfiles/commit/d17a2001c1dec603bd5ba1be0be9a561b81120ef)
#### Monday 2022-11-14 15:25:22 by sioodmy

feat: add custom domain alias for my dotfiles

holy shit thats nixos as fuck

---
## [PropainAcessories/PWA-Text-Editor](https://github.com/PropainAcessories/PWA-Text-Editor)@[bc7ca0d272...](https://github.com/PropainAcessories/PWA-Text-Editor/commit/bc7ca0d2721e64779e4fb14ed502ca7f6c502970)
#### Monday 2022-11-14 16:26:05 by HankHill

you stupid fucking screenshot show up in the god damn readme or im gonna throw a trash can through some tech exec's window

---
## [Quick4Tech/ARIES](https://github.com/Quick4Tech/ARIES)@[12c89d0b0e...](https://github.com/Quick4Tech/ARIES/commit/12c89d0b0e3ef45d2c863b28e5edb2bc5833cee5)
#### Monday 2022-11-14 18:45:10 by Liam

does anyone read these?

born to code the wode and the smode for the dodes who implode when coded into the matrix which is in itself an illusion even once realized that it doesn't exist but still despite  that people still call it a miracle when they can escape it when really the solution was infront of them the whole time but in reality when you think about the sybolism of the film you start to see that it's not about a robotic dystopia with humanity all used to power the mechines even with the true end saying that the martriix has layers and they were in it the whole time even when they thought they were in the real world. now this is a revelation that shocked the audidence and nobody expected for it to be like this as the established theme was them going from the fake world to the real world. and that's my opinion on hotdogs thanks for reading!

---
## [JoseEstevan/awesome-datascience](https://github.com/JoseEstevan/awesome-datascience)@[3b71f0bbc3...](https://github.com/JoseEstevan/awesome-datascience/commit/3b71f0bbc3e4a68a4c431f59309c61eb96ae5912)
#### Monday 2022-11-14 18:49:23 by Andrew Carr

Update README.md

I just published a book about using data science in your personal day-to-day life. I think this group might appreciate it. There are fun pictures, code, math, and jokes. I hope self promotion is ok, this seemed really relevant to the community.

---
## [Solamil/fork-dwm](https://github.com/Solamil/fork-dwm)@[67d76bdc68...](https://github.com/Solamil/fork-dwm/commit/67d76bdc68102df976177de351f65329d8683064)
#### Monday 2022-11-14 18:50:13 by Chris Down

Do not allow focus to drift from fullscreen client via focusstack()

It generally doesn't make much sense to allow focusstack() to navigate
away from the selected fullscreen client, as you can't even see which
client you're selecting behind it.

I have had this up for a while on the wiki as a separate patch[0], but
it seems reasonable to avoid this behaviour in dwm mainline, since I'm
struggling to think of any reason to navigate away from a fullscreen
client other than a mistake.

0: https://dwm.suckless.org/patches/alwaysfullscreen/

---
## [Pranav-V/CS371M-Final-Project](https://github.com/Pranav-V/CS371M-Final-Project)@[a7a4b9df64...](https://github.com/Pranav-V/CS371M-Final-Project/commit/a7a4b9df64fb27484e3909df6784dc11d178e700)
#### Monday 2022-11-14 18:50:50 by Abbhinav Jayaraman

I hate my life, data is now null again for some reason.

---
## [Moribun/sunset-wasteland](https://github.com/Moribun/sunset-wasteland)@[0da80ad53e...](https://github.com/Moribun/sunset-wasteland/commit/0da80ad53e5db8126fb8adeff3fa3a4b80e843b5)
#### Monday 2022-11-14 19:11:31 by Carl?

Khan Pass | Part Two (#701)

- - -
Balance:
 - Khan Senior Enforcer given a Khan scrap sabre.
 - Khan scrap sabre now able to be crafted by anyone in the faction.
 - Legion Forgemaster lost their standard welding tool, given they have a basic one in their belt.
 - Neostead lootdrop updated to exclusively contain trainshot, rather than a mix of buckshot and slugs.
- - -
Map:
 - Water in Rock Springs once again made safe. Somehow this was left scuffed and no one caught it until I took a look myself.
 - Khans given a second level to their camp, which is just a double-stacked tent for chemistry and an overlook of the gate.
 - Khans given control of Heaven's Knight, with a ladder leading to and from it accessible via their mining area.
 - Bighorn given a magical disposal bin. Enjoy.
 - Pool closed.
- - -
New | Khan:
 - Khan Smith added. They're near identical in function to the Legion Forgemaster.
 - Khan Courtesan added. They're an RP exclusive role and are fairly self-explanatory.
- -

---
## [n3wjack/tweets](https://github.com/n3wjack/tweets)@[094433a98c...](https://github.com/n3wjack/tweets/commit/094433a98cb1f82e2e9e3242fb8dac6e678ac6b1)
#### Monday 2022-11-14 19:51:46 by n3wjack

    @guites re: 8eb3c5e73 funny you find Mastodon complex, yet you're
    posting here :D
    it isn't complex to use frankly, just pick a server and roll with it,
    you can always migrate later on. As a user you don't notice the
    federation stuff, though it's good to know.

    I like the fact that it's not yet another centralized service owned by
    some Corp that can fuck things up whenever they feel like it.
    When it comes to the small community vibe, this is very much alive on
    the smaller Masto instances as well, catering to some niche. The local
    timeline is great there.

    So far I like it it better than the current Twitter. Not toxic, no ads,
    and lot's of fun and shitposting. :D

---
## [zulip/zulip](https://github.com/zulip/zulip)@[23a776c144...](https://github.com/zulip/zulip/commit/23a776c1448da18b906529e5951e24d8d58a7e81)
#### Monday 2022-11-14 20:13:18 by Mateusz Mandera

maybe_send_to_registration: Don't reuse pre-existing PreregistraionUser.

There was the following bug here:
1. Send an email invite to a user.
2. Have the user sign up via social auth without going through that
   invite, meaning either going via a multiuse invite link or just
   straight-up Sign up if the org permissions allow.

That resulted in the PreregistrationUser that got generated in step (1)
having 2 Confirmations tied to it - because maybe_send_to_registration
grabbed the object and created a new confirmation link for it. That is a
corrupted state, Confirmation is supposed to be unique.

One could try to do fancy things with checking whether a
PreregistrationUser already have a Confirmation link, but to avoid races
between ConfirmationEmailWorker and maybe_send_to_registration, this
would require taking locks and so on - which gets needlessly
complicated. It's simpler to not have them compete for the same object.

The point of the PreregistrationUser re-use in
maybe_send_to_registration is that if an admin invites a user, setting
their initial streams and role, it'd be an annoying experience if the
user ends up signing up not via the invite and those initial streams
streams etc. don't get set up. But to handle this, we can just copy the
relevant values from the pre-existing prereg_user, rather than re-using
the object itself.

---
## [CSC207-2022F-UofT/course-project-team-communify](https://github.com/CSC207-2022F-UofT/course-project-team-communify)@[d2cd0893c1...](https://github.com/CSC207-2022F-UofT/course-project-team-communify/commit/d2cd0893c1c885bfecf5e8c4eee680a8e14e4a17)
#### Monday 2022-11-14 20:59:57 by clin1967

Song Database Implementation: songLibrary, songDsData, bits and pieces.

Pull includes the implementation of everything relating to Song's database: mainly songLibrary and songDsData. Brief summary;

- **Uploaded the standard library of songs.** Currently located in the new folder songLib under src. Any test cases or other pieces of code that currently create new instances of Songs should likely be re-reviewed with this in mind. I already fixed a few, but I might've missed some.

- Updated build.gradle to include jaudiotagger

- Updated Song entity to include username of uploading user.

- Reading/saving from songs.csv, formatted as `ID, uploader, filepath`

- Changed artistList from List<String> to String[]

- Removed 'length' as Jaudiotagger cannot retrieve it. If we want to show it, it would be on the Jlayer side. Better suited this way, anyway.

- Removed isExplicit. Too much of a pain for too little gain.

- changed saveSong to return a boolean for a successful song addition.

- Created Test file for SongLibrary.

KNOWN ISSUES

- createFile() assumes the existence of a user admin, as it assigns all songs currently in songLib /to/ admin. (This was only important for creating songs.csv from scratch. It won't do this now that it exists.)

- Many files don't have album covers. I'll be creating default covers to put in the BufferedImage parameter later. I don't think anyone is at that stage (which is why I'm putting it off for a later PR), but please don't try accessing the BufferedImage parameter until I do.

- When parsing ID names, the 0s at the beginning of the names are omitted. Theoretically, this shouldn't create duplicate IDs anyway, as 1) what's being checked is the parsed ID, and 2) randInt will not create more IDs that start with 0. I'll go back and rename the files to omit the 0s (not that difficult), but I figure its lower priority due to the reasons I stated.

- Need to implement safeguard against improperly formatted mp3s (ex. missing genre). There currently aren't any, so it should be temporarily OK, but I have some code smells because of this.

Making this a PR despite this so you guys have a better SONG_LIBRARY to work with for now.

---
## [tgstation/tgstation](https://github.com/tgstation/tgstation)@[25d4afc869...](https://github.com/tgstation/tgstation/commit/25d4afc869585373571da5ba4a77fb967ffdedfe)
#### Monday 2022-11-14 21:07:54 by Iamgoofball

Retires explosive lance crafting to a nice farm upstate where it has plenty of room to run around (#71256)

## About The Pull Request

You can no longer craft explosive lances.

## Why It's Good For The Game

Explosive lances are unhealthy for the game in it's current iteration.
Many years ago when the game was more loose and we weren't dealing with
players who treat the game like competitive TTT or Town of Salem,

They are a one shot kill weapon, which is the most powerful kind of
weapon in every gamemode. @JohnFulpWillard likened it to 1f1, a concept
from Town of Salem players where the town trades 1 person for 1 bad guy.

Modern ss13 design includes a significantly heavier load of antagonists
that aren't fixed roundstart compared to when the e-lance went in.

When we added the e-lance, if nuke ops spawned, that was it, there was
nuke ops, if you e-lanced the nuke ops and died you were dead until the
next round.

Nowadays you're rolling for lone operative, blob, wizard, disease,
revenant, and every other fun enjoyable antagonist role under the sun.

I can e-lance a nuke op/cultist/traitor/revolutionary/any bad guy in the
game as a non-antag assistant, die, and have a good chance to roll
another, way more fun antag in deadchat.

My change to make the e-lance a proper "we both die" tool didn't
actually help because I didn't quite realize that to the modern SS13
player because of how we designed Dynamic and antagonists in the modern
era, death is, frankly, not a punishment anymore.

It's time we admit the facts, items designed in 2015 SS13 in #12389
simply don't hold up in a healthy manner in 2022 SS13. Dying in SS13 in
2015 was a significantly different experience with different
consequences than it has now, and right now "kills you when you use it"
is not the same massive downside it was 7-8 years ago.

## Changelog
:cl:
del: You can no longer craft explosive lances.
/:cl:

---
## [ThirdHawk/Misc](https://github.com/ThirdHawk/Misc)@[3e0f3b15f1...](https://github.com/ThirdHawk/Misc/commit/3e0f3b15f1a42e5eac5567ecc8c8deceb962e5c6)
#### Monday 2022-11-14 21:16:10 by ThirdHawk

added gif of people fighting because fuck you

porca madonna

---
## [Shitpit/shitpit.github.io](https://github.com/Shitpit/shitpit.github.io)@[74d04e38bf...](https://github.com/Shitpit/shitpit.github.io/commit/74d04e38bff46d2da1ef5d46a50d24979a5c1352)
#### Monday 2022-11-14 21:56:51 by Kvahn-ui

STRDYTFUGIHOI

i hate my life

succomb to the afterlife

---
## [cockroachdb/cockroach](https://github.com/cockroachdb/cockroach)@[f50670b344...](https://github.com/cockroachdb/cockroach/commit/f50670b3440e91bec05aebc1bc425e4dd465583f)
#### Monday 2022-11-14 22:48:48 by Tobias Grieger

rpc: re-work connection maintenance

This commit simplifies the `rpc` package.

The main aim is to make the code and the logging it produces somewhat
clearer and to pave the way for an ultimate merging of `nodedialer` with
`rpc` as well as adoption of the `util/circuit` package (async-based
circuit breaker).

`rpc.Context` hadn't aged well. Back in the day, it was a connection
pool that held on to connections even when they failed. The heartbeat
loop would run forever and its latest outcome would reflect the health
of the connection. We relied on gRPC to reconnect the transport as
necessary.

At some point we realized that leaving the connection management to
gRPC could cause correctness issues. For example, if a node is de-
commissioned and brought up again, gRPC might reconnect to it but
now we have a connection that claims to be for node X but is actually
for node Y. Similarly, we want to be able to vet that the remote
node's cluster version is compatible with ours before letting any
messages cross the connection.

To achieve this, we added `onlyOnceDialer` - a dialer that fails
all but the first attempt to actually connect, and in particular
from that point on connections were never long lived once they
hit a failure state.

Still, the code and testing around the heartbeat loop continued
to nurture this illusion. I found that quite unappealing as it
was sure to throw off whoever would ultimately work on this code.

So, while my original impetus was to produce better log messages
from `rpc.Context` when there were connection issues, I took
the opportunity to simplify the architecture of the code to
reflect what it actually does.

In doing so, a few heartbeat-related metrics were removed, as they made
limited sense in a world where failing connections get torn down (i.e.
our world).

Connection state logging is now a lot nicer. Previously, one would very
frequently see the onlyOnceDialer's error "cannot reuse client
connection" which, if one is not familar with the concept of the
onlyOnceDialer is completely opaque, and for those few in the know is an
unhelpful error - you wanted the error that occurred during dialing.

I paid special attention to the "failfast" behavior. If connections
don't stay in the pool when they are unhealthy, what prevents us from
dialing down nodes in a tight loop? I realized that we got lucky with
our use of onlyOnceDialer because it would always prompt gRPC to do
one retry, and at a 1s backoff. So, the connection would stay in the
pool for at least a second, meaning that this was the maximum frequency
at which we'd try to connect to a down node.

My cleanups to onlyOnceDialer in pursuit of better logging elimitated
this (desirable) property. Instead we now skip the log messages should
they become too frequent. I claim that this is acceptable for now since
the vast majority of callers go through a `node.Diaelr`, which has a
circuit breaker (letting callers through at most once per second).

We previously configured gRPC with a 20s dial timeout. That means that
if a remote is unreachable, we'd spend 20s just trying to dial it,
possibly tying up callers that could be trying a reachable node in the
meantime. That seemed wildly too large; I am reducing it to 5s here
which is still generous (but there's a TLS handshake in here so better
not make it too tight).

We previously tried to re-use connections that were keyed with a NodeID
for dial attempts that didn't provide a NodeID. This caused some issues
over the years and was now removed; the extra RPC connections are
unlikely to cause any issues.

The internal connection map is now a plain map with an RWMutex. This is
just easier and gets the job done. The code has simplified as a result
and it's clearer that it's correct (which it repeatedly was not in the
past).

I implemented redactability for gRPC's `status.Status`-style errors,
so they format nicer and at least we get to see the error code (the
error message is already flattened when gRPC hands us the error,
sadly).

There are various other improvements to errors and formatting. The
following are excerpts from the health channel when shutting down
another node in a local cluster:

Connection is first established:

> [n3,rnode=1,raddr=‹127.0.0.1:26257›,class=system,rpc] 3  connection is now ready

n1 goes down, i.e. existing connection is interrupted (this error comes
from `onlyOnceDialer`):

> [n3,rnode=1,raddr=‹127.0.0.1:26257›,class=system,rpc] 35  closing
connection after: ‹rpc error: code = Unavailable desc = connection
error: desc = "transport: Error while dialing connection interrupted
(did the remote node shut down or are there networking issues?)"›

Reconnection attempts; these logs are spaced 1-2s apart:

> [n3,rnode=1,raddr=‹127.0.0.1:26257›,class=system,rpc] 37  unable to
connect (is the peer up and reachable?): initial connection heartbeat
failed: ‹rpc error: code = Unavailable desc = connection error: desc =
"transport: Error while dialing dial tcp 127.0.0.1:26257: connect:
connection refused"›

n3 is back up:

> [n3,rnode=1,raddr=‹127.0.0.1:26257›,class=system,rpc] 49  connection is now ready

There are other connection errors in the logs that stem from operations
checking for a healthy connection, failing to get through circuit
breakers, etc., such as these:

> [n3,intExec=‹claim-jobs›,range-lookup=/Table/15/4/‹NULL›] 33  unable
to connect to n1: failed to check for ready connection to n1 at
‹127.0.0.1:26257›: ‹connection not ready: TRANSIENT_FAILURE›

Release note (general change): Previously, CockroachDB employed a 20s
connection timeout for cluster-internal connections between nodes.  This
has been reduced to 5s to potentially reduce the impact of network
issues.

Release note (general change): Previously, CockroachDB (mostly) shared a
TCP connection for the KV and Gossip subsystems. They now use their own
connection each, so the total number of outgoing and incoming TCP
connections at each node in the cluster will increase by 30 to 50
percent.

---
## [MrSableye/clovermon-showdown](https://github.com/MrSableye/clovermon-showdown)@[3f40fc1fda...](https://github.com/MrSableye/clovermon-showdown/commit/3f40fc1fda7b5f0f399d4c9acf4a8e63055aa9bd)
#### Monday 2022-11-14 23:39:58 by Greednut

Small Rootchew line cleanup

+ fuck you sherifuego

---

# [<](2022-11-13.md) 2022-11-14 [>](2022-11-15.md)

