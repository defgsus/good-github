# [<](2020-04-21.md) 2020-04-22 [>](2020-04-23.md)

2,726,663 events, 1,366,771 push events, 2,187,266 commit messages, 155,868,214 characters


## [Joannis/Citadel](https://github.com/Joannis/Citadel)@[e2c3176e1b...](https://github.com/Joannis/Citadel/commit/e2c3176e1b66dec483d21feb5471e56487a683d8)
#### Wednesday 2020-04-22 00:38:33 by Gwynne Raskind

The set of changes so far would be very difficult to break into multiple commits; apologies for the monster commit. Some highlights:
- Most things in SSHChannel.swift have doc comments now
- The magic numbers for the channel config are now named constants
- SSHChannelResponse has been split into the two packet types (which now live in SSHCHannelPacketTypes.swift) with somewhat more precise names.
- Removed a handful of totally unreferenced things, such as the `unopened` state on SSHForwardedChannel.
- Tried to clean up access control for various types and methods, success is questionable
- Reorganized the SSHForwardedChannel implementation a little to group things a bit more strongly.
- Redid the `handle(packet:)` function in `SSHSession.openChannel()` about six dozen times; I'm a bit ashamed of the ridiculous amount of time I spent on it, only to in the end put most of the logic back where it started (more or less). I did learn better just how much of a pain in the arse Result<> can be to actually use, though... Also, the necessity of ByteBuffer being mutable to be read is a travesty.
- Moved the types related specifically to channel packets to their own file.

---
## [rapid7/metasploit-payloads](https://github.com/rapid7/metasploit-payloads)@[8f5d4bef01...](https://github.com/rapid7/metasploit-payloads/commit/8f5d4bef01674cd5c2d224633761d9f41ba10c30)
#### Wednesday 2020-04-22 01:13:50 by OJ

Replace OpenSSL with LibreSSL in the Python extension

This was a bit of a pain, but was well worth it. Had to add a couple of
hacks to make it all work, but this is a nicer solution than having to
depend on OpenSSL and its horrendous build experience.

---
## [davidwestAC/spaceabyss](https://github.com/davidwestAC/spaceabyss)@[73ca387231...](https://github.com/davidwestAC/spaceabyss/commit/73ca3872310b209b8b0fa29ff4a7c11036812d8e)
#### Wednesday 2020-04-22 02:02:30 by davidwestAC

## [0.1.0] - 2020-04-21

### Added
- Monsters can now spawn in space.
- Comets spawn in the galaxy. They can be mined for ice blocks
- A new property to object types - spawns_in_galaxy. Boolean. This lets the asteroid system turn into more of a system
for anything that spawns directly in the galaxy
- Objects like asteroids and comets can now move around the galaxy
- Monster types can now be weak or strong to all damage types
- Object types can now be weak or strong against heat/freezing damage types
- Message text whenever something levels up. There was previously intermittent support for this, but it wasn't obvious
enough.
- The server is now sending conversion linkers to the client. The result parts of the conversion linkers aren't sent.
This still removes a bit of mystery, but being a farmer in Space Abyss basically sucked when you had to scroll through
your entire inventory every time.
- Admins can reload an event and all it's linkers and planet linkers from the database while the server is running

### Fixed
- Some spawners that don't spawn with HP and can't be attacked were failing to spawn things since their
hp_percent was NaN.
- Picking up Life Water
- Equipping wasn't working for some of the Exodium and Quick Matter set
- Lots of skills weren't updating properly. Lots of little broken bits around that system. Fixed them.
- Various bugs with switching views
- Display issue with the Primordial Ooze Pool
- Asteroids would show up on any view when they moved - made the shouldDraw checks more consistent on all views,
and fixed quite a few bugs that showed up from that.
- Spawned events were being deleted from memory, but not the database. This caused a bunch of old spawned events to
always appear after a server startup, delaying events.

### Changed
- COMPLETELY changed how monsters and objects spawn on planets.
- OLD WAY: Previously, there were set objects and monsters during
planet creation. A big downside of this is that I needed to regenerate a planet everytime I added in
a new object or monster that I wanted to spawn on the planet. If the number that spawned felt wrong, I had to re-generate
the entire planet. If there was a bug and players destroyed something they shouldn't - I could either manually add it back
in or... regenerate the planet.
- NEW WAY: Monsters and objects spawn via the event system. So I can change a monster or objects spawn behavior without
regenerating the entire planet.
- Changed the frame count and attackability of various spawners to work with the new system.
- Most edible things have had their duration doubled. I've found that only 10 ticks as a minimum goes by really fast. So
the new general minimum is 20 ticks.

---
## [michaelsmetsker2/TheWholeAssGame](https://github.com/michaelsmetsker2/TheWholeAssGame)@[edb4db8156...](https://github.com/michaelsmetsker2/TheWholeAssGame/commit/edb4db8156b69643474583bef81bbc8949f1f263)
#### Wednesday 2020-04-22 03:52:16 by michaelsmetsker2

god damnit

im stuck and extremely mad, if i try and continue any more tonight i think ima cry, i cant figure out how to reference a spritesheet from a abstract dereived script

---
## [Timothy-for-the-Nguyen/MomentumDash](https://github.com/Timothy-for-the-Nguyen/MomentumDash)@[b71eb1cc86...](https://github.com/Timothy-for-the-Nguyen/MomentumDash/commit/b71eb1cc8668fbac40b8982709d9790187a2fd94)
#### Wednesday 2020-04-22 05:21:09 by jack-shirley

fuck you
wMerge branch 'master' of https://github.com/Timothy-for-the-Nguyen/MomentumDash

---
## [joereddington/todo.txt](https://github.com/joereddington/todo.txt)@[6335ed173d...](https://github.com/joereddington/todo.txt/commit/6335ed173dac09f734a5a7ddcaac88784dd743ff)
#### Wednesday 2020-04-22 05:32:33 by Joseph Reddington

## 16/04/20 07:11, adding all the missing tasks
## 16/04/20 07:20 to 07:41, Writing up run_sleep_analysis_on_phone_1
(Including updating the blog issue)

## 16/04/20 07:48 to 08:10, Reminders and wheel of life (and brainstorming)
## 16/04/20 08:10 to 09:06, Repairing Parts of my memory palace
## 16/04/20 13:14  to 14:47, Replying to correspondence and processing social media

## 17/04/20 05:22 to 05:54, Working on Book +PersonalProjects

## 17/04/20 06:35 to 08:12, Working on Book +PersonalProjects

## 18/04/20 06:02 to 10:16, Working on Book +PersonalProjects
Writing really flowed: did 16 pages

## 19/04/20 16:27 to 17:54, Working on Book +PersonalProjects
Rewriting the first two chapters so I have something for beta readers, but spent a lot of time fixing references and citations.

## 19/04/20 20:47 to 21:38, Working on Book +PersonalProjects
* Second chapter is done!
* Linked list chapter is Not Okay. It needs more than a rewrite - in places it needs writing. That's okay, but it's a little annoying, still, I've got a week to do it.

## 20/04/20 07:39 to 09:00, Talking to Lizzie
## 21/04/20 07:25 to 10:00, Working on Yvonne STUFF (not in eQuality Time) and talking to Yvonne
* Also moved the gift policy over

## 22/04/20 05:18 to 06:30, Sorting out the notes and playing with vim
Turns out I lost a lot by NOT actually doing the notes
I also reviewed a vim video, and updated the vimrc so that it naturally includes the dictionary and fuzzy file searching starts to work.

---
## [chebfun/chebfun](https://github.com/chebfun/chebfun)@[6670352db9...](https://github.com/chebfun/chebfun/commit/6670352db9147bd21f6d85ccb89e3e530eb70ece)
#### Wednesday 2020-04-22 07:27:50 by Anthony P. Austin

Fix bracketing bug in stringParser.parSimp() related to division.

We all know that bracketing matters in expressions involving subtraction:
a - b - c and a - (b - c) are not the same thing.  The same is true of
division:  a/b/c = (a/b)/c and a/(b/c) are not the same thing.

stringParser currently handles subtraction correctly but not division.
The parSimp() function strips the brackets from a/(b/c), rendering it as
a/b/c.  This has embarrassing consequences:  if you solve y' = 2/(3/4)
in chebgui, it returns a line with slope 2/3/4 = 0.1667 instead of one
of slope 2/(3/4) = 2.1667.

That example may seem contrived, but I ran across this issue when trying
to solve y' = 1/(2*(y - 1)) with y(0) = 1 and was absolutely stunned
when chebgui gave me the constant solution y = 1 back (instead of
crashing or otherwise failing due to the singularity).  This problem was
a simplified version of another problem shown to me by my colleague
Carlos Borges, who was getting weird answers for it out of chebgui.

This commit fixes this situation by applying the same logic used to
handle subtraction in parSimp() to division:  if we have a division
operator to the left of the brackets we're considering for removal and
find a multiplication or division operator inside (addition and
subtraction already having been handled), we leave the brackets in
place.

This closes #2357.

---
## [dragazo/CSX64-cpp](https://github.com/dragazo/CSX64-cpp)@[eba3ab51ff...](https://github.com/dragazo/CSX64-cpp/commit/eba3ab51fff65a48b167328d8b0c4c5139bfdda6)
#### Wednesday 2020-04-22 07:35:10 by dragazo

more refactoring

got rid of a bunch of things that could be done with other things.
for instance, got rid of a few of the private memory access functions.

more mem access is done with safer conventions.
this includes requiring the exact type to be read rather than always returning value zero extended to u64.
apparently 10% of runtime in benchmarking files were from this very thing, so that's neat.

apparently suspended_read wasn't being used by anything other than its access functions.
i've elected to remove it entirely, as i'm not even really sure what it used to do anyway.
it was originally added as a hack fix for blocking console input file read, but is no longer used due to the better way employed now.

began renaming a bunch of things to fit the C++ style.
the name CSX64 comes from "C# x64" i.e. the original impl.
however, this impl has come to be the main one, and deserves proper C++ naming conventions like snake case functions.

found and fixed a bug in one of the vpu handlers thanks to better msvc warnings after an update.

changed Executable to use the new safe serialization functions for its binary io.
this would've caused object files from one endian system to be invalid on others - now is invariantly stored little-endian.

for the longest time the ret value of opcode handlers was discarded by tick() - no longer.
now returning false does not indicate error, rather it's a request for tick() to stop its loop early (if applicable).
so suspended_read is now replaced by sys_read returning false here (and repeating the syscall).

HLT now simply returns false instead of terminating with ErrorCode::Abort.
this is the real-world behavior of HLT, i just didn't find it useful at the time of implementation.
the intent now is that several Computer instances are being tick()ed with a number of ticks in a loop, and this lets it forfeit its time slice early.

changed a bunch of other stuff that i can't even remember... the updated msvc rename/find-uses tools are pretty sick...

---
## [Yokinman/NTTE](https://github.com/Yokinman/NTTE)@[69b4a5882f...](https://github.com/Yokinman/NTTE/commit/69b4a5882f63c8acde84f6c532ef12a8cbbbb210)
#### Wednesday 2020-04-22 09:06:13 by Yokin

bloargh
General
+ New 'chest_create()' script, automatically applies crown of love, crown of life, and rogue canisters cause doing this manually every time sucks humongous ass
  As a result a few more things synergize with colove/colife/rogue

Freak Chambers
+ Added Explo Freak, Rhino Freak, and Vat variants
+ Made them scale with loop
+ Added sounds
+ Added ground details
+ Improved sliding door visual a little bit
+ Improved the searching-for-an-open-area-to-spawn
+ Can now open by FloorExplos if over half of all Floor tiles are FloorExplo tiles
* Fixed some floating TopSmall tiles if you destroyed the doors before they fully opened
* Fixed it erroring if trying to spawn when the Player doesn't exist

Labs Vat
+ Finally it has a shadow, polish unheard of
~ Renamed from "LabsVat" to "MutantVat" to fit with the MutantTube object and the MutantVats event
- Doesn't spawn normally in Labs anymore

Portal Guardian
* Fixed them not playing their spr_disappear sprite

---
## [wrye-bash/wrye-bash](https://github.com/wrye-bash/wrye-bash)@[0994a969b6...](https://github.com/wrye-bash/wrye-bash/commit/0994a969b6276d58d9b1d5bc795dafc268b3f35a)
#### Wednesday 2020-04-22 10:33:13 by Daniel Nunes

Add fomod installer support

Option types are not validated - contradicting group and
option types should be undefined behaviour.
However, to simplify, option type always wins the conflict
and we deliver a warning if needed.

As an example, in a SelectAll group a NotUsable option
would not be selected.

Remove fomod metadata handling

Rework fomod installer backend

Changed:
  - User's choices are now "saved" when going to previous pages
  - Folders to install are now properly merged based on priority
  - Omitted destination attributes in file/folder tags are now
    properly handled.

TODO:
  - Update tests in test_bash repo
  - Add some inline documentation

This must go into the final commit message:

Ignored tags:
  - moduleImage
  - fommDependency

Ignored attributes:
  - position, colour - [moduleName]
  - alwaysInstall, installIfUsable - [file, folder]

Note:

Rework exe-based game detection logic FFF fomods

@@ -64,3 +64,3 @@ def __init__(self, parent_window, installer, page_size, pos):
         data_path = bass.dirs["mods"]
-        ver = env.get_file_version(bass.dirs["app"].join(bush.game.exe).s)
+        ver = env.get_file_version(bass.dirs["app"].join(bush.game.launch_exe).s)
         game_ver = u".".join([unicode(i) for i in ver])

Some wx cleanup in gui fomods

Cache images it does speedup loading them

(although that's probably due to my using balt.Image)

FFF couple typos

FileInfo(object): -> _FomodFileInfo(object): FFF WIP

Infernio: Updated for 'Rework game version calculation'

SSS Improve FOMOD installer link name

Should be FOMOD or FOMod, not Fomod. Also added three dots, since that
link opens an interactive dialog.

SSS to be squashed into the final FOMOD commit

_text = _(u'FOMOD Installer...') class variable SSS

No need to override __init__

Remove some leftover debug prints

Replace PageInfo with OrderedDict

Std lib is better. Port of GandaG/pyfomod@547494309

Add some docs to the fomod backend

Update for recent merges

FFF A bunch of FOMOD hacks

I hadn't actually realised just *how* broken the wizard/FOMOD
interaction is up until I just now got a really cryptic error message
from a wizard. Just some examples:
 - SelectSubPackage didn't work properly when the package had an fomod,
   because fomods do not populate Installer.espmMap, which wizards use
   to detect what subpackages and plugins are available.
 - The same goes for SelectPlugin, all deselect variants, SelectAll,
   etc. Probably for loops with SubPackages as well.
 - I screwed up my earlier fix. While it no longer crashed, it made
   wizards (with or without FOMODs) unable to select the last
   subpackage. But see above, wizards with FOMODs had a hard time with
   that anyways ;)
 - The result of applying a wizard and an FOMOD is well-defined (the
   FOMOD always wins because it short-circuits refreshDataSizeCrc), but
   it looked really confusing in the GUI. Still possible to create
   manually by checking both the fomod subpackage and other subpackages,
   but wizards and FOMODs will now uncheck the other so WB at least no
   longer produces this weird state.

Threw in some tiny refactorings in belt (yay, two bolt.cmp_'s gone!)

SSS Rework FOMOD GUI

Depends on 190-de-wx-pt1, rewrites most of the GUI to use the wrappers
instead. Drops a whole bunch of wx usages, which is nice. RadioButton
needs wrapping, see all the ugly hacks at the bottom of gui_fomod. Also,
the design that uses __dict__ of wx objects to store group objects has
to go, it's fundamentally hacky and very fragile - e.g. imagine if the
wx guys decided to add __slots__ to their objects.

Also contains a bunch of fixes and misc improvements, e.g. user-facing
strings have been made translatable, some bugs that were carried over
from belt have been fixed, and the 'Back' button no longer works on the
first page.

Note the glaring TODOs - this is a straight up port of the original GUI,
but we currently don't have a way to change fonts, which the original
GUI relied on to differentiate its components. I added some
HBoxedLayouts as an alternative, which works fine for the main FOMOD
dialog and may even be an improvement in terms of visual clarity, but
doesn't help at all with the results screen, which is now an unreadable
mess.

Infernio: Updated for wrapped WizardDialog, gave fomods their own stored
size, updated for default_* -> item_*.

Utumno: fomod_gui: comments to docstrings

Co-authored-by: MrD <the.ubik@gmail.com>

FFF fix FOMOD fileDependency evaluation

Wasn't taking ghosts into account and, more importantly, was passing
strings to the LO API, which expects paths. As a result, every file was
either missing or inactive.

Also went ahead and swapped all usages of bolt.Path for bolt.GPath.

FFF fix FOMOD PNGs

I could swear I commited this to nightly long ago, along with the main
pngcrush work, but it seems to have gotten lost somewhere along the way.
So here's a better version, that refactors the two nearly identical
methods.

FFF FOMOD de-wx & wx4 fixups

FFF Mopy/bash/basher/gui_fomod.py gui.Picture (untested!)

Add string prefixes to fomod

Also wrapped all lines to be below 80 chars, cleaned up newlines and
reformatted docstrings to match the rest of WB.

FFF rewrite for wrapped RadioButton

FFF Rework GUI for block_user API

Use that instead of disabling the checkboxes/radio buttons. Now they
fire hover events and we can show their info in the right pane. Fixes
all those 'informational' choices you get in FOMODs.

FFF Add mass selection links

Very cool feature for managing bigger FOMOD installs :)

FFF Support double-click to open images

Offer a table-based view of the final files

IMO the text-based view of the files we're going to install has always
been really hard to parse - plus now that we no longer have a fixed font
it's gotten even worse. Still, kept the text-based view around (it's
like 10 lines of code) and instead added a checkbox to switch to this
neat new view.

(Can you tell that I'm putting off actually looking into and refactoring
the fomod code yet?)

SSS Classmethods for Installer subclasses FOMods

FFF Include path separators when checking source prefixes

Fixes installers like Lanterns of Skyrim II, which includes the
following sources:

LoS II - TML
LoS II - TML Assets

So when we got a file like 'LoS II - TML Assets/test.esp', we'd end up
matching it to both of those.

---
## [comma/Nebula](https://github.com/comma/Nebula)@[3e760bfcae...](https://github.com/comma/Nebula/commit/3e760bfcae7eca231acaa9cb6f70e0e00d892fd3)
#### Wednesday 2020-04-22 10:51:03 by comma

Networking overhaul

Based and heavily copypasted from Exonet by bitMuse.

Makes networks non-global, makes several things respect network availability.
Networks are based on network device extensions, so any object can be hooked up to the network with not that much code. Subtypes implement special behaviour like being a mainframe or a router.
Routers create a network with their ID, or join existing one. If network's router fails, next connected router picks up the slack. If none left, network is gone.
Mainframes expose disk storage to the network, and can have sevral roles like record storage or software repository. Roles are mostly used as filter for programs and network when looking for files, e.g. only downloader iwll only look for programs on repository servers.
Mainframes and routers can have network ID and passkey pre-mapped via their vars, and will init accordingly. If they're not set, router will generate a random ID and no passkey, and mainframe will try to join whatever passwordless network it can find. Most devices try to join any netowkr they can on spawn too.

Silicons changes:
Silicons now spawn with set of stock_parts needed for computing, and an NTOS extension. Since many programs are now netowkr reliant, it was easier to give silicons full on NTOS ability rather than trying to make it work via silicon subsystems. Think of it as inbuilt PDA. Borgs get some apps pre-installed per module (what they used to get as subsystems)
Silicons now also create crew records. AIs create it after picking name, borgs create it after picking a module. It was needed for manifest generation to handle them without special exceptions.

HUDs:
SecHUD and MedHUD are now network reliant. They won't show status or ID icon for sechud if the HUD device's (borg or glasses) network has no crew records on the target. Glasses' network settings can be changed with a verb.
Sadly since mobs generate their own HUD images, the actual status icons are decided via global hidden record storage, and wouldn't care if different networks had different ones.

Crew manifest:
It's now generated based on crew records available on your device's network.

File browser:
Can now select what are you browsing: HDD, removable disk, or remote server. Can connect to different remove fileservers by picking a network tag. Currently only only pick mainframes with fileserver role enabled.
Added ability to copy between mediums, e.g. HDD->disk or remote->HDD and other combos. Generalized that greatly, by creating datum interfaces for local/network file API and datums for generic transfer tracking.
Removed p2p program in lieu of this.

Programs:
Programs are now stored on the mainframes with software repository role, and downloader app will look for them there. Currently mainframes spawn with an HDD containing all software that was previously available for download.

Antag programs:
Removed DDoS one since can't figure how to make it work with current system.
Since antag programs aren't available for download now, adds a disk containing them to uplink for 5 TCs

Didn't implement some things done in Exonet PR to keep this PR smaller and more review-able:
- Signal simulation. For now just being in connected zlevels with network's router is enough. Speed is fully decided by your network card.
- Access grants system. It's great but can be implemented after since network doesn't really rely on it.
PR feedback commit

Removed ddos define

Did hud || src in glasses net verb

Added net check for reports program

Added comments for net device vars

Removed magical number from network machine setup

Added enforcement of uniqueness for network tags.
Now when device is connecting to the network or trying to change its tag, network will append digits to it until it's unqiue.

Added list of tag -> device
Made routers and mainframes constructable
HUD procs made mob procs
Interactivity checks for network device extension

Added checking for interactivity after inputs
Forgot to add net settings way to holowarrants

Also axed access stuff, unused now
Supermatter monitor now depends on network
Makes some programs not auto-die on network loss

They should handle it gracefully inside, like not showing needed info.

---
## [BlankRip/TheIntrepidHancock](https://github.com/BlankRip/TheIntrepidHancock)@[7248565530...](https://github.com/BlankRip/TheIntrepidHancock/commit/72485655306a7fd73861fd27bec3d5ff9153f20b)
#### Wednesday 2020-04-22 11:07:24 by BlankRip

Organize and start tutorial set-up

* Bring my Scripts to global project space
* Fix the level hierarchy, FUCK YOU ZINEDINE
* Start to build tutorial sequence (Designer is doing jack so I am doing it)    :(

---
## [PPMBallarat/CareviewCalculator](https://github.com/PPMBallarat/CareviewCalculator)@[cc8dc5e152...](https://github.com/PPMBallarat/CareviewCalculator/commit/cc8dc5e152f0c492557d075e8dcd571230c24894)
#### Wednesday 2020-04-22 12:19:26 by StevieTacos

More Input Changes

Yeah... Still trying to figure out my limitations with JS hahaha! Turns out decimal points are bloody hard to isolate in strings so... Yeah, settled for this in the end. It'll do the job for now and we can change later if needed or if a better solution exists aye.

---
## [Chris-plus-alphanumericgibberish/dNAO](https://github.com/Chris-plus-alphanumericgibberish/dNAO)@[f7b9354820...](https://github.com/Chris-plus-alphanumericgibberish/dNAO/commit/f7b93548207fe8bffbfe4767afe4068a1c72d5d3)
#### Wednesday 2020-04-22 12:44:51 by RikerW

add bestial claws

very similar to the beast claw from bloodborne

d10/d8 base damage, uses bare handed combat skill (but is a wielded weapon, so gets no bonuses from gloves or anything like that). without the beast's embrace glyph it's just that with no other special modifiers.

with the beast's embrace glyph (which is generated with a 1/4 chance on every werewolf in the depths, so you've got around a 40% chance to have at least one, it gets pretty big bonuses. the beast claw itself does sneak attacks. it doesn't get any other main hand bonuses. however, if you're wielding nothing in your offhand you can two-weapon (even if you can't two-weapon) to add a pretty great claw attack (which takes the place of your offhand weapon attack).

the claw attack is just AT_CLAW AD_PHYS. the number of dice is <lvl/8+1>, so 1-4, hitting 4 at xp 24. the die size is based off your current insight level. unlike the other two insight-related weapons in the game, you want minimal insight. the die size is (spe + ((60-insight)/20)^2). that comes out to spe + 5 at insight 15, spe+1 at insight 40, and spe+0 for insight 60. it can't go lower than max(spe, 1). as i write this commit message i realize i need to change it to use float division not integer division, so that'll be addressed in the next commit.

at level 30 with 15 insight and +7, the claw will deal 4d11 damage, in addition to the d10/d8 + 7 from the main hand weapon attack. that's pretty good damage i think.

it's worth noting that the claw + sneak attack both requires the glyph to be ACTIVE. insight level is set to 15 for that glyph, so it won't ever trigger if insight<15, just like any of the other glyphs I think. something like that.

bestial claws can be found on any werewolf in the depths. they also now start with a helmet and leather armor/gloves/boots, in a poor approximation of the bloodborne yahar'gul black set that the dudes wielding them wear. to make sure at least one will spawn, one of the 3 random monsters that was placed in alhoon 1's level is a werewolf (it was just a completely random spawn in the des file and didn't look like it mattered much), and the iron golem in the alhoon fort is changed to a werewolf as well (since that predated the alhoon being there I figured it was fine?). there is technically no guaranteed glyph but i figured that was fine - there's no guaranteed rakuyo either.

---
## [dennisreimann/uiengine](https://github.com/dennisreimann/uiengine)@[dfc125d10c...](https://github.com/dennisreimann/uiengine/commit/dfc125d10cc898cc0bc881ed67653bdb8840e282)
#### Wednesday 2020-04-22 13:10:52 by Dennis Reimann

🙈 desperate dependency fixes

Fuck you, ansi-colors!

---
## [brauner/linux](https://github.com/brauner/linux)@[be3dddcfc0...](https://github.com/brauner/linux/commit/be3dddcfc05aaf9b48329f082bf4db6955980a62)
#### Wednesday 2020-04-22 13:41:53 by Christian Brauner

loopfs: implement loopfs

This implements loopfs, a loop device filesystem. It takes inspiration
from the binderfs filesystem I implemented about two years ago and with
which we had overall good experiences so far. Parts of it are also
based on [3] but it's mostly a new, imho cleaner approach.

Loopfs allows to create private loop devices instances to applications
for various use-cases. It covers the use-case that was expressed on-list
and in-person to get programmatic access to private loop devices for
image building in sandboxes. An illustration for this is provided in
[4].

Also loopfs is intended to provide loop devices to privileged and
unprivileged containers which has been a frequent request from various
major tools (Chromium, Kubernetes, LXD, Moby/Docker, systemd). I'm
providing a non-exhaustive list of issues and requests (cf. [5]) around
this feature mainly to illustrate that I'm not making the use-cases up.
Currently none of this can be done safely since handing a loop device
from the host into a container means that the container can see anything
that the host is doing with that loop device and what other containers
are doing with that device too. And (bind-)mounting devtmpfs inside of
containers is not secure at all so also not an option (though sometimes
done out of despair apparently).

The workloads people run in containers are supposed to be indiscernible
from workloads run on the host and the tools inside of the container are
supposed to not be required to be aware that they are running inside a
container apart from containerization tools themselves. This is
especially true when running older distros in containers that did exist
before containers were as ubiquitous as they are today. With loopfs user
can call mount -o loop and in a correctly setup container things work
the same way they would on the host. The filesystem representation
allows us to do this in a very simple way. At container setup, a
container manager can mount a private instance of loopfs somehwere, e.g.
at /dev/loopfs and then bind-mount or symlink /dev/loopfs/loop-control
to /dev/loop-control, pre allocate and symlink the number of standard
devices into their standard location and have a service file or rules in
place that symlink additionally allocated loop devices through losetup
into place as well.
With the new syscall interception logic this is also possible for
unprivileged containers. In these cases when a user calls mount -o loop
<image> <mountpoint> it will be possible to completely setup the loop
device in the container. The final mount syscall is handled through
syscall interception which we already implemented and released in
earlier kernels (see [1] and [2]) and is actively used in production
workloads. The mount is often rewritten to a fuse binary to provide safe
access for unprivileged containers.

Loopfs also allows the creation of hidden/detached dynamic loop devices
and associated mounts which also was a often issued request. With the
old mount api this can be achieved by creating a temporary loopfs and
stashing a file descriptor to the mount point and the loop-control
device and immediately unmounting the loopfs instance.  With the new
mount api a detached mount can be created directly (i.e. a mount not
visible anywhere in the filesystem). New loop devices can then be
allocated and configured. They can be mounted through
/proc/self/<fd>/<nr> with the old mount api or by using the fd directly
with the new mount api. Combined with a mount namespace this allows for
fully auto-cleaned up loop devices on program crash. This ties back to
various use-cases and is illustrated in [4].

The filesystem representation requires the standard boilerplate
filesystem code we know from other tiny filesystems. And all of
the loopfs code is hidden under a config option that defaults to false.
This specifically means, that none of the code even exists when users do
not have any use-case for loopfs.
In addition, the loopfs code does not alter how loop devices behave at
all, i.e. there are no changes to any existing workloads and I've taken
care to ifdef all loopfs specific things out.

Each loopfs mount is a separate instance. As such loop devices created
in one instance are independent of loop devices created in another
instance. This specifically entails that loop devices are only visible
in the loopfs instance they belong to.

The number of loop devices available in loopfs instances are
hierarchically limited through /proc/sys/user/max_loop_devices via the
ucount infrastructure (Thanks to David Rheinsberg for pointing out that
missing piece.). An administrator could e.g. set
echo 3 > /proc/sys/user/max_loop_devices at which point any loopfs
instance mounted by uid x can only create 3 loop devices no matter how
many loopfs instances they mount. This limit applies hierarchically to
all user namespaces.

In addition, loopfs has a "max" mount option which allows to set a limit
on the number of loop devices for a given loopfs instance. This is
mainly to cover use-cases where a single loopfs mount is shared as a
bind-mount between multiple parties that are prevented from creating
other loopfs mounts and is equivalent to the semantics of the binderfs
and devpts "max" mount option.

Note that in __loop_clr_fd() we now need not just check whether bdev is
valid but also whether bdev->bd_disk is valid. This wasn't necessary
before because in order to call LOOP_CLR_FD the loop device would need
to be open and thus bdev->bd_disk was guaranteed to be allocated. For
loopfs loop devices we allow callers to simply unlink them just as we do
for binderfs binder devices and we do also need to account for the case
where a loopfs superblock is shutdown while backing files might still be
associated with some loop devices. In such cases no bd_disk device will
be attached to bdev. This is not in itself noteworthy it's more about
documenting the "why" of the added bdev->bd_disk check for posterity.

[1]: 6a21cc50f0c7 ("seccomp: add a return code to trap to userspace")
[2]: fb3c5386b382 ("seccomp: add SECCOMP_USER_NOTIF_FLAG_CONTINUE")
[3]: https://lore.kernel.org/lkml/1401227936-15698-1-git-send-email-seth.forshee@canonical.com
[4]: https://gist.github.com/brauner/dcaf15e6977cc1bfadfb3965f126c02f
[5]: https://github.com/kubernetes-sigs/kind/issues/1333
     https://github.com/kubernetes-sigs/kind/issues/1248
     https://lists.freedesktop.org/archives/systemd-devel/2017-August/039453.html
     https://chromium.googlesource.com/chromiumos/docs/+/master/containers_and_vms.md#loop-mount
     https://gitlab.com/gitlab-com/support-forum/issues/3732
     https://github.com/moby/moby/issues/27886
     https://twitter.com/_AkihiroSuda_/status/1249664478267854848
     https://serverfault.com/questions/701384/loop-device-in-a-linux-container
     https://discuss.linuxcontainers.org/t/providing-access-to-loop-and-other-devices-in-containers/1352
     https://discuss.concourse-ci.org/t/exposing-dev-loop-devices-in-privileged-mode/813
Cc: Jens Axboe <axboe@kernel.dk>
Cc: Steve Barber <smbarber@google.com>
Cc: Filipe Brandenburger <filbranden@gmail.com>
Cc: Kees Cook <keescook@chromium.org>
Cc: Benjamin Elder <bentheelder@google.com>
Cc: Seth Forshee <seth.forshee@canonical.com>
Cc: Stéphane Graber <stgraber@ubuntu.com>
Cc: Tom Gundersen <teg@jklm.no>
Cc: Serge Hallyn <serge@hallyn.com>
Cc: Tejun Heo <tj@kernel.org>
Cc: Christian Kellner <ckellner@redhat.com>
Cc: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Cc: "David S. Miller" <davem@davemloft.net>
Cc: Dylan Reid <dgreid@google.com>
Cc: David Rheinsberg <david.rheinsberg@gmail.com>
Cc: Akihiro Suda <suda.kyoto@gmail.com>
Cc: Dmitry Vyukov <dvyukov@google.com>
Cc: "Rafael J. Wysocki" <rafael@kernel.org>
Signed-off-by: Christian Brauner <christian.brauner@ubuntu.com>
---
/* v2 */
- David Rheinsberg <david.rheinsberg@gmail.com> /
  Christian Brauner <christian.brauner@ubuntu.com>:
  - Correctly cleanup loop devices that are in-use after the loopfs
    instance has been shut down. This is important for some use-cases
    that David pointed out where they effectively create a loopfs
    instance, allocate devices and drop unnecessary references to it.
- Christian Brauner <christian.brauner@ubuntu.com>:
  - Replace lo_loopfs_i inode member in struct loop_device with a custom
    struct lo_info pointer which is only allocated for loopfs loop
    devices.

---
## [aws/aws-cdk](https://github.com/aws/aws-cdk)@[b1422bf37d...](https://github.com/aws/aws-cdk/commit/b1422bf37dd341fb7d037d706e8ab223ef5aceaf)
#### Wednesday 2020-04-22 14:19:45 by Rico Huijbers

fix(cli): can't bootstrap environment not in app

It used to be that if we had an `--app` argument, we would always glob
arguments to `cdk bootstrap <ENV>` through the environments of stacks
in the app.

This makes it super hard/annoying to run `cdk bootstrap
aws://1234/us-somewhere` in a CI/CD project; you have to add a stack
there first and compile before you're allowed to do that, which is
kinda silly.

Change behavior to only glob environment from the environments in the
app if it looks like the user is supplying a glob (if it contains `*`).

If the user is supplying a concrete environment name, just use it
directly.

Also in this commit:

- refactor: lots of places where we were passing around a pair
  of `(account, region)`. Replace those by passing a `cxapi.Environment`
  instead (most of the changes in this PR).
- refactor: the old and new bootstrapping experience had a lot of
  copy/pasta between them. Refactored to make them share code.
- (prerelease) feat: add a version check to the bootstrapping operation,
  so that users won't accidentally downgrade a bootstrap stack to an older
  version (This happened to 2 devs already, and is an easy mistake to
  make. Protect against it.)

---
## [BenNilsson/Project1](https://github.com/BenNilsson/Project1)@[6738bf43fa...](https://github.com/BenNilsson/Project1/commit/6738bf43fa0b1b87e72b65cef8708608d2d87228)
#### Wednesday 2020-04-22 15:15:19 by Ben

Collision Responses Fixed... FINALLY

Turns out I was using a function the wrong way round, leaving me crying and questioning my life's choices.... I spent 3 hours figuring out why my maths was off, tried to re-write the whole thing but yeah... turns out, you gotta know how to use a function before you use it.... Cool, typo, let's continue

---
## [FRRouting/frr](https://github.com/FRRouting/frr)@[5e0311982a...](https://github.com/FRRouting/frr/commit/5e0311982af37f1fa98883a629c4c17324455d0b)
#### Wednesday 2020-04-22 15:35:55 by Donald Sharp

zebra: Prevent awful misconfiguration in vrf's

Currently the linux kernel allows you to specify the same
table id -> multiple vrf's.  While I am arguing with
the kernel people about proper behavior here let's
just remove this as a possiblity from happening and
mark it a zebra stopable misconfiguration.

(Effectively we are preventing a crash down the line
as that all over FRR we assume it's a unique
mapping not a many to one).

Why fail hard?  Because we hope to get the person
who misconfigured it to actually notice immediately
not hours or days down the line when shit hits the fan.

Signed-off-by: Donald Sharp <sharpd@cumulusnetworks.com>

---
## [vawser/Cinders-DS3](https://github.com/vawser/Cinders-DS3)@[5da36fc7c0...](https://github.com/vawser/Cinders-DS3/commit/5da36fc7c0fe20aae19d56b785f67b2c081bffc2)
#### Wednesday 2020-04-22 16:30:08 by Vawser

Update

- Weakened Solaire's damage in NG a bit.
- Adjusted Solaire so his AI is less annoying. He will enter battles more readily and no longer spams Oath of Sunlight.
- Solaire will now draw enemy aggro naturally, making him more useful in frantic fights.
- Solaire gains an estus flask every 15 seconds, allowing him to heal throughout the course of a level.

# Infusions
- Fire/Dark now get 15% free scaling instead of 30%.

# Map
- Removed 'Yoel V2' as the dummy.
- The Fire Keeper now has 100,000 HP so she can serve as the new dummy.
- Moved Irina back to her old place.
- Moved the Altar of Affliction to where the Dummy used to be.

# Bugfixes
- Added back fogwall to Oceiros arena to prevent the player from leaving during refights.
- Fixed the Curse of Folly description not appearing.

---
## [boomar/chequers](https://github.com/boomar/chequers)@[60a82a710f...](https://github.com/boomar/chequers/commit/60a82a710f3698627ebb8eaf5a3700190895a2a1)
#### Wednesday 2020-04-22 16:37:43 by Dave Miller

Update index.html

PM Johnson walks with his girlfriend through the wild flowers at the Chequers country estate.

An ambulance hurtles past in the distance.

Besutiful music conjuring images of countryisde and flowers, birds singing.

PM blissfully disiniterested/ unconcerned in 1000's of deaths around him, that he still does nothing about.

Cavalier incompetence over the coronavirus outbreak.

He likes his country breaks.

---
## [rsheldiii/KeyV2](https://github.com/rsheldiii/KeyV2)@[555a7874bf...](https://github.com/rsheldiii/KeyV2/commit/555a7874bf979c267f196cf3c1d6c0a1dbbb1a17)
#### Wednesday 2020-04-22 18:12:27 by Bob

add ko-fi link

This has been and will remain a passion project of mine. I've always struggled with donation links for, I hope, the same complicated reasons most people would: is bringing money into a hobby worth it, that hobby's "worthiness" to carry a donation link, whether the link gives off a sense of entitlement, etc etc. All that aside, I've really come to appreciate the support from the community - I love encountering uses of KeyV2 in the wild, any PR requests submitted, and some people have said such nice things. Donations for open source projects has a storied history, in my opinion all the more normalized by the recent trend of Twitch subscriptions / patreon / etc. Far be it from me to let my awkwardness stop someone from supporting this project in that way - besides, we're at a point where that money could easily be put back into the project via purchases of keys or switches to implement, or bounties.

So yeah, those are my thoughts on this. Donations are very welcome and super appreciated, and completely voluntary and optional.

---
## [buzzcut-s/EAS](https://github.com/buzzcut-s/EAS)@[92600f7578...](https://github.com/buzzcut-s/EAS/commit/92600f75788d6c9f7ae64bf1c8f4dbcdef2f9778)
#### Wednesday 2020-04-22 18:27:18 by Linus Torvalds

mm: remove unused variable in memory hotplug

When I removed the per-zone bitlock hashed waitqueues in commit
9dcb8b685fc3 ("mm: remove per-zone hashtable of bitlock waitqueues"), I
removed all the magic hotplug memory initialization of said waitqueues
too.

But when I actually _tested_ the resulting build, I stupidly assumed
that "allmodconfig" would enable memory hotplug.  And it doesn't,
because it enables KASAN instead, which then disables hotplug memory
support.

As a result, my build test of the per-zone waitqueues was totally
broken, and I didn't notice that the compiler warns about the now unused
iterator variable 'i'.

I guess I should be happy that that seems to be the worst breakage from
my clearly horribly failed test coverage.

Reported-by: Stephen Rothwell <sfr@canb.auug.org.au>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
Signed-off-by: celtare21 <celtare21@gmail.com>

---
## [vpznc/figma-spotlight](https://github.com/vpznc/figma-spotlight)@[e4173e0fcb...](https://github.com/vpznc/figma-spotlight/commit/e4173e0fcb8325a05bf8967f2cd424f20fe10fb0)
#### Wednesday 2020-04-22 21:41:05 by Vlad

forgot to remove the css file that I didn't managed to connect to the project. Going to bed since my eyes are bleeding. Gonna solve this fucking mystery tomorrow morning…

---
## [MoOx/reason-react](https://github.com/MoOx/reason-react)@[81da4590ca...](https://github.com/MoOx/reason-react/commit/81da4590ca050385bbf517a46d028a2b5993e7e9)
#### Wednesday 2020-04-22 21:54:55 by Cheng Lou

Optimize ReasonReactRouter url comparison

cc @nikgraf @rickyvetter

As much as possible, we try not to drag in runtime in ReasonReact (and the current RR's `React.re` is runtime-free, apart from a few empty module outputs). This is not just to give a very comfortable and reliable guarantee of "zero-cost perf", but also to ensure there's no semantic mismatch between React.js and ReasonReact. As seen with... well, most codebases, any helper that inserts itself into two layers potentially breaks things, and old versions of RR certainly had bugs regarding discrepancies vs React.js. The relatively new hook-based version can guarantee "zero interop bug", which is something extremely nice to rely on whenever we can.

This is just a tangent though; but yeah, no runtime is great for many reasons. In this particular diff, the generic object comparison was added in 9147410fb0ee296950b8d79e9cd59eb392a7ee50. This isn't great:
- The generic comparison is theoretically wrong because it doesn't properly handle some of JS' corner-cases (imagine someone puts a `Symbol` on an object, etc.): https://github.com/BuckleScript/bucklescript/blob/80297bbb138f5e0d69c7fed74c5b6043391b2505/lib/js/caml_obj.js#L305
- The above code, because of its genericity, is also extremely slow, since it introspects into some runtime types, allocates (in a comparison!...), is not tail-recursive (https://github.com/BuckleScript/bucklescript/blob/80297bbb138f5e0d69c7fed74c5b6043391b2505/lib/js/caml_obj.js#L385).
- It's even worse because in the router, we just want "not equal". If you check the JS output of the diff, you'll see that it's calling `caml_notequal`, which is literally `!caml_notequal`. So we do a full check for deep _equality_ first, _then_ negate it, instead of bailing early in 95% of the cases.
- This is especially bad because ReasonReact is a base library.

So we hand-roll our own `urlNotEqual` comparison:
- It only needs to handle our `url` record. Super lean, and easily and verifiably 100% correct, unlike the generic version.
- The fastest checks possible, with even better readability because it's not generic. See the new JS output; no runtime introspection, no allocation, tail recursive.
- Even better, bails early by checking the other fields first.
- Removes the need for dragging in `caml_obj` (Instagram, and I'm sure some other high-profile highly constrained use-cases, has some informal "be a good citizen" rule regarding introducing new infra; i.e. "don't take over everything, don't be a burden, etc". The Reason community should definitely follow this mantra more, and more so than other FP communities. Don't forcefully shove Reason where you can cause resentments from unrelated teams).

This restores the Router to be mostly allocation-free (edit: except now I see that a rather bad and allocation-heavy implementation of `useUrl` went in... cc @rickyvetter). We can confidently say "this is the fastest and leanest Router for React, not to mention that it actually fulfills more feature requirements of a router than alternatives thanks to our non-opinionated pattern matching on the URL and letting you do the rest (also keep in mind also that OCaml pattern matching doesn't allocate).

Btw, don't get attached to this particular diff's elegant implementation. Generally speaking, we should prefer array over list. It's just that for our Router, list really is a better representation, for once.

Lastly, this diff is one of the reasons why I'm uneasy with all the `deriving` or other codegen for creating equality comparisons. Once you dumbly generate those, you naturally reach for the slowest possible equal comparison (see all the points above), and since most folks don't look at the generated JS, that comparison's cost is entirely hidden now. That's no way to teach performance and correctness.

===

It's hard to write up what "quality" means for Reason libraries, but I'd like this diff to be an example of it. People naively think "quality" means "elegance" and "less visible code", but that's just "cleanness", like how disorganizingly stuffing your clothes into a corner still makes a clean room but doesn't make it easier to find a clothe back. For Reason, I'd like us to mentally inline all the code, pretend they're all visible to you, _then_ evaluate the quality. This has the consequence that we get more careful about dragging in dependencies, that we don't pretend abstracting into a function means the cost is zero now (refer to my recent Reason conf talk), and that we go beyond the superficial polish into deeper polish.

---

# [<](2020-04-21.md) 2020-04-22 [>](2020-04-23.md)

