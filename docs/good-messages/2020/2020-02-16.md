# [<](2020-02-15.md) 2020-02-16 [>](2020-02-17.md)

1,515,554 events, 859,041 push events, 1,200,952 commit messages, 67,097,625 characters


## [takaswie/sound@6aee4badd8...](https://github.com/takaswie/sound/commit/6aee4badd8126f3a2b6d31c5e2db2439d316374f)
##### 2020-02-16 00:45:19 by Linus Torvalds

Merge branch 'work.openat2' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/vfs

Pull openat2 support from Al Viro:
 "This is the openat2() series from Aleksa Sarai.

  I'm afraid that the rest of namei stuff will have to wait - it got
  zero review the last time I'd posted #work.namei, and there had been a
  leak in the posted series I'd caught only last weekend. I was going to
  repost it on Monday, but the window opened and the odds of getting any
  review during that... Oh, well.

  Anyway, openat2 part should be ready; that _did_ get sane amount of
  review and public testing, so here it comes"

From Aleksa's description of the series:
 "For a very long time, extending openat(2) with new features has been
  incredibly frustrating. This stems from the fact that openat(2) is
  possibly the most famous counter-example to the mantra "don't silently
  accept garbage from userspace" -- it doesn't check whether unknown
  flags are present[1].

  This means that (generally) the addition of new flags to openat(2) has
  been fraught with backwards-compatibility issues (O_TMPFILE has to be
  defined as __O_TMPFILE|O_DIRECTORY|[O_RDWR or O_WRONLY] to ensure old
  kernels gave errors, since it's insecure to silently ignore the
  flag[2]). All new security-related flags therefore have a tough road
  to being added to openat(2).

  Furthermore, the need for some sort of control over VFS's path
  resolution (to avoid malicious paths resulting in inadvertent
  breakouts) has been a very long-standing desire of many userspace
  applications.

  This patchset is a revival of Al Viro's old AT_NO_JUMPS[3] patchset
  (which was a variant of David Drysdale's O_BENEATH patchset[4] which
  was a spin-off of the Capsicum project[5]) with a few additions and
  changes made based on the previous discussion within [6] as well as
  others I felt were useful.

  In line with the conclusions of the original discussion of
  AT_NO_JUMPS, the flag has been split up into separate flags. However,
  instead of being an openat(2) flag it is provided through a new
  syscall openat2(2) which provides several other improvements to the
  openat(2) interface (see the patch description for more details). The
  following new LOOKUP_* flags are added:

  LOOKUP_NO_XDEV:

     Blocks all mountpoint crossings (upwards, downwards, or through
     absolute links). Absolute pathnames alone in openat(2) do not
     trigger this. Magic-link traversal which implies a vfsmount jump is
     also blocked (though magic-link jumps on the same vfsmount are
     permitted).

  LOOKUP_NO_MAGICLINKS:

     Blocks resolution through /proc/$pid/fd-style links. This is done
     by blocking the usage of nd_jump_link() during resolution in a
     filesystem. The term "magic-links" is used to match with the only
     reference to these links in Documentation/, but I'm happy to change
     the name.

     It should be noted that this is different to the scope of
     ~LOOKUP_FOLLOW in that it applies to all path components. However,
     you can do openat2(NO_FOLLOW|NO_MAGICLINKS) on a magic-link and it
     will *not* fail (assuming that no parent component was a
     magic-link), and you will have an fd for the magic-link.

     In order to correctly detect magic-links, the introduction of a new
     LOOKUP_MAGICLINK_JUMPED state flag was required.

  LOOKUP_BENEATH:

     Disallows escapes to outside the starting dirfd's
     tree, using techniques such as ".." or absolute links. Absolute
     paths in openat(2) are also disallowed.

     Conceptually this flag is to ensure you "stay below" a certain
     point in the filesystem tree -- but this requires some additional
     to protect against various races that would allow escape using
     "..".

     Currently LOOKUP_BENEATH implies LOOKUP_NO_MAGICLINKS, because it
     can trivially beam you around the filesystem (breaking the
     protection). In future, there might be similar safety checks done
     as in LOOKUP_IN_ROOT, but that requires more discussion.

  In addition, two new flags are added that expand on the above ideas:

  LOOKUP_NO_SYMLINKS:

     Does what it says on the tin. No symlink resolution is allowed at
     all, including magic-links. Just as with LOOKUP_NO_MAGICLINKS this
     can still be used with NOFOLLOW to open an fd for the symlink as
     long as no parent path had a symlink component.

  LOOKUP_IN_ROOT:

     This is an extension of LOOKUP_BENEATH that, rather than blocking
     attempts to move past the root, forces all such movements to be
     scoped to the starting point. This provides chroot(2)-like
     protection but without the cost of a chroot(2) for each filesystem
     operation, as well as being safe against race attacks that
     chroot(2) is not.

     If a race is detected (as with LOOKUP_BENEATH) then an error is
     generated, and similar to LOOKUP_BENEATH it is not permitted to
     cross magic-links with LOOKUP_IN_ROOT.

     The primary need for this is from container runtimes, which
     currently need to do symlink scoping in userspace[7] when opening
     paths in a potentially malicious container.

     There is a long list of CVEs that could have bene mitigated by
     having RESOLVE_THIS_ROOT (such as CVE-2017-1002101,
     CVE-2017-1002102, CVE-2018-15664, and CVE-2019-5736, just to name a
     few).

  In order to make all of the above more usable, I'm working on
  libpathrs[8] which is a C-friendly library for safe path resolution.
  It features a userspace-emulated backend if the kernel doesn't support
  openat2(2). Hopefully we can get userspace to switch to using it, and
  thus get openat2(2) support for free once it's ready.

  Future work would include implementing things like
  RESOLVE_NO_AUTOMOUNT and possibly a RESOLVE_NO_REMOTE (to allow
  programs to be sure they don't hit DoSes though stale NFS handles)"

* 'work.openat2' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/vfs:
  Documentation: path-lookup: include new LOOKUP flags
  selftests: add openat2(2) selftests
  open: introduce openat2(2) syscall
  namei: LOOKUP_{IN_ROOT,BENEATH}: permit limited ".." resolution
  namei: LOOKUP_IN_ROOT: chroot-like scoped resolution
  namei: LOOKUP_BENEATH: O_BENEATH-like scoped resolution
  namei: LOOKUP_NO_XDEV: block mountpoint crossing
  namei: LOOKUP_NO_MAGICLINKS: block magic-link resolution
  namei: LOOKUP_NO_SYMLINKS: block symlink resolution
  namei: allow set_root() to produce errors
  namei: allow nd_jump_link() to produce errors
  nsfs: clean-up ns_get_path() signature to return int
  namei: only return -ECHILD from follow_dotdot_rcu()

---
## [mpv-player/mpv@0b35b4c917...](https://github.com/mpv-player/mpv/commit/0b35b4c91796fb020e13d955efd450021eb5eedb)
##### 2020-02-16 01:07:44 by wm4

sub: make filter_sdh a "proper" filter, allow runtime changes

Until now, filter_sdh was simply a function that was called by sd_ass
directly (if enabled).

I want to add another filter, so it's time to turn this into a somewhat
more general subtitle filtering infrastructure.

I pondered whether to reuse the audio/video filtering stuff - but better
not. Also, since subtitles are horrible and tend to refuse proper
abstraction, it's still messed into sd_ass, instead of working on the
dec_sub.c level. Actually mpv used to have subtitle "filters" and even
made subtitle converters part of it, but it was fairly horrible, so
don't do that again.

In addition, make runtime changes possible. Since this was supposed to
be a quick hack, I just decided to put all subtitle filter options into
a separate option group (=> simpler change notification), to manually
push the change through the playloop (like it was sort of before for OSD
options), and to recreate the sub filter chain completely in every
change. Should be good enough.

One strangeness is that due to prefetching and such, most subtitle
packets (or those some time ahead) are actually done filtering when we
change, so the user still needs to manually seek to actually refresh
everything. And since subtitle data is usually cached in ASS_Track (for
other terrible but user-friendly reasons), we also must clear the
subtitle data, but of course only on seek, since otherwise all subtitles
would just disappear. What a fucking mess, but such is life. We could
trigger a "refresh seek" to make this more automatic, but I don't feel
like it currently.

This is slightly inefficient (lots of allocations and copying), but I
decided that it doesn't matter. Could matter slightly for crazy ASS
subtitles that render with thousands of events.

Not very well tested. Still seems to work, but I didn't have many test
cases.

---
## [mjatkin/System-V@a2bee953a3...](https://github.com/mjatkin/System-V/commit/a2bee953a33a8f95cda1d1a78ad95ac25fde77d1)
##### 2020-02-16 04:08:35 by Jesse Buhagiar

Kernel: Switch to Kernel mode during IRQ

IRQs are now handled in SVC/Kernel mode instead of IRQ mode. This
has the benefit of not having to worry about any fucking stupid
banked register bullshit, as well as allowing us to use the current
kernel stack for the currently running task.

---
## [Citadel-Station-13/Citadel-Station-13@c95bb9f8db...](https://github.com/Citadel-Station-13/Citadel-Station-13/commit/c95bb9f8dbc08463d90e43796b6ab92d9dc75e2a)
##### 2020-02-16 06:31:33 by Seris02

FUCK SHIT I'M NAKED IS THIS A DREAM OR REAL FUCK FUCK WHERE ARE MY CLOTHES hallucination (#10857)

* FUCK SHIT I'M NAKED IS THIS A DREAM OR REAL FUCK FUCK WHERE ARE MY CLOTHES????

* fix

* no more getflaticon dabdabdabdabdabdabdab

* tada

---
## [TJSLZLKJFZYXGSLIUZILI/-@f13d0d4e1b...](https://github.com/TJSLZLKJFZYXGSLIUZILI/-/commit/f13d0d4e1bc3c37e8c177e01320e29b476224c69)
##### 2020-02-16 09:11:02 by TJSLZLKJFZYXGS LIUZILI

刘自力

Tianjin Liu Zili Technology Development Co., Ltd., the original ecosystem cloud service system of the global Internet portal. Inheriting the past and opening up the network of human civilization to pursue the dream of world cultural links with development!!! Extend your hand here are all friends, we are free, equal, fraternal, happy, inclusive, understanding, responsibility, obligation. We depend on each other lazily, work hand in hand, win-win cooperation, find the job you like, the way you learn, the life you want. My life orientation. We shoulder the sacred responsibility entrusted to us by human history to promote the development of another human civilization!!

Computer network technology, computer software and hardware technology development, transfer, consulting services; computer system integration; software development; advertising design, production, publication, agency; corporate image planning; etiquette celebration planning; building materials, decoration materials, hardware power delivery, daily department stores sales; self-operated and agent goods Import and Export of Technology; Construction and Installation Engineering; Landscape Greening Engineering; Hydropower Engineering; Labor Service. (Projects that must be approved according to law and approved by relevant departments before they can carry out business activities.) Tianjin Liu Zili Science and Technology Development Co., Ltd., the original ecosystem cloud service system of the global Internet portal, carries forward the past and opens up the network of human civilization to pursue the dream of world cultural links and develop together!! Our success will promote the development of another human civilization, blue sky, white clouds, green space, clear water. Birds are singing and flowers are fragrant, flowers blossom and schools of thought contend, and everything needs to be done. Form a global integrated intelligent ecological chain. Our future is not a dream!! Efforts, dear friends, we hand in hand, shoulder in hand, work together to look forward to the future!!
 
l20@z1.onmicrosoft.com,good.zili19@yandex.com,
liu11 <liu11@zili38.partner.onmschina.cn>;lzl11382019 <lzl11382019@outlook.com>;liu zili <liu@zili.onmicrosoft.com>;刘自力 <liu1967@bk.ru>;zili-67 <zili-67@mail.ru>;刘自力 <zili.liu2015@yandex.com>;刘自力 <15822158762@163.com>;刘自力 <liuzili5588@qun.mail.163.com>;刘自力 <liuzili762@outlook.com>;刘自力 <lzlliuzili@foxmail.com>;刘自力 <liuzili20185118@Outlook.com>;刘自力 <liu.czili@yandex.ru>;刘自力 <zili2018@vip.163.com>;刘自力 <zililiuws@foxmail.com>;刘自力 <zililiu1967@outlook.com>;13820160486 <13820160486@163.com>
                https://wordpress.com/home/tjslzl.wordpress.com,                                                                                                                              中国 China。
刘自力Zili Liu，120107196710095118，                                                                                                                                                户口地址:天津市滨海新区车站北路莱茵春天48栋2门201号，                                                                                                           TianjinBhxqczbllyct48d2m201h，邮政编码：300451，                                                                                                                         天津市刘自力科技发展有限公司TJSLZLKJFZYXGS，                                                                                                                                     公司注册地址:天津市滨海新区胡家园工贸园区科技创新中心A区8号                                                                                                            ，TianjinBhxqhjygmyqkjcxzxAq8h，邮政编码：300450，                                                                                                                           税务ID：91120116MA069NA327，                                                                                                                                                       公司账号:中国建设银行天津广州道支行，                                                                                                                                                银行地址:天津市滨海新区福建北路15号，
银行行号：105110039444，                                                                                                                                                                天津市刘自力科技发展有限公司TJSLZLKJFZYXGS，            公司账户；12050167045200000274，                                                                                                                                                  电子邮箱：liu11@zili38.partner.onmschina.cn,lzl11382019@outlook.com,                                                                                              办公室邮箱：liu@zili.onmicrosoft.com,                                                                                                                                                  宝贝paypal邮箱：2815151945@qq.com,                                                                                                                                              公司电话：18522744200，                                                                                                                                                                 私人电话：15822158762，                                                                                                                                                                   移动电话：13129385921，                                                                                                                                                                其他电话：17627659286,13370413515,13502114639.17802215781,18182194354

---
## [mrakgr/The-Spiral-Language@3d4c0a376a...](https://github.com/mrakgr/The-Spiral-Language/commit/3d4c0a376ad806a5ce2dcd9e76fcbe80f67fd845)
##### 2020-02-16 10:06:57 by Marko Grdinić

"8:50am. I am up. I think I have a cold, but it is nothing serious.

Let me do some morning chilling and then I will go through the other two LSP examples.

https://boards.4channel.org/sci/thread/11387295

I am amazed that there is an optimization thread on /sci/.

9:25am. Ok, enough slacking. I want to take a look at the last two examples. I'll think of what comes next after that.

9:40am. Focus me, focus.

https://github.com/Microsoft/vscode-extension-samples/tree/master/lsp-log-streaming-sample

9:45am. Ok, now I have a problem that the example does not run.

```
"languageServerExample.trace.server": {
  "format": "json",
  "verbosity": "verbose"
},
```

Also where am I supposed to add this setting? Let me check out the JSON files.

```
    "languageServerExample.trace.server": {
     "scope": "window",
     "type": "object",
```

There is this is `package.json`. So maybe it wants me to overwrite it?

9:50am. Well, forget his thing for now. Let me report it in the issue. After that I'll take a look at the code itself.

https://www.w3schools.com/js/js_operators.asp

```
 hasConfigurationCapability =
  !!capabilities.workspace && !!capabilities.workspace.configuration;
```

Hmmm...I thought that !! would be the not operator or something like that, but...

Wait, `&&` is definitely `and` based on the table. Does that mean that `!!` is `not not`? What the hell?

https://stackoverflow.com/questions/784929/what-is-the-not-not-operator-in-javascript

10:25am.

```
while ((m = pattern.exec(text)) && problems < settings.maxNumberOfProblems) {
```

How does `m = pattern.exec(text)` work. I am going to assume that it returns `m` after doing assignment which is evaled as `true` if it is not `null`.

10:35am. Done with the example. Let me move to the last one. Then I will start thinking about the next phase.

10:40am. Focus me, focus.

10:55am. The last example is particularly simple as it does nothing in particular.

With that let me stop here for a bit.

In summary, I am really disgusted what a waste of time the past week was and how inefficiently I am going through this. My Pharo experience was much better than this. It is making me realize how helpful being able to trace through the system really is. This is garbage.

At any rate, that is what I am going to do next.

All this effort of the past week was just there so I can get some basic familiarity with the system, so that I do not freeze like a deer in headlights when the fight starts.

11:05am. Ok...

From here on out the plan is simple...go through that LSP example and trace through it. Then do that exercise for some real plugin.

Then start work on my own.

Once I have the scaffolding down, I can resume work on Spiral. I really am grateful that I am going to have to master only LSP, and not the whole system. That will make this whole affair much eaiser."

---
## [newstools/2020-the-guardian-uk@9bf79cfe62...](https://github.com/newstools/2020-the-guardian-uk/commit/9bf79cfe62405bc7858ee011b0ddf384de8c64b1)
##### 2020-02-16 11:28:19 by NewsTools

Created Text For URL [www.theguardian.com/tv-and-radio/2020/feb/16/caroline-flack-boyfriend-lewis-burton-heartbroken-by-her-death-love-island]

---
## [mpv-player/mpv@7d11eda72e...](https://github.com/mpv-player/mpv/commit/7d11eda72e90d7aa9df25127bd810aa7b191029c)
##### 2020-02-16 14:15:20 by wm4

Remove remains of Libav compatibility

Libav seems rather dead: no release for 2 years, no new git commits in
master for almost a year (with one exception ~6 months ago). From what I
can tell, some developers resigned themselves to the horrifying idea to
post patches to ffmpeg-devel instead, while the rest of the developers
went on to greener pastures.

Libav was a better project than FFmpeg. Unfortunately, FFmpeg won,
because it managed to keep the name and website. Libav was pushed more
and more into obscurity: while there was initially a big push for Libav,
FFmpeg just remained "in place" and visible for most people. FFmpeg was
slowly draining all manpower and energy from Libav. A big part of this
was that FFmpeg stole code from Libav (regular merges of the entire
Libav git tree), making it some sort of Frankenstein mirror of Libav,
think decaying zombie with additional legs ("features") nailed to it.
"Stealing" surely is the wrong word; I'm just aping the language that
some of the FFmpeg members used to use. All that is in the past now, I'm
probably the only person left who is annoyed by this, and with this
commit I'm putting this decade long problem finally to an end. I just
thought I'd express my annoyance about this fucking shitshow one last
time.

The most intrusive change in this commit is the resample filter, which
originally used libavresample. Since the FFmpeg developer refused to
enable libavresample by default for drama reasons, and the API was
slightly different, so the filter used some big preprocessor mess to
make it compatible to libswresample. All that falls away now. The
simplification to the build system is also significant.

---
## [mrakgr/The-Spiral-Language@df341db4d6...](https://github.com/mrakgr/The-Spiral-Language/commit/df341db4d67283387ffa32ecca79327a8adf89d3)
##### 2020-02-16 17:56:12 by Marko Grdinić

"12:20pm. The latest seasons of Railgun and Index are worlds apart in quality. Railgun is actually pretty good.

Done with breakfast. Let me do the chores and then I will start.

1:05pm. Let me finally start. I am dying here.

I want this to just be done already.

1:10pm. For some reason `lsp-sample` is not running now. Ah, for fuck's sake.

1:15pm. Resetting does nothing. Let me try building manually.

```
> Executing task: npm run watch <

> lsp-sample@1.0.0 watch e:\Typescript\vscode-extension-samples\lsp-sample
> tsc -b -w
```

Ah, I get it. It is freezing during the build.

1:30pm. "`fsp-sample` worked for me yesterday, but it does not today. I thought there was something wrong with the project, but now it seems like this is some VS Code specific bug.

Can I get some feedback on this please? I am specifically interested in doing a VS Code plugin for [my own language](https://github.com/mrakgr/The-Spiral-Language/tree/v0.2) and I do not have time to forever wait for this to be resolved. I've gone through all the samples to study the code and I want to start on this. I need to start tracing through the system in order to properly get a grasp on it, and I can hardly do that if the thing won't even run."

No I won't complain just yet. Let me just copy the files into a separate template.

1:45pm. Let me ask on SO, if it is possible for me myself to resolve this by tracing.

1:55pm. I need to find out how to trace. I am going to report this Extension Host launch failure on the main issue page.

Agh, let me do as they ask and I'll try Insiders version.

2pm. The Insiders version works. Nonetheless, I want to understand why this is happening.

...Oh, it works with extensions disabled as well. Let me disable all of them.

2:05pm. When I disable them manually it also works.

2:10pm. I disabled them only for the workspace.

2:15pm. The status bar example does not run even with the extensions disabled.

The insiders version runs it properly though.

2:20pm. Yeah, the nightly version does it properly. I can't get the regular VS Code to work.

"I want to create a VS Code plugin for [my own language](https://github.com/mrakgr/The-Spiral-Language/tree/v0.2), but I am running into [a nasty bug]() where various sample extensions will seemingly arbitrarily refuse to run. At first I thought there was something wrong with the samples, but seeing as the sample that worked for me yesterday now fails today, I now think this is a VS Code specific issue.

What is really annoying here is that the Extension Host instance will outright refuse to run, so placing breakpoints has no effect.

Last year I had a good debugging experience with Pharo where I could trace through the entire system and fix bugs that I otherwise could not. Since I need to trace through the LSP samples in order to get a grasp on them anyway, I am wondering if there is a way to start the trace from the very beginning - once I press the start button."

Let me back up this here in case I change my mind about asking. I am going to open an issue on the main repo for this.

2:35pm. I've opened issue 90781 on the main repo and closed the other one. Since the `statusbar-sample` works with the Insiders version, this has probably already been fixed in the dev version.

But since I am at it, let me ask the question about tracing.

2:40pm. No forget that. Let me just start this thing. These debugging issues have eaten enough time from my life.

2:45pm. Let me aright my mind.

2:55pm. Agh, damn. The breakpoints on the server are not getting hit. Maybe that is no strange given that it is launched as a separate process.

Let me check out that other example. I think there was something about debugging the server.

3:05pm. https://code.visualstudio.com/api/language-extensions/language-server-extension-guide

Focus me. Let me read this again. Unless I focus this is literally going to take months.

"Since the server is started by the LanguageClient running in the extension (client), we need to attach a debugger to the running server. To do so, switch to the Debug view and select the launch configuration Attach to Server and press F5. This will attach the debugger to the server."

3:20pm. I finally figured out how to debug the server. This is really testing my will like nothing else. But I need to follow the plan and go through this once. After that I will take a break.

3:35pm. Ok, break time. I got one thing out of the way. I still haven't debugged traced through the though, but one thing at a time.

4pm. I want to chill a bit more.

4:05pm. It is nowhere at the rate that I want, but I got the debugger to work for the LSP sample, and got all the samples to work. That is an accomplishment in itself. So far, I am really underwhelmed by TS. There was a guy who praised it, but now that I am seeing it in action I honestly never want to do webdev if I can help it. I guess I should not have expected much of a JS wrapper language.

Still, I'd much rather have it than raw JS.

4:20pm. Let me resume.

1.5 hours more of this, I can do it. Let me make a pass through the client and then I will take a look at the...

https://github.com/Microsoft/vscode-extension-samples/tree/master/lsp-log-streaming-sample

...log streaming example. Let me just say that I am a little bothered that I can only insert breakpoints in the middle. For some reason it fails at startup....

Let me look into this a bit more.

4:35pm. Ok, another short break.

4:45pm. Done with tracing through the client.

This is really, really complex. Way beyond my ability to grasp it just by looking at it. I would have a lot easier time if I had a webdev background, but I'll have to make do with what I have.

Now comes the log streaming example.

4:50pm. After that, what I am going to do is take the F# plugin, or maybe the C# one. Or anything really and study them.

I am going to tear them down and build them up again until I understand them from top to bottom.

These examples are crap. At the same time they are both too complex, and not detailed enough.

4:55pm. For once in my life, I am going to have to mutate what exists until I know enough to do it on my own.

Now, let me do the log streaming example. I want to get this thing out of the way today. I am certainly sick of it by this point.

```
    "languageServerExample.trace.server": {
     "scope": "window",
     "type": "object",
     "description": "Traces the communication between VS Code and the language server.",
     "properties": {
      "verbosity": {
       "type": "string",
       "description": "Controls the verbosity of the trace.",
       "enum": [
        "off",
        "message",
        "verbose"
       ],
       "default": "off"
      },
      "format": {
       "type": "string",
       "description": "Controls the output format of the trace.",
       "enum": [
        "text",
        "json"
       ],
       "default": "text"
      }
     }
                }
```

I think I have to add the two fields in the readme.

```
    "format": "json",
    "verbosity": "verbose"
```

Let me give this a shot.

5:10pm. I can't figure it out. There is a bunch of crap in the logs, but it is not from today. And I do not know how to clear that.

5:20pm. Seriously fuck. This is such bullshit.

The debugger itself is useless for getting me through the system unlike Pharo. These things are supposed to be communicating using JSON, but I am yet to see a single example of that.

And the log streaming does not work for whatever reason.

5:20pm. This is not going well, but I at least got the examples to run.

Let me stop here for a bit. I need to move to the next stage even though I've only accomplished a third of what I wanted in this one.

5:25pm. But hell if I feel like doing anything else right now. If I was a rational actor I'd keep going without end, but...

5:30pm. https://css-tricks.com/what-i-learned-by-building-my-own-vs-code-extension/

Let me read this.

```
Trivia! Even though TypeScript is an independent programming language with many popular uses including the Angular (2+) framework, VS Code is the sister project with the most impact on the language. Being developed in TypeScript as a TypeScript editor, VS Code has a strong symbiotic relationship with TypeScript. The best way to learn the language is by looking at the source code of Visual Studio Code.
```

Hmmmm...really?

Well, indeed, actually knowing how VS Code works would make things a lot easier.

Maybe I should give it a try?

5:45pm. https://github.com/microsoft/vscode

Ah, let me clone it and I will check out how large it is at least. No doubt it will be a few 100k LOC or something crazy like that.

5% of it is 9mb. Yikes.

Like hell will I be able to go through 180mb of code.

...Now it is not even 20% and it is at 80mb. If anything that figure was an underestimate.

5:50pm. Ok, I will give this a shot since I started it. I am curios of what the size of VS Code really is, but at 840k objects, VS Code is definitely into runaway evolution tier. It is large enough that I can treat it as a black box system that can only be understood through interaction.

The most annoying stuff is how all the plugin examples just assume a webdev background. This so annoying.

It is going to be close to 400mb total at this rate by the the time it finishes.

```
Receiving objects: 100% (842752/842752), 256.67 MiB | 501.00 KiB/s, done.
Resolving deltas: 100% (595479/595479), done.
Updating files: 100% (4292/4292), done.
```

I guess I was wrong.

Well, let me see what I can find in that repo.

5:55pm. Ok, the core of it is like 53mb only. What makes most of the size is the ginormous .git folder.

6:10pm. https://github.com/microsoft/vscode/wiki/How-to-Contribute#debugging

There is stuff here on debugging VS Code itself.

Let me try building the thing.

```
Tip! Open VS Code on the folder where you have cloned the vscode repository and press CMD+SHIFT+B (CTRL+SHIFT+B on Windows, Linux) to start the builder. To view the build output open the Output stream by pressing CMD+SHIFT+U.
```

There are a bunch of of ways of doing the build, but the easiest one seems to be this.

6:45pm. Done with lunch. Before I left, I tried getting it to build, but no matter what I try it seems to be missing some `gulp` tool.

Er, maybe I should have just gotten the package and installed it globally via `npm`. Right now I just ran `yarn install` in the vscode folder.

6:50pm. Let me just commit here. I'll leave trying the build for tomorrow.

I guess programming is really an adventure. I just can't do this fast even though I want to. Going fast requires familiarity.

No matter how much I try, I cannot violate the basic laws of cognition or computation with just my will.

6:55pm. I am going to crush this eventually."

---
## [cysk003/mpv@be0878e121...](https://github.com/cysk003/mpv/commit/be0878e12102394c278457e5e8a8317d552862e7)
##### 2020-02-16 19:49:33 by wm4

demux: fix backward demuxing freeze if first packet is not a keyframe

Some files don't start with keyframe packets. Normally, this is not
sane, but the sample file which triggered this was a cut TV capture
transport stream. And this shouldn't happen anyway.

Introduce a further heuristic: if the last seek target was before the
start of the cached data, and the start of the cache is marked as BOF
(beginning of file), then we won't find anything better. This is
possibly a bit shaky, because both seek_start and back_seek_pos weren't
made for this purpose. But I can't come up with situations where this
would actually break. (Leave this to shitty broken files I hit later.)

I also considered finding the first packet in the cache that is marked
as keyframe, i.e. the first actual seek target, and comparing it to
"first", but I didn't like it much. Well whatever.

It's a bit silly that this caused a hard freeze (and similar issues
still will). The problem is that the demuxer holds the lock and has no
reason to release it. And in general, there's a single lock for the
entire demuxer cache. Finer grained locking would probably not make much
sense. In theory status of available data and maybe certain commands to
the demuxer could be moved to separate locks, but it would raise
complexity, and you'd probably still need to get the central lock in
some cases, which would deadlock you anyway.

It would still be nice if some minor corner case in the wonderfully
terrible and complex backward demuxer state machine couldn't lock up the
player. As a hack, unlock and then immediately lock again. Depending on
the OS mutex implementation, this may give other waiters a chance to
grab the lock. This is not a guarantee (some OSes may for example not
wake up other waiters until the next time slice or something), but works
well on Linux.

---
## [cornell-dti/samwise@cd76015446...](https://github.com/cornell-dti/samwise/commit/cd76015446b9080f44c90f6920fe00ffe8c72453)
##### 2020-02-16 20:50:11 by Sam Zhou

Use `active` prop to decide whether to override state with props `in TaskEditor` (#417)

This is a partial attempt to make the TaskEditor more manageable, with some of the spirit in #351.

It still does not completely solve the problem of focus state getting lost while the DOM get nuked, but we can observe that the same problem also exists in the `FloatingTaskEditor` in the future view. Historically, `FloatingTaskEditor` breaks much less often than `InlineTaskEditor`, so I think the current approach is not complete nonsense. If we think about it carefully, we will find that the major difference between `FloatingTaskEditor` and `InlineEditor` is that `FloatingTaskEditor` is guaranteed to be active when the component got rendered, while the same is not true for `InlineTaskEditor`. This creates a problem where `FloatingTaskEditor` does not need to care about state getting overridden by props, but `InlineTaskEditor` does. In the past, there is some code written to hack around the problem for `InlineTaskEditor`, which makes it avoid an override when the state matches the props. This code has to be in the common `TaskEditor` to that code reuse can happen.

However, the above solution is still not satisfactory, because the common code is trying to solve a problem that is experienced by one of its user. This diff attempts to remove this entangled logic by introducing the `active` prop. With the active prop, the `TaskEditor` can know explicitly whether it's only used for rendering or for editing. Then the code of avoiding overriding state with props in reducer can start to make sense, because it now starts to depend on the value `active`.

While implementing the above approach, I found that we already have a property called `newSubTaskDisabled` and it's used essentially like `!active`, so I just replaced it with `active`. This is why you see all this diff does is changing the name of a prop and passing it to reducer.

Another interesting observation while I'm working on this: it looks like that majority of the complexity of `TaskEditor` comes from the state management of the name of the main task and a list of subtasks, and `active` actually only applies to the names of the tasks. We could refactor the code for these logic from `TaskEditor` into a smaller helper component in the future.

---

# [<](2020-02-15.md) 2020-02-16 [>](2020-02-17.md)

