# [<](2020-02-24.md) 2020-02-25 [>](2020-02-26.md)

2,398,738 events, 1,108,269 push events, 1,799,556 commit messages, 139,581,542 characters


## [expo/expo@c596d6cd40...](https://github.com/expo/expo/commit/c596d6cd40320ed4d28c8c12621c36b4038b814e)
##### 2020-02-25 01:50:34 by Tomasz Sapeta

[android][home] ðŸ¤– Add DevMenu on Android (#6829)

# Why

Fixes #6521 

# How

- Created unversioned `DevMenuManager` class which mostly just delegates calls to versioned `DevMenuModule` modules specific for SDK version. These modules are responsible for providing initial props, dev menu options and actions to run when these options are selected. The manager creates a new `ReactRootView` that bases on kernel's (home's) React instance manager and starts `HomeMenu` app which is registered as a second entry point in `home` and then, manager adds this root view to the currently used activity (it must implement `ExperienceActivity`). As I needed to know which experience activity is the current one, I've added `sCurrentActivity` static member to that class and just track it using activity's lifecycle methods.
- Backported `DevMenuModule` to all SDK versions included in the client. Including some changes between them - for example hot and fast reloading.
- Added support for back button and Android's menu press (which can be simulated by `adb shell input keyevent 82`).
- Removed some unused code related to `Nux` and replaced it with new onboarding screen (see #6793).
- Created new `ShakeDetector` which works more like on iOS. The one provided by React Native is annoying in most cases as it actually requires two shakes.
- Updated `ReactAndroidCodeTransformer` to turn off showing React Native dev menu in non-standalone apps.
- **To do after merging:** Rebuild versioned expoviews.

# Test Plan

- [x] Test on experience in debug mode
- [x] Test on experience in production mode
- [x] Test on snacks
- [x] Test on older SDKs
- [x] Test on simulators
- [x] Test that onboarding shows up once you open the experience for the first time or you didn't accept it yet (clicked `Got it` button).
- [x] Test that using dev menu still works once we kill home's activity.

---
## [mrakgr/The-Spiral-Language@ac9676570d...](https://github.com/mrakgr/The-Spiral-Language/commit/ac9676570d4d0eca392527e965306428b33a3146)
##### 2020-02-25 10:19:00 by Marko GrdiniÄ‡

"9:05am. I've been up for 10m. Let me chill for a while and then today I will do this for real. Essential TS is definitely the book I am looking for. Then come HTML/CSS. Then I will figure out the ASP.NET examples. Then comes making that server. It is a simple plan, but it will take me at least a few weeks to go through.

9:45am. Enough wasting time. Let me get on with the book. I'll skim the first chapter as it is relatively simple, but I will give the rest a try.

```
let hatPrice = 100;
console.log(`Hat price: ${hatPrice}`);
let bootsPrice = "100";
console.log(`Boots price: ${bootsPrice}`);

function sumPrices(first, second, third) {
    return first + second + third;
    }
let totalPrice = sumPrices(hatPrice, bootsPrice);
console.log(`Total Price: ${totalPrice}`);
```

Uf, I did not think JS would not throw an error even for an invalid number of arguments.

```
let sumPrices = (...numbers) =>
    numbers.reduce((total, val) =>
        total + (Number.isNaN(Number(val)) ? 0 : Number(val)));
```

Oh, I haven't notice before that the return is not needed here.

...Well, it is not Spiral's indentation sensitive syntax. It only allows for one expression here.

10:40am. I think it is pretty cool how nodaemon just reruns the file on each save. This is something I'd kill for in Spiral.

Despite its reputation, I really do have a lot to gain for immersing myself into webdev.

11am. Uh, what the hell. I am way too distract with that HN thread. Let me finish the damn chapter.

11:10am. https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode

Interesting.

11:15am. 91/551. Ok, this book is much more palatable than the previous one as I expected. Hopefully I'll be able to learn something of use by the end of it.

Let me take a break here."

---
## [roonil-wazlib/FlatOrganiser@11aef67141...](https://github.com/roonil-wazlib/FlatOrganiser/commit/11aef67141713945e0d95239f19fc512e0b13346)
##### 2020-02-25 11:26:07 by roonil-wazlib

Really shitty, half broken, barely readable, not remotely functional recycler view implemented for dinner plan activity. Days of the week don't even appear in order for Christ's sake. This is why you're not supposed to code at 2am in the god damn morning. Go tf to sleep.

---
## [mrakgr/The-Spiral-Language@5238e661a6...](https://github.com/mrakgr/The-Spiral-Language/commit/5238e661a6c75f8845a6f51b803e02162d5586fb)
##### 2020-02-25 14:31:12 by Marko GrdiniÄ‡

"12:20pm. Done with breakfast. Next comes chores. After that I will put a dent in this book. I want to get through the JS stuff today. Part two I will just skim unless the examples turn out to be really applied. Part 3 is where the meat of the book will lie.

12:35pm. Done with chores. Let me start.

Unusual that I am doing this so soon. But now that I have a hook, I feel that I am more motivated.

Let's get this thing going.

1:10pm. 97/551.

This part is so annoying. Having to deal with learning inheritance hierarchies. Honestly, I am tempted to just leave this for later.

I want to rant a bit, but I'll leave that for much later. Let me just focus on getting through part 1 of the book first.

1:15pm. The code on this page is stupidly convoluted and I am not that interested in learning it.

1:25pm.

```
let Product = function(name, price) {
    this.name = name;
    this.price = price;
    }

Product.prototype.toString = function() {
    return `toString: Name: ${this.name}, Price: ${this.price}`;
    }

console.log(`prot: ${Object.toString()}`);
```

Ugh, I hadn't learned anything. I don't even want to learn this shit.

Should `Product.prototype` be `Object`? And then shouldn't this mutate it?

1:40pm.

```
class Product {
    constructor(name, price) {
        this.name = name;
        this.price = price;
        }
    toString() {
        return `toString: Name: ${this.name}, Price: ${this.price}`;
        }
    }

function createProductIterator() {
    const hat = new Product("Hat", 100);
    const boots = new Product("Boots", 100);
    const umbrella = new Product("Umbrella", 23);
    let lastVal;
    return {
        next() {
            switch (lastVal) {
                case undefined:
                    lastVal = hat;
                    return { value: hat, done: false };
                case hat:
                    lastVal = boots;
                    return { value: boots, done: false };
                case boots:
                    lastVal = umbrella;
                    return { value: umbrella, done: false };
                case umbrella:
                    return { value: undefined, done: true };
                }
            }
        }
    }

let iterator = createProductIterator();
let result = iterator.next();
while (!result.done) {
    console.log(result.value.toString());
    result = iterator.next();
    }
```

JS pretty much took all the worst aspects of C and modern OO languages and smushed it together in one big pile of shit. There is really a case to be made that C causes brain damage. Agh, why couldn't SML have become the dominant PL of the modern era?

```
function* createProductIterator() {
    yield new Product("Hat", 100);
    yield new Product("Boots", 100);
    yield new Product("Umbrella", 23);
    }
[...createProductIterator()].forEach(p => console.log(p.toString()));
```

This is much nicer, but generators are one thing completely subsumed by monadic computation. Well, I'll keep this pattern in mind.

The same goes for async/await. I always look askance at language features that are completely subsumed by more general ones.

Still, I can understand why one would do things this way.

Monadic computation are hard to do without the type system holding your hand.

2pm. 108/551. This is so boring. I've already started surfing the ML sub on the side. Let me take a short break. How much longer till the chapter is over?

2:05pm. 10 more pages. Then I am done with the JS primer. So I might as well bear with it.

After that comes the TS stuff. I should be able to go through that quickly.

Ok, let me focus hard for 10 more pages and then I'll take a break. After that I'll start skimming the stuff that I've already been through so many times.

2:15pm. https://github.com/WebAssembly/gc

Oh, there are proposals to add GC to WebAssembly. GC is the most important single feature I would need to Spiral top level targets to have. At the top level it really does need GC to allocate arrays, closures and recursive union types.

Still, this is just a proposal so I do not need to hurry here.

```
E:\Typescript\essential-ts\primer\index.js:1
import calcTax from "./tax";
^^^^^^

SyntaxError: Cannot use import statement outside a module
```

Why is this happening?

2:35pm. I get this same error even in the sample code. What the hell?

I am looking at SO answers and it seems for browsers I need to specify that I am compiling a module. I am guessing the same goes for JS.

https://stackoverflow.com/questions/58384179/syntaxerror-cannot-use-import-statement-outside-a-module

"At the time of writing, Node.js only provides support for standard modules as an experimental feature. To work around this limitation, stop the nodemon process you started in Listing 4-2 and use the command prompt to run the command shown in Listing 4-23 in the primer folder. This command installs a package called esm that provides support for working with modules."

Ah, whops, I should have read the book more carefully.

Also there is a very recent update to that question.

"2020 Update (Node 13.2.0+)
Verify that you have the latest version of Node installed. The --experimental-modules flag is no longer necessary. Simply do one of the following:

Add "type": "module" to the nearest parent package.json. With this, all .js and .mjs files are interpreted as ES modules. You can interpret individual files as CommonJS by using the .cjs extension.
OR

Explicitly name files with the .mjs extension. All other files, such as .js will be interpreted as CommonJS, which is the default if type is not defined in package.json."

2:45pm. Hmmm, I surprised I have a lower node version number than the above given how recently I've installed it.

I guess I'll just get the latest nodejs rather than mess with experimental packages.

```
E:\Typescript\essential-ts\primer>node --experimental-modules index.js
(node:12472) ExperimentalWarning: The ESM module loader is experimental.
```

With this it works, but it complains that JS modules are experimental.

Let me just get the latest node rather than installing packages to get this functionality.

3pm. Damn it, even with the latest everything installed I still get that annoying experimental warning.

3:05pm. I am looking around and it does not seem there is any way to disable the warning without disabling all of them. Forget this for now.

...Maybe I should have just gotten the esm package after all. What the hell.

3:20pm. Well, at any rate I am done with the chapter and am taking a short breather here. The next chapter is on the TS compiler specifically, so I am going to go through it top to bottom.

3:30pm. Let me chill for a while longer."

---
## [mrakgr/The-Spiral-Language@bb624422ef...](https://github.com/mrakgr/The-Spiral-Language/commit/bb624422ef1a549496fede6a5d4119c7ed5b9880)
##### 2020-02-25 17:23:17 by Marko GrdiniÄ‡

"3:50pm. Let me resume.

I want to get through that chapter.

4pm. https://www.npmjs.com/package/tsc-watch

This thing is interesting.

4:30pm.

```
{
  "name": "tools",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "start": "tsc-watch --onSuccess \"node dist/index.js\"",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC"
}
```

As expected, having somebody explain to me how to make good use of the command line tools is really highly beneficial. Somehow, I feel like I am getting a lot out of this chapter.

In particular, having command line tools like these would really have made my Spiral life easier back in 2018.

I am definitely going to develop them for v0.2.

4:55pm.

```
import {sum} from "./calc"
```

Ah, I can't believe this is still fucking with me. I thought the TS compiler would take care of it, but it seems I was wrong. Should I install `esm` after all?

Even with raw .js modules the thing is too stupid to import them without an explicit file suffix. This is unlike in the book.

```
import {sum} from "./calc.js"
```

Actually this works. The TS compiler is smart enough to ignore the .js suffix.

5pm. Since I am doing it my own way, the generated import code is quite different from the example in the book.

```
Object.defineProperty(exports, "__esModule", { value: true });
var calc_1 = require("./calc");
```

This is what the book says, but my own generated code is exactly what I wrote it. I guess I'll just append .js where needed.

5:10pm.

```
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
```

I am trying the CommonJs module system, but here it is saying that exports is not defined.

...Ah, whatever. It is not like this is a big deal. I'll deal with it later if I need to.

Let me move on. Probably the issue is `"type" : "module"` in the `package.json` file.

5:15pm. 142/551. Finally done with chapter 5.

Somehow I was really into that one despite it being all about compilation options. But knowing how to compile a project is important, so if there is a time to pay attention, that time is here.

5:20pm. Taking a little breather. Let me start the next chapter which is on debugging TS code.

5:25pm. "Code editors that have good TypeScript support, such as Visual Studio Code, allow breakpoints to be added to code files. My experience with this feature has been mixed, and I have found them unreliable, which is why I rely on the less elegant but more predictable debugger JavaScript keyword."

Yeah, debuggers can be like this.

```
Installing C# dependencies...
Platform: win32, x86_64

Downloading package 'OmniSharp for Windows (.NET 4.6 / x64)' (32544 KB).....
```

Why did this happen immediately after I clicked `Add Configuration`? This has to be related to me trying out those plugins a while ago. I terminated their downloads a while ago and the thing is resuming now...

I have no idea. I guess I'll just have to wait for this thing to finish downloading.

5:30pm. Let me slack then. Damn, sudden downloads really kill the mood.

5:35pm. Ok, the thing finally finished. Let me continue. I still have a bit more steam left in me.

```
{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "type": "node",
            "request": "launch",
            "name": "Launch Program",
            "skipFiles": [
                "<node_internals>/**"
            ],
            "program": "${workspaceFolder}\\index.js",
            "preLaunchTask": "tsc: build - tsconfig.json",
            "outFiles": [
                "${workspaceFolder}/dist/**/*.js"
            ]
        }
    ]
}
```

I can't believe I actually understand this shit now.

There are some differences from the book though.

```
"program": "${workspaceFolder}/dist/index.js"
```

Oh, just as the book says, I did have to change it to this. Otherwise I get an exception.

Really, the book is great. This is just the handholding I need. Without this, I would not have the courage to fiddle with configuration files.

5:45pm. Had no idea about the debug console. As expected, I am getting quite a bit out of this.

146/551. Ok, 10 more pages and then I will be done with the chapter and call it a day.

5:55pm. 148/551. This is quite useful. I had no idea one could debug like this.

6:10pm. 153/551. I am just going to skim the unit testing stuff rather than try it.

6:15pm. 155/551. This watching of file for changes is quite cool. I'll definitely be able to make do with this in Spiral.

6:20pm. 158/551. Done with part one. Finally onto part two. I'll leave that for tomorrow. It should not take me more than a few hours to get through it in its entirety as I am familiar with with all of it by this point."

---
## [DankMemer/Octave@2934223e47...](https://github.com/DankMemer/Octave/commit/2934223e477627ff4cc87c2ff50fc9501e345537)
##### 2020-02-25 19:37:00 by kodehawa

holy fucking shit i had to regex parse the fucking files because they were invalid json to begin with and hell to parse if the json was even valid to start with so fuck it and holy shit using json to parse urls ends up on some 500 fucking line extravaganza i wanna die and i have to study now so fuck this i already did it can you all enjoy it ok good

---
## [newstools/2020-the-guardian-uk@8e76425a1c...](https://github.com/newstools/2020-the-guardian-uk/commit/8e76425a1cb4c6ea81cde19799ca229b3952614b)
##### 2020-02-25 20:32:11 by NewsTools

Created Text For URL [www.theguardian.com/lifeandstyle/2020/feb/25/sex-with-my-boyfriend-is-consistently-mediocre]

---

# [<](2020-02-24.md) 2020-02-25 [>](2020-02-26.md)

