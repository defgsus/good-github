# [<](2020-12-08.md) 2020-12-09 [>](2020-12-10.md)

3,004,372 events, 1,544,068 push events, 2,414,267 commit messages, 180,136,963 characters


## [yuneta/c-core](https://github.com/yuneta/c-core)@[b1a86fe34d...](https://github.com/yuneta/c-core/commit/b1a86fe34d7282cd822c14e84a60d85aa1d91c13)
#### Wednesday 2020-12-09 00:04:55 by Niyamaka

remove timer from c_node, because in deactivate_snap does gobj_stop/gobj_start and the LIBUV handlers don't close well. Fuck you libuv

---
## [bagagemd/finalProject](https://github.com/bagagemd/finalProject)@[31d6385f0b...](https://github.com/bagagemd/finalProject/commit/31d6385f0bfb1ce57745b6fe5d6d1e4913e14829)
#### Wednesday 2020-12-09 01:27:57 by Derek Bagagem

Merge pull request #1 from bagagemd/test

i hate my life 2

---
## [binex-dsk/passmanpp](https://github.com/binex-dsk/passmanpp)@[b91b3a7311...](https://github.com/binex-dsk/passmanpp/commit/b91b3a73117a8cf2b036112519b19f4307018c1b)
#### Wednesday 2020-12-09 04:10:22 by binex-dsk

BEEG BEEG UPDATE THINGY IDK HOW TO SUMMARIZE

yeah title anyways
HERES WHAT I DID
- ADDED NEW OPTIONS! replaced sha-256 with sha-512 and added Serpent and SHACAL2
- SWITCHED TO CMAKE!!!!!!!
- Qt 6 conformity changes
- updated the header a LOT
  - changed magic number to just be "PD++"
  - removed group separators
  - made things 0-indexed
  - extended the flexibility of the hashing functions, allows for more encryption to be used
  - standardized GCM/EAX
  - keyfile is now 0/1
  - added a bunch more docs and stuff
  - names and descriptions are null-terminated now
  - IV uses the default nonce length of the encryptor for getting its length

- removed a LOT of unused functions

- merged FileHandler and stringutil into "extra"
- moved a lot of functions around
- reorganized includes, yet again
- fixed parsing, now just reads straight to the database's... data
- removed filehandler
- removed manager, merged itno main
- added a new command line option, where if your second arg is "new", you can type a db path to use
- fixed database renaming
- fixed entry list updating
- fixed saving
- fixed iv reading errors
- fixed some windowing errors
- fixed database name errors
- fixed statement list handling
- fixed entry interaction
- added significantly more error handling

known issues:
- databases don't unlock properly
Could fix this easily but I've been doing this all day long. so i want to upload my progress, plus i have to study for exams tomorrow soooooooooooooo yea

AIGHT, my next plans are to finish this stuff, then try out some EASCII
probably will end up just adding some random new thing instead lol
after that, I'll try and begin working on the full GUI. thats gonna take a while
might instead do user-input attributes first
anyways, WHEnt he

---
## [H1M4N5HU0P/MAFIA-USERBOT](https://github.com/H1M4N5HU0P/MAFIA-USERBOT)@[a119255028...](https://github.com/H1M4N5HU0P/MAFIA-USERBOT/commit/a119255028c4f0b2dc4ccd5acf27836c78ff361d)
#### Wednesday 2020-12-09 05:15:45 by H1M4N5HU0P

# Copyright (C) 2019 The Raphielscape Company LLC. # # Licensed under the Raphielscape Public License, Version 1.b (the "License"); # you may not use this file except in compliance with the License. # #  """ Userbot module for having some fun with people. """  import asyncio import random import re import time from userbot import ALIVE_NAME  from collections import deque  import requests  from telethon.tl.functions.users import GetFullUserRequest from telethon.tl.types import MessageEntityMentionName  from cowpy import cow  from userbot import CMD_HELP,YOUTUBE_API_KEY from userbot.utils import register,admin_cmd  # ================= CONSTANT ================= RENDISTR = [     "`I Know Uh ez Rendi Bhay Dont show Your Randi Pesa Here`",     "`Jag Suna suna laage Sab #maderchod bhay`",     "`you talking behind meh wew uh iz my fan now bhay`",     "`Wanna pass in Life Goto BRAZZER.CAM BHAY`",     "`Uh iz Pro i iz noob your boob is landi uh are Randi`",     "`Sellers Nasa calling Uh bhay😆`",     "`Badwoo ki yojna behan bna ke ch*da uh iz badwa its your yozja?`",     "`CHAND PE CHADA HAI CHANDYAAN KA GHODA TERA NAAM HAI MANSUR TU HAI BEHAN KA LOD*😂`",     "`Jab se dil lga baithe tanhai me maa chu*da baithe wo kho gyi kisi aur ke pyar hum apne hi jaato me aag lga baithe`",     "`Chadii ke ander se lal pani kha se ata hai ky teri masuka ka bhosda bhi paan khata hai😂`",     "`Sun bhosdi ke By anonyCrew MOHABBAT KE SIWA AUR BHI GAM HAI JAMANE ME BSDK GAND PAHAT JATI HAI PAISA KAMANE ME`",     "`Thaan liya tha Sayri nhi krege Unka pichwada dekha Alfaaz nikal gye`",     "`Ravivaar ko dekha Chand Ka Tukra Itna Baar Dekha par Jaath na Ukra`",     "`Katal kro Tir se Talwar me Ky Rkkha hai Maal Chodo Sari Me Salwar me Ky Rkkha hai`", ] NOOBSTR = [     "`YOU PRO NIMBA DONT MESS WIDH MEH`",     "`Haha yes`",     "`NOOB NIMBA TRYING TO BE FAMOUS KEK`",     "`Sometimes one middle finger isn’t enough to let someone know how you feel. That’s why you have two hands`",     "`Some Nimbas need to open their small minds instead of their big mouths`",     "`UH DONT KNOW MEH SO STAY AWAY LAWDE`",     "`Kysa kysaaaa haaan? Phir MAAR nhi Khayega tu?`",     "`Zikr Jinka hota hai galiyo meh woh bhosdika ajj paya gya naliyo me`", ] ZALG_LIST = [["̖",               " ̗",               " ̘",               " ̙",               " ̜",               " ̝",               " ̞",               " ̟",               " ̠",               " ̤",               " ̥",               " ̦",               " ̩",               " ̪",               " ̫",               " ̬",               " ̭",               " ̮",               " ̯",               " ̰",               " ̱",               " ̲",               " ̳",               " ̹",               " ̺",               " ̻",               " ̼",               " ͅ",               " ͇",               " ͈",               " ͉",               " ͍",               " ͎",               " ͓",               " ͔",               " ͕",               " ͖",               " ͙",               " ͚",               " ",               ],              [" ̍",               " ̎",               " ̄",               " ̅",               " ̿",               " ̑",               " ̆",               " ̐",               " ͒",               " ͗",               " ͑",               " ̇",               " ̈",               " ̊",               " ͂",               " ̓",               " ̈́",               " ͊",               " ͋",               " ͌",               " ̃",               " ̂",               " ̌",               " ͐",               " ́",               " ̋",               " ̏",               " ̽",               " ̉",               " ͣ",               " ͤ",               " ͥ",               " ͦ",               " ͧ",               " ͨ",               " ͩ",               " ͪ",               " ͫ",               " ͬ",               " ͭ",               " ͮ",               " ͯ",               " ̾",               " ͛",               " ͆",               " ̚",               ],              [" ̕",               " ̛",               " ̀",               " ́",               " ͘",               " ̡",               " ̢",               " ̧",               " ̨",               " ̴",               " ̵",               " ̶",               " ͜",               " ͝",               " ͞",               " ͟",               " ͠",               " ͢",               " ̸",               " ̷",               " ͡",               ]]   EMOJIS = [     "😂",     "😂",     "👌",     "✌",     "💞",     "👍",     "👌",     "💯",     "🎶",     "👀",     "😂",     "👓",     "👏",     "👐",     "🍕",     "💥",     "🍴",     "💦",     "💦",     "🍑",     "🍆",     "😩",     "😏",     "👉👌",     "👀",     "👅",     "😩",     "🚰", ]  INSULT_STRINGS = [      "`Owww ... Such a stupid idiot.`",     "`Don't drink and type.`",     "`Command not found. Just like your brain.`",     "`Bot rule 420 section 69 prevents me from replying to stupid nubfuks like you.`",     "`Sorry, we do not sell brains.`",     "`Believe me you are not normal.`",     "`I bet your brain feels as good as new, seeing that you never use it.`",     "`If I wanted to kill myself I'd climb your ego and jump to your IQ.`",     "`You didn't evolve from apes, they evolved from you.`",     "`What language are you speaking? Cause it sounds like bullshit.`",     "`You are proof that evolution CAN go in reverse.`",     "`I would ask you how old you are but I know you can't count that high.`",     "`As an outsider, what do you think of the human race?`",     "`Ordinarily people live and learn. You just live.`",     "`Keep talking, someday you'll say something intelligent!.......(I doubt it though)`",     "`Everyone has the right to be stupid but you are abusing the privilege.`",     "`I'm sorry I hurt your feelings when I called you stupid. I thought you already knew that.`",     "`You should try tasting cyanide.`",     "`You should try sleeping forever.`",     "`Sharam kar bsdwale,kitni bkchodi deta.`",     "`Chup Madarhox, bilkul chup..`",     "`Me zindagi me chunotiyo se jyda inn jese Chutiyo se pareshaan hu.`",     "`Pick up a gun and shoot yourself.`",     "`Try bathing with Hydrochloric Acid instead of water.`",     "`Go Green! Stop inhaling Oxygen.`",     "`God was searching for you. You should leave to meet him.`",     "`You should Volunteer for target in an firing range.`",     "`Try playing catch and throw with RDX its fun.`",     "`Jaana chodu chad jake land chaat`",     "`Yaar ajab tere nkhare,gazab tera style hain, gand dhone ki tameez nahi, haath main mobile hai`",     "`People like you are the reason we have middle fingers.`",     "`When your mom dropped you off at the school, she got a ticket for littering.`",     "`You’re so ugly that when you cry, the tears roll down the back of your head…just to avoid your face.`",     "`If you’re talking behind my back then you’re in a perfect position to kiss my a**!.`", ]  UWUS = [     "(・`ω´・)",     ";;w;;",     "owo",     "UwU",     ">w<",     "^w^",     r"\(^o\) (/o^)/",     "( ^ _ ^)∠☆",     "(ô_ô)",     "~:o",     ";-;",     "(*^*)",     "(>_",     "(♥_♥)",     "*(^O^)*",     "((+_+))", ]  FACEREACTS = [     "ʘ‿ʘ",     "ヾ(-_- )ゞ",     "(っ˘ڡ˘ς)",     "(´ж｀ς)",     "( ಠ ʖ̯ ಠ)",     "(° ͜ʖ͡°)╭∩╮",     "(ᵟຶ︵ ᵟຶ)",     "(งツ)ว",     "ʚ(•｀",     "(っ▀¯▀)つ",     "(◠﹏◠)",     "( ͡ಠ ʖ̯ ͡ಠ)",     "( ఠ ͟ʖ ఠ)",     "(∩｀-´)⊃━☆ﾟ.*･｡ﾟ",     "(⊃｡•́‿•̀｡)⊃",     "(._.)",     "{•̃_•̃}",     "(ᵔᴥᵔ)",     "♨_♨",     "⥀.⥀",     "ح˚௰˚づ ",     "(҂◡_◡)",     "ƪ(ړײ)‎ƪ​​",     "(っ•́｡•́)♪♬",     "◖ᵔᴥᵔ◗ ♪ ♫ ",     "(☞ﾟヮﾟ)☞",     "[¬º-°]¬",     "(Ծ‸ Ծ)",     "(•̀ᴗ•́)و ̑̑",     "ヾ(´〇`)ﾉ♪♪♪",     "(ง'̀-'́)ง",     "ლ(•́•́ლ)",     "ʕ •́؈•̀ ₎",     "♪♪ ヽ(ˇ∀ˇ )ゞ",     "щ（ﾟДﾟщ）",     "( ˇ෴ˇ )",     "눈_눈",     "(๑•́ ₃ •̀๑) ",     "( ˘ ³˘)♥ ",     "ԅ(≖‿≖ԅ)",     "♥‿♥",     "◔_◔",     "⁽⁽ଘ( ˊᵕˋ )ଓ⁾⁾",     "乁( ◔ ౪◔)「      ┑(￣Д ￣)┍",     "( ఠൠఠ )ﾉ",     "٩(๏_๏)۶",     "┌(ㆆ㉨ㆆ)ʃ",     "ఠ_ఠ",     "(づ｡◕‿‿◕｡)づ",     "(ノಠ ∩ಠ)ノ彡( \\o°o)\\",     "“ヽ(´▽｀)ノ”",     "༼ ༎ຶ ෴ ༎ຶ༽",     "｡ﾟ( ﾟஇ‸இﾟ)ﾟ｡",     "(づ￣ ³￣)づ",     "(⊙.☉)7",     "ᕕ( ᐛ )ᕗ",     "t(-_-t)",     "(ಥ⌣ಥ)",     "ヽ༼ ಠ益ಠ ༽ﾉ",     "༼∵༽ ༼⍨༽ ༼⍢༽ ༼⍤༽",     "ミ●﹏☉ミ",     "(⊙_◎)",     "¿ⓧ_ⓧﮌ",     "ಠ_ಠ",     "(´･_･`)",     "ᕦ(ò_óˇ)ᕤ",     "⊙﹏⊙",     "(╯°□°）╯︵ ┻━┻",     r"¯\_(⊙︿⊙)_/¯",     "٩◔̯◔۶",     "°‿‿°",     "ᕙ(⇀‸↼‶)ᕗ",     "⊂(◉‿◉)つ",     "V•ᴥ•V",     "q(❂‿❂)p",     "ಥ_ಥ",     "ฅ^•ﻌ•^ฅ",     "ಥ﹏ಥ",     "（ ^_^）o自自o（^_^ ）",     "ಠ‿ಠ",     "ヽ(´▽`)/",     "ᵒᴥᵒ#",     "( ͡° ͜ʖ ͡°)",     "┬─┬﻿ ノ( ゜-゜ノ)",     "ヽ(´ー｀)ノ",     "☜(⌒▽⌒)☞",     "ε=ε=ε=┌(;*´Д`)ﾉ",     "(╬ ಠ益ಠ)",     "┬─┬⃰͡ (ᵔᵕᵔ͜ )",     "┻━┻ ︵ヽ(`Д´)ﾉ︵﻿ ┻━┻",     r"¯\_(ツ)_/¯",     "ʕᵔᴥᵔʔ",     "(`･ω･´)",     "ʕ•ᴥ•ʔ",     "ლ(｀ー´ლ)",     "ʕʘ̅͜ʘ̅ʔ",     "（　ﾟДﾟ）",     r"¯\(°_o)/¯",     "(｡◕‿◕｡)", ]  RUNSREACTS = [     "`Runs to Thanos`",     "`Runs far, far away from earth`",     "`Running faster than supercomputer, cuzwhynot`",     "`Runs to SunnyLeone`",     "Where do you think you're going?",     "Huh? what? did they get away?",     "ZZzzZZzz... Huh? what? oh, just them again, nevermind.",     "Get back here!",     "Not so fast...",     "Look out for the wall!",     "Don't leave me alone with them!!",     "You run, you die.",     "Jokes on you, I'm everywhere",     "You're gonna regret that...",     "You could also try /kickme, I hear that's fun.",     "Go bother someone else, no-one here cares.",     "You can run, but you can't hide.",     "Is that all you've got?",     "I'm behind you...",     "You've got company!",     "We can do this the easy way, or the hard way.",     "You just don't get it, do you?",     "Yeah, you better run!",     "Please, remind me how much I care?",     "I'd run faster if I were you.",     "That's definitely the droid we're looking for.",     "May the odds be ever in your favour.",     "Famous last words.",     "And they disappeared forever, never to be seen again.",     "\"Oh, look at me! I'm so cool, I can run from a bot!\" - this person",     "Yeah yeah, just tap /kickme already.",     "Here, take this ring and head to Mordor while you're at it.",     "Legend has it, they're still running...",     "Unlike Harry Potter, your parents can't protect you from me.",     "Fear leads to anger. Anger leads to hate. Hate leads to suffering. If you keep running in fear, you might "     "be the next Vader.",     "Multiple calculations later, I have decided my interest in your shenanigans is exactly 0.",     "Legend has it, they're still running.",     "Keep it up, not sure we want you here anyway.",     "You're a wiza- Oh. Wait. You're not Harry, keep moving.",     "NO RUNNING IN THE HALLWAYS!",     "Hasta la vista, baby.",     "Who let the dogs out?",     "It's funny, because no one cares.",     "Ah, what a waste. I liked that one.",     "Frankly, my dear, I don't give a damn.",     "My milkshake brings all the boys to yard... So run faster!",     "You can't HANDLE the truth!",     "A long time ago, in a galaxy far far away... Someone would've cared about that. Not anymore though.",     "Hey, look at them! They're running from the inevitable banhammer... Cute.",     "Han shot first. So will I.",     "What are you running after, a white rabbit?",     "As The Doctor would say... RUN!",     "`Running a marathon...there's an app for that.`", ]  RAPE_STRINGS = [      "`Rape Done Drink The Cum`",      "`EK baat yaad rkhio, Chut ka Chakkar matlab maut se takkar`",      "`The user has been successfully raped`",      "`Dekho Bhaiyya esa hai! Izzat bachailo apni warna Gaand maar lenge tumhari`",      "`Relax your Rear, ders nothing to fear,The Rape train is finally here`",      "`Rape coming... Raped! haha 😆`",      "`Kitni baar Rape krvyega mujhse?`",      "`Tu Randi hai Sabko pta hai😂`",      "`Don't rape too much bossdk, else problem....`",      "`Tu sasti rendi hai Sabko pta hai😂`",      "`Lodu Andha hai kya Yaha tera rape ho raha hai aur tu abhi tak yahi gaand mara raha hai lulz`", ]  ABUSE_STRINGS = [ 	   "`Chutiya he rah jaye ga`", 	   "`Kya Phooka Tha Kal?`", 	   "`Abe Bhang mar ke aya hei kya ?`", 	   "`Tum Ek baat Batao Roj RandiPa Karte Ho Uska Koi Fayeda hei?`",        "`Jaa Jake Bartan Manj Bakchodi mat kar`",        "`Lund Choos Le {DEFAULTUSER} Ka Bhosdk `",        "`Phir A Gya Tu Bhosdk Chut Si Sakal Ka`",        "`Randi Kahike Lund Pasad Hei to Choss Le {DEFAULTUSER} Ka", ] GEY_STRINGS = [      "`you gey bsdk`",      "`you gey`",      "`you gey in the house`",      "`you chakka`",      "`Bhago BC! Chakka aya`",      "`you gey gey gey gey gey gey gey gey`",      "`you gey go away`", ] PRO_STRINGS = [      "`This gey is pro as phack.`",      "`Proness Lebel: 6969696969`",      "`Itna pro banda dekhlia bc, ab to marna hoga.`",      "`U iz pro but i iz ur DAD, KeK`",      "`NOOB NIMBA TRYING TO BE FAMOUS KEK`",      "`Sometimes one middle finger isnâ€™t enough to let someone know how you feel. Thatâ€™s why you have two hands`",      "`Some Nimbas need to open their small minds instead of their big mouths`",      "`UH DONT KNOW MEH SO STAY AWAY LAWDE`",      "`Kysa kysaaaa haaan? Phir MAAR nhi Khayega tu?`",      "`Zikr Jinka hota hai galiyo meh woh bhosdika ajj paya gya naliyo me`",  ] CHU_STRINGS = [      "`Taare hai Asmaan me very very bright jaat na jla bskd dekh le apni hight.`",      "`jindagi ki na toote lari iski lulli hoti nhi khadi`",      "`Kbhi kbhi meri dil me khyaal ata hai ayse chutiyo ko kon paida kr jata hai😂.`",      "`Saawan ka mahina pawan kare shor jake gand mara bskd kahi aur.`",       "`Dil ke armaa ansuon me beh jaye tum bskd ke chutiye hi reh gye.`",      "`Ishq Se Tabiyat Ne Zeest Ka Mazaa aya maine is lodu ko randi khane me paya.`",      "`Mirza galib ki yeh khani hai tu bhosdika hai yeh sab ki jubani hai.`",      "`Ek dora hai ek nora hai charo taraf kohra hi kohra hai ye sabse bada behan ka lawda hai.`",      "`Phool murjhate achhe nahi lagte aap land khujate acche nahi lagte yehi umar hai chodne ki yaaro aap bathroom mein hilaate acche nahi lagte.`",      "`Badi hasrat thi ki khole iski maa ki salwaar ka  nara par iski maa ki berukhi dekho ki aagayi nangi dobara.`",      "`Na jaane konsi shilajit hai iski maa ki yadon mein jab bhi sochta hun jhanajhana jaata hun.`",      "`Yaara Teri Yaari Pe Mujhe Shak Nahi Tha; Lekin Sabne Teri Gaand Maari, Kya Mera Koi Haq Nahi Tha.`",      "`Yehi to kamal hai hamara baap bante ho tum aur naam aata hai humara.`",      "`Chinti chadi pahad pe angrejon ka jamana tha lund ki pistol thi chut pe nishana tha.`",      "`Bhola khada bich bazaar fut fut kr roye  gaand  Maar Sab Chal Diyo Paisa Diyo N Koye.`",      "`Pani kam hain  matke mein gand mardunga jhatke mein.`",      "`Duniya haseeno ka mela fir bhi mera chutiya dost akela.`",      "`8 ko kehte hain hindi mein aath ja bsdk tu ja ke kutiya ki chaat.`",      "`Purani baatein bhool ja mera lund pakad ke jhool ja.`",      "`Permanent hai pakka tera baap chaka.`",      "`Yaar azab tera nakhra ghazab tera style hai gand dhone ki tameez nahi haath mein mobile hain.`", ] FUK_STRINGS = [    "`It's better to let someone think you are an Idiot than to open your mouth and prove it.`",    "`Talking to a liberal is like trying to explain social media to a 70 years old`",    "`CHAND PE HAI APUN LAWDE.`",    "`Pehle main tereko chakna dega, fir daru pilayega, fir jab aap dimag se nahi L*nd se sochoge, tab bolega..`",    "`Pardhan mantri se number liya, parliament apne :__;baap ka hai...`",    "`Cachaa Ooo bhosdi wale Chacha`",    "`Aaisi Londiya Chodiye, L*nd Ka Aapa Khoye, Auro Se Chudi Na Ho, Biwi Wo Hi Hoye`",    "`Nachoo Bhosdike Nachoo`",    "`Jinda toh jaat ke baal bhi hai`",    "`Sab ko pta tu randi ka baccha hai (its just a joke)`",  ] THANOS_STRINGS = [      "`Mashoor Rand, Ne Arz Kiya Hai. Aane Wale Aate Hai, Jaane Wale Jaate Hai. Yaade Bas Unki Reh Jaati Hai, Jo G**Nd Sujaa Ke Jaate Hai`",      "`Pani kam hai matkey me ga*d mardunga teri ek jatke me`",      "`Aand kitne bhi bade ho, lund ke niche hi rehte hai`",      "`Tum Ameer hum gareeb hum jhopdiwale Tum bhosiwale`",      "`Sisi Bhari Gulab ki padi palang ke pass chodne wale chod gye ab q baitha udaas`",      "`Phuloo Ka Raja Gulaab Kaato me Rehta hai Jeewan ka Nirmata jaato me rehta hai😂`",      "`Chude hue maal ko yaad mt krna Jo Chut na de usse kabhi friyad mt karna jise chudna hai wo chud ke rhegi bekar me muth maar ke apni jindagi barbaad mt krna`",      "`Gand mare gandu Chut mare Chutiya Sabse accha mutti 2 mint me chutti😛`",      "`Marzi Ka Sex Pap Nahi Hota.. Piche Se Dalne Wala Kabhi Baap Nahi Hota.. Condom Zarur Lagana Mere Dost Qki.. Sex K Waqt Popat Ke Pass Dimag Nahi Hota.`",      "`Uss Ne Hothon Se Chhu Kar Lowd* Pe Nasha Kar Diya; Lu*D Ki Baat To Aur Thi, Uss Ne To Jhato* Ko Bhi Khada Kar Diya!`", ] ABUSEHARD_STRING = [ 	"`Madarchod Randi ke bacche.Oye bosdike madarchod bhen ke lode tere gand me lohe ka danda garam karke dalu randwe tujhetho gali ke kutte gand pe chut rakh ke katenge me bata raha hu tere lode pe madhu makkhi Katelode ke ando pe Road roller chale tu kab bathroom me muthne Jaye tho Tera loda ghir Jaye fir tere ando me se lizard ke bacche nikle teko kidnap Kare aur childporn banaye maa ke chuttad ke lode tere saat Johnny sins rape Kare aur jab wo teko anal de tab loda andar fas Jaye bkl tere jhaat pe waxing karunga me dhek lio fir jab tu chillayega na tab tere muh me Mai gai ka gobar dalunga sale tere gand ke balo pe tel laga ke jala du me teko Anaconda leke gand me dalu tho muh se nikle maa ke lode hamesha chutiyo jaisa bartav kartha he tu maa ke Dai chawal drugs tere gand Me dalunga thi tatti nahi nikle maa darchod kabhi teko Marne ka mouka mil gaya na tho bas I'll do my best to get that tatti outof you aur tere jaise chutio ko is duniya me jagaha bhi nahi maa ke lode bandarchod tere gand me chitiya Kate wo bhi bullet ants maadarchod samj nahi aaraha tere baap NE teko kya khake paida kiya Tha kesa chutiya he tu rand ke bacche teko shadi me khana khane na mile teko gand pe 4 thappad mare sab log aur blade se likhe I want anal madarchod bosdike maccharki tatte ke baal chutiye maa ke chut pe ghode ka Lund tere gand me jaltha hu koila Dale bhen ke lode MAA KI CHUT MAI TALWAR DUNGA BC CHUT FAT JAEGI AUR USME SE ITNA KHOON NIKLEGA MZA AJAEGA DEKHNE KA SALE MAA KE BHOSDE SE BAHR AJA FIR BAAP SE ZUBAN DA TERI MAA KI CHUT CHOD CHOD KE BHOSDABNADU MADARCHOD AUR USKE UPAR CENENT LAGADU KI TERE JESA GANDU INSAAN KABHI BAHR NA A SKE ESI GANDI CHUT MAI SE LODA LASUN MADRCHOD TERI MAA KI CHUT GASTI AMA KA CHUTIA BACHA TERI MAA KO CHOD CHOD K PAGAL KAR DUNGA MAA K LODY KISI SASTIII RANDII K BACHY TERI MAA KI CHOOT MAIN TEER MAARUN GANDU HARAMI TERI COLLEGE JATI BAJI KA ROAD PEY RAPE KARONGANDU KI OLAAD HARAM KI NASAL PAPA HUN TERA BHEN PESH KAR AB PAPA KO TERI MAA KKALE KUSS MAIN KIS`", 	"`Main roz teri behno ki banjar chut me apna lawda daalke andar haryali lata tha magar aaj unke ke baare me sunke mujhe bhut afsos huwa..ki unko ab bada loudha chahye..ab mera balatkaaari lawda lagataar 4 ghante tk apne muh me kon rakhega..vo teri behne hi thi jo apni kaali magar rasilli chut mere saamne khol deti aur zameen pe naagin ki tarah rengne lgti thi jaise ki kisine unki chut pe naariyal tod diya ho vo b bada wala mumbai ka naariyal..apni chennal maa ko b nhi bhej rahe mere paas to main kaixe tum logo se vaada karu ki main teri maa chodd dungaw..ab agar tun sach me chahta hai ki main tum dono k mc ki chut me dhammal karu to mera lawda apne muh me rakho aur kaho Sameer hamare sage papa hain... Aur agar tb b the apni maa ki kaali chut mere saamne nahi rakhi to tumhare ghar me ghuske tumhari maa ka balatkaar kar dungaw jaixe delhi me huwa tha...ab teri chudi hui kuttiyo ki tarah apni gaand hilaate hue mere aage kalapna mt ni to tumhari fatti bhoxdi me 100 ched karunga`", 	"`Taare hai Asmaan me very very bright jaat na jla bskd dekh le apni hight.`",         "`Zindagi ki na toote lari iski lulli hoti nhi khadi`",         "`Kbhi kbhi meri dil me khyaal ata hai ayse chutiyo ko kon paida kr jata hai😂.`",         "`Saawan ka mahina pawan kare shor jake gand mara bskd kahi aur.`",          "`Dil ke armaa ansuon me beh jaye tum bskd ke chutiye hi reh gye.`",         "`Ishq Se Tabiyat Ne Zeest Ka Mazaa aya maine is lodu ko randi khane me paya.`",         "`Mirza galib ki yeh khani hai tu bhosdika hai yeh sab ki jubani hai.`", 	"`Mashoor Rand, Ne Arz Kiya Hai. Aane Wale Aate Hai, Jaane Wale Jaate Hai. Yaade Bas Unki Reh Jaati Hai, Jo G**Nd Sujaa Ke Jaate Hai`",         "`Pani kam hai matke me gand marlunga jhatke me.`",         "`Aand kitne bhi bade ho, lund ke niche hi rehte hai`",         "`Tum Ameer hum gareeb hum jhopdiwale Tum bhosiwale`",         "`Sisi Bhari Gulab ki padi palang ke pass chodne wale chod gye ab q baitha udaas`",         "`Phuloo Ka Raja Gulaab Kaato me Rehta hai Jeewan ka Nirmata jaato me rehta hai😂`",         "`Chude hue maal ko yaad mt krna Jo Chut na de usse kabhi friyad mt karna jise chudna hai wo chud ke rhegi bekar me muth maar ke apni jindagi barbaad mt krna`",         "`Gand mare gandu Chut mare Chutiya Sabse accha mutti 2 mint me chutti😛`",         "`Marzi Ka Sex Pap Nahi Hota.. Piche Se Dalne Wala Kabhi Baap Nahi Hota.. Condom Zarur Lagana Mere Dost Qki.. Sex K Waqt Popat Ke Pass Dimag Nahi Hota.`",         "`Uss Ne Hothon Se Chhu Kar Lowd* Pe Nasha Kar Diya; Lu*D Ki Baat To Aur Thi, Uss Ne To Jhato* Ko Bhi Khada Kar Diya!`", ]  SHGS = [     "┐(´д｀)┌",     "┐(´～｀)┌",     "┐(´ー｀)┌",     "┐(￣ヘ￣)┌",     "╮(╯∀╰)╭",     "╮(╯_╰)╭",     "┐(´д`)┌",     "┐(´∀｀)┌",     "ʅ(́◡◝)ʃ",     "ლ(ﾟдﾟლ)",     "┐(ﾟ～ﾟ)┌",     "┐('д')┌",     "ლ｜＾Д＾ლ｜",     "ლ（╹ε╹ლ）",     "ლ(ಠ益ಠ)ლ",     "┐(‘～`;)┌",     "ヘ(´－｀;)ヘ",     "┐( -“-)┌",     "乁༼☯‿☯✿༽ㄏ",     "ʅ（´◔౪◔）ʃ",     "ლ(•ω •ლ)",     "ヽ(゜～゜o)ノ",     "ヽ(~～~ )ノ",     "┐(~ー~;)┌",     "┐(-。ー;)┌",     "¯\_(ツ)_/¯",     "¯\_(⊙_ʖ⊙)_/¯",     "乁ʕ •̀ ۝ •́ ʔㄏ",     "¯\_༼ ಥ ‿ ಥ ༽_/¯",     "乁( ⁰͡  Ĺ̯ ⁰͡ ) ㄏ", ]  CRI = [     "أ‿أ",     "╥﹏╥",     "(;﹏;)",     "(ToT)",     "(┳Д┳)",     "(ಥ﹏ಥ)",     "（；へ：）",     "(T＿T)",     "（πーπ）",     "(Ｔ▽Ｔ)",     "(⋟﹏⋞)",     "（ｉДｉ）",     "(´Д⊂ヽ",     "(;Д;)",     "（>﹏<）",     "(TдT)",     "(つ﹏⊂)",     "༼☯﹏☯༽",     "(ノ﹏ヽ)",     "(ノAヽ)",     "(╥_╥)",     "(T⌓T)",     "(༎ຶ⌑༎ຶ)",     "(☍﹏⁰)｡",     "(ಥ_ʖಥ)",     "(つд⊂)",     "(≖͞_≖̥)",     "(இ﹏இ`｡)",     "༼ಢ_ಢ༽",     "༼ ༎ຶ ෴ ༎ຶ༽", ]  SLAP_TEMPLATES = [     "{hits} {victim} with a {item}.",     "{hits} {victim} in the face with a {item}.",     "{hits} {victim} around a bit with a {item}.",     "{throws} a {item} at {victim}.",     "grabs a {item} and {throws} it at {victim}'s face.",     "launches a {item} in {victim}'s general direction.",     "starts slapping {victim} silly with a {item}.",     "pins {victim} down and repeatedly {hits} them with a {item}.",     "grabs up a {item} and {hits} {victim} with it.",     "ties {victim} to a chair and {throws} a {item} at them.",     "gave a friendly push to help {victim} learn to swim in lava." ]  ITEMS = [     "cast iron skillet",     "large trout",     "baseball bat",     "cricket bat",     "wooden cane",     "nail",     "printer",     "shovel",     "CRT monitor",     "physics textbook",     "toaster",     "portrait of Richard Stallman",     "television",     "five ton truck",     "roll of duct tape",     "book",     "laptop",     "old television",     "sack of rocks",     "rainbow trout",     "rubber chicken",     "spiked bat",     "fire extinguisher",     "heavy rock",     "chunk of dirt",     "beehive",     "piece of rotten meat",     "bear",     "ton of bricks", ]  THROW = [     "throws",     "flings",     "chucks",     "hurls", ]  HIT = [     "hits",     "whacks",     "fek ke maari",     "slaps",     "smacks",     "bashes", ]  # ===========================================   #@register(outgoing=True, pattern=r"^.(\w+)say (.*)") @borg.on(admin_cmd(pattern=r"(\w+)say (.*)")) async def univsaye(cowmsg):     """ For .cowsay module, userbot wrapper for cow which says things. """     if not cowmsg.text[0].isalpha() and cowmsg.text[0] not in ("/", "#", "@", "!"):         arg = cowmsg.pattern_match.group(1).lower()         text = cowmsg.pattern_match.group(2)          if arg == "cow":             arg = "default"         if arg not in cow.COWACTERS:             return         cheese = cow.get_cow(arg)         cheese = cheese()          await cowmsg.edit(f"`{cheese.milk(text).replace('`', '´')}`")   @register(outgoing=True, pattern="^.:/$") async def kek(keks):     if not keks.text[0].isalpha() and keks.text[0] not in ("/", "#", "@", "!"):         """ Check yourself ;)"""         uio = ["/", "\\"]         for i in range(1, 15):             time.sleep(0.3)             await keks.edit(":" + uio[i % 2])   @register(pattern="^.slap(?: |$)(.*)", outgoing=True) async def who(event):     if not event.text[0].isalpha() and event.text[0] not in ("/", "#", "@", "!"):         """ slaps a user, or get slapped if not a reply. """         if event.fwd_from:             return          replied_user = await get_user(event)         caption = await slap(replied_user, event)         message_id_to_reply = event.message.reply_to_msg_id          if not message_id_to_reply:             message_id_to_reply = None          try:             await event.edit(caption)          except:             await event.edit("`Can't slap this person, need to fetch some sticks and stones !!`")  async def get_user(event):     """ Get the user from argument or replied message. """     if event.reply_to_msg_id:         previous_message = await event.get_reply_message()         replied_user = await event.client(GetFullUserRequest(previous_message.from_id))     else:         user = event.pattern_match.group(1)          if user.isnumeric():             user = int(user)          if not user:             self_user = await event.client.get_me()             user = self_user.id          if event.message.entities is not None:             probable_user_mention_entity = event.message.entities[0]              if isinstance(probable_user_mention_entity, MessageEntityMentionName):                 user_id = probable_user_mention_entity.user_id                 replied_user = await event.client(GetFullUserRequest(user_id))                 return replied_user         try:             user_object = await event.client.get_entity(user)             replied_user = await event.client(GetFullUserRequest(user_object.id))          except (TypeError, ValueError):             await event.edit("`I don't slap aliens, they ugly AF !!`")             return None      return replied_user  async def slap(replied_user, event):     """ Construct a funny slap sentence !! """     user_id = replied_user.user.id     first_name = replied_user.user.first_name     username = replied_user.user.username      if username:         slapped = "@{}".format(username)     else:         slapped = f"[{first_name}](tg://user?id={user_id})"      temp = random.choice(SLAP_TEMPLATES)     item = random.choice(ITEMS)     hit = random.choice(HIT)     throw = random.choice(THROW)      caption = "..." + temp.format(victim=slapped, item=item, hits=hit, throws=throw)      return caption  @register(outgoing=True, pattern="^.-_-$") async def lol(lel):     if not lel.text[0].isalpha() and lel.text[0] not in ("/", "#", "@", "!"):         """ Ok... """         okay = "-_-"         for _ in range(10):             okay = okay[:-1] + "_-"             await lel.edit(okay)    @register(outgoing=True, pattern="^.;_;$") async def fun(e):     if not e.text[0].isalpha() and e.text[0] not in ("/", "#", "@", "!"):         t = ";__;"         for j in range(10):             t = t[:-1] + "_;"             await e.edit(t)  @register(outgoing=True, pattern="^.cry$") async def cry(e):     """ y u du dis, i cry everytime !! """     if not e.text[0].isalpha() and e.text[0] not in ("/", "#", "@", "!"):         await e.edit(random.choice(CRI))  @register(outgoing=True, pattern="^.insult$") async def insult(e):     """ I make you cry !! """     if not e.text[0].isalpha() and e.text[0] not in ("/", "#", "@", "!"):         await e.edit(random.choice(INSULT_STRINGS))  @register(outgoing=True, pattern="^.cp(?: |$)(.*)") async def copypasta(cp_e):     """ Copypasta the famous meme """     if not cp_e.text[0].isalpha() and cp_e.text[0] not in ("/", "#", "@", "!"):         textx = await cp_e.get_reply_message()         message = cp_e.pattern_match.group(1)          if message:             pass         elif textx:             message = textx.text         else:             await cp_e.edit("`😂🅱️IvE👐sOME👅text👅for✌️Me👌tO👐MAkE👀iT💞funNy!💦`")             return          reply_text = random.choice(EMOJIS)         b_char = random.choice(             message         ).lower()  # choose a random character in the message to be substituted with 🅱️         for owo in message:             if owo == " ":                 reply_text += random.choice(EMOJIS)             elif owo in EMOJIS:                 reply_text += owo                 reply_text += random.choice(EMOJIS)             elif owo.lower() == b_char:                 reply_text += "🅱️"             else:                 if bool(random.getrandbits(1)):                     reply_text += owo.upper()                 else:                     reply_text += owo.lower()         reply_text += random.choice(EMOJIS)         await cp_e.edit(reply_text)   @register(outgoing=True, pattern="^.vapor(?: |$)(.*)") async def vapor(vpr):     """ Vaporize everything! """     if not vpr.text[0].isalpha() and vpr.text[0] not in ("/", "#", "@", "!"):         reply_text = list()         textx = await vpr.get_reply_message()         message = vpr.pattern_match.group(1)         if message:             pass         elif textx:             message = textx.text         else:             await vpr.edit("`Ｇｉｖｅ ｓｏｍｅ ｔｅｘｔ ｆｏｒ ｖａｐｏｒ！`")             return          for charac in message:             if 0x21 <= ord(charac) <= 0x7F:                 reply_text.append(chr(ord(charac) + 0xFEE0))             elif ord(charac) == 0x20:                 reply_text.append(chr(0x3000))             else:                 reply_text.append(charac)          await vpr.edit("".join(reply_text))  			   @register(outgoing=True, pattern="^.repo$") async def source(e):     if not e.text[0].isalpha() and e.text[0] not in ("/", "#", "@", "!"):         await e.edit("Click [here](https://github.com/H1M4N5HU0P/MAFIA-USERBOT) to open this 🔥**Lit AF!!**🔥 __𝕄𝔸𝔽𝕀𝔸 𝕌𝕊𝔼ℝ𝔹𝕆𝕋__ Repo.. Join channel :- @MAFIA_USERBOT") 			   			   @register(outgoing=True, pattern="^.str(?: |$)(.*)") async def stretch(stret):     """ Stretch it."""     if not stret.text[0].isalpha() and stret.text[0] not in ("/", "#", "@", "!"):         textx = await stret.get_reply_message()         message = stret.text         message = stret.pattern_match.group(1)         if message:             pass         elif textx:             message = textx.text         else:             await stret.edit("`GiiiiiiiB sooooooomeeeeeee teeeeeeext!`")             return          count = random.randint(3, 10)         reply_text = re.sub(             r"([aeiouAEIOUａｅｉｏｕＡＥＩＯＵаеиоуюяыэё])",             (r"\1"*count),             message         )         await stret.edit(reply_text)   @register(outgoing=True, pattern="^.zal(?: |$)(.*)") async def zal(zgfy):     """ Invoke the feeling of chaos. """     if not zgfy.text[0].isalpha() and zgfy.text[0] not in ("/", "#", "@", "!"):         reply_text = list()         textx = await zgfy.get_reply_message()         message = zgfy.pattern_match.group(1)         if message:             pass         elif textx:             message = textx.text         else:             await zgfy.edit(                 "`gͫ ̆ i̛ ̺ v͇̆ ȅͅ   a̢ͦ   s̴̪ c̸̢ ä̸ rͩͣ y͖͞   t̨͚ é̠ x̢͖  t͔͛`"             )             return          for charac in message:             if not charac.isalpha():                 reply_text.append(charac)                 continue              for _ in range(0, 3):                 randint = random.randint(0, 2)                  if randint == 0:                     charac = charac.strip() + \                         random.choice(ZALG_LIST[0]).strip()                 elif randint == 1:                     charac = charac.strip() + \                         random.choice(ZALG_LIST[1]).strip()                 else:                     charac = charac.strip() + \                         random.choice(ZALG_LIST[2]).strip()              reply_text.append(charac)          await zgfy.edit("".join(reply_text)) 			   @register(outgoing=True, pattern="^.pkill$") async def killing (killed):     """ Dont Kill Too much -_-"""     if not killed.text[0].isalpha() and killed.text[0] not in ("/", "#", "@", "!"):         if await killed.get_reply_message():             await killed.edit(                 "`My Master killed targeted user by Headshot 😈......`\n" 		"#Sad_Reacts_Onli\n"             ) 			   @register(outgoing=True, pattern="^.bt$") async def bluetext(bte):     """ Believe me, you will find this useful. """     if not bte.text[0].isalpha() and bte.text[0] not in ("/", "#", "@", "!"):         if await bte.get_reply_message():             await bte.edit(                 "`BLUETEXT MUST CLICK.`\n"                 "`Are you a stupid animal which is attracted to colours?`"             ) 			   @register(outgoing=True, pattern="^.rape$") async def raping (raped):     """ Dont Rape Too much -_-"""     if not raped.text[0].isalpha() and raped.text[0] not in ("/", "#", "@", "!"):         index = random.randint(0, len(RAPE_STRINGS) - 1)         reply_text = RAPE_STRINGS[index]         await raped.edit(reply_text) 			   @register(outgoing=True, pattern="^.pro$") async def proo (pros):     """ String for Pros only -_-"""     if not pros.text[0].isalpha() and pros.text[0] not in ("/", "#", "@", "!"):         index = random.randint(0, len(PRO_STRINGS) - 1)         reply_text = PRO_STRINGS[index]         await pros.edit(reply_text)  @register(outgoing=True, pattern="^.fuk$") async def chutiya (fuks):     """ String for fhu only -_-"""     if not fuks.text[0].isalpha() and fuks.text[0] not in ("/", "#", "@", "!"):         index = random.randint(0, len(FUK_STRINGS) - 1)         reply_text = FUK_STRINGS[index]         await fuks.edit(reply_text)  @register(outgoing=True, pattern="^.chu$") async def chutiya (chus):     """ String for Chu only -_-"""     if not chus.text[0].isalpha() and chus.text[0] not in ("/", "#", "@", "!"):         index = random.randint(0, len(CHU_STRINGS) - 1)         reply_text = CHU_STRINGS[index]         await chus.edit(reply_text) 			  			   @register(outgoing=True, pattern="^.thanos$") async def thanos (thanos):     """ String for thanos only -_-"""     if not thanos.text[0].isalpha() and thanos.text[0] not in ("/", "#", "@", "!"):         index = random.randint(0, len(THANOS_STRINGS) - 1)         reply_text = THANOS_STRINGS[index]         await thanos.edit(reply_text)	 			   @register(outgoing=True, pattern="^.hardabuse$") async def fuckedd (abusehard):     """ Dont Use this Too much bsdk -_-"""     if not abusehard.text[0].isalpha() and abusehard.text[0] not in ("/", "#", "@", "!"):         index = random.randint(0, len(ABUSEHARD_STRING) - 1)         reply_text = ABUSEHARD_STRING[index]         await abusehard.edit(reply_text) 			   			   @register(outgoing=True, pattern="^.gey$") async def geys (geyed):     """ Use only for gey ppl -_-"""     if not geyed.text[0].isalpha() and geyed.text[0] not in ("/", "#", "@", "!"):         index = random.randint(0, len(GEY_STRINGS) - 1)         reply_text = GEY_STRINGS[index]         await geyed.edit(reply_text) 			   			   @register(outgoing=True, pattern="^.abuse$") async def abusing (abused):     """ Dont Abuse Too much bsdk -_-"""     if not abused.text[0].isalpha() and abused.text[0] not in ("/", "#", "@", "!"):         index = random.randint(0, len(ABUSE_STRINGS) - 1)         reply_text = ABUSE_STRINGS[index]         await abused.edit(reply_text)   @register(outgoing=True, pattern="^.owo(?: |$)(.*)") async def faces(owo):     """ UwU """     if not owo.text[0].isalpha() and owo.text[0] not in ("/", "#", "@", "!"):         textx = await owo.get_reply_message()         message = owo.pattern_match.group(1)         if message:             pass         elif textx:             message = textx.text         else:             await owo.edit("` UwU no text given! `")             return          reply_text = re.sub(r"(r|l)", "w", message)         reply_text = re.sub(r"(R|L)", "W", reply_text)         reply_text = re.sub(r"n([aeiou])", r"ny\1", reply_text)         reply_text = re.sub(r"N([aeiouAEIOU])", r"Ny\1", reply_text)         reply_text = re.sub(r"\!+", " " + random.choice(UWUS), reply_text)         reply_text = reply_text.replace("ove", "uv")         reply_text += " " + random.choice(UWUS)         await owo.edit(reply_text)   @register(outgoing=True, pattern="^.react$") async def react_meme(react):     """ Make your userbot react to everything. """     if not react.text[0].isalpha() and react.text[0] not in ("/", "#", "@", "!"):         await react.edit(random.choice(FACEREACTS))   @register(outgoing=True, pattern="^.shg$") async def shrugger(shg):     r""" ¯\_(ツ)_/¯ """     if not shg.text[0].isalpha() and shg.text[0] not in ("/", "#", "@", "!"):         await shg.edit(random.choice(SHGS))     @register(outgoing=True, pattern="^.noob$") async def metoo(hahayes):     """ Haha yes """     if not hahayes.text[0].isalpha() and hahayes.text[0] not in ("/", "#", "@", "!"):         await hahayes.edit(random.choice(NOOBSTR)) 			   @register(outgoing=True, pattern="^.rendi$") async def metoo(hahayes):     """ Haha yes """     if not hahayes.text[0].isalpha() and hahayes.text[0] not in ("/", "#", "@", "!"):         await hahayes.edit(random.choice(RENDISTR)) 			 			   @register(outgoing=True, pattern="^.oof$") async def Oof(e):     if not e.text[0].isalpha() and e.text[0] not in ("/", "#", "@", "!"):         t = "Oof"         for j in range(15):             t = t[:-1] + "of"             await e.edit(t)  @register(outgoing=True, pattern="^.10iq$") async def iqless(e):     if not e.text[0].isalpha() and e.text[0] not in ("/", "#", "@", "!"):         await e.edit("♿")     @register(outgoing=True, pattern="^.mock(?: |$)(.*)") async def spongemocktext(mock):     """ Do it and find the real fun. """     if not mock.text[0].isalpha() and mock.text[0] not in ("/", "#", "@", "!"):         reply_text = list()         textx = await mock.get_reply_message()         message = mock.pattern_match.group(1)         if message:             pass         elif textx:             message = textx.text         else:             await mock.edit("`gIvE sOMEtHInG tO MoCk!`")             return          for charac in message:             if charac.isalpha() and random.randint(0, 1):                 to_app = charac.upper() if charac.islower() else charac.lower()                 reply_text.append(to_app)             else:                 reply_text.append(charac)          await mock.edit("".join(reply_text))   @register(outgoing=True, pattern="^.clap(?: |$)(.*)") async def claptext(memereview):     """ Praise people! """     if not memereview.text[0].isalpha() and memereview.text[0] not in ("/", "#", "@", "!"):         textx = await memereview.get_reply_message()         message = memereview.pattern_match.group(1)         if message:             pass         elif textx:             message = textx.text         else:             await memereview.edit("`Hah, I don't clap pointlessly!`")             return         reply_text = "👏 "         reply_text += message.replace(" ", " 👏 ")         reply_text += " 👏"         await memereview.edit(reply_text)     @register(outgoing=True, pattern="^.smk (.*)") async def smrk(smk):         if not smk.text[0].isalpha() and smk.text[0] not in ("/", "#", "@", "!"):             textx = await smk.get_reply_message()             message = smk.text         if message[5:]:             message = str(message[5:])         elif textx:             message = textx             message = str(message.message)         if message == 'dele':             await smk.edit( message +'te the mafia' + "ツ" )             await smk.edit("ツ")         else:              smirk = " ツ"              reply_text = message + smirk              await smk.edit(reply_text)      @register(outgoing=True, pattern="^.lfy (.*)",) async def let_me_google_that_for_you(lmgtfy_q):     if not lmgtfy_q.text[0].isalpha() and lmgtfy_q.text[0] not in ("/", "#", "@", "!"):         textx = await lmgtfy_q.get_reply_message()         query = lmgtfy_q.text         if query[5:]:             query = str(query[5:])         elif textx:             query = textx             query = query.message         query_encoded = query.replace(" ", "+")         lfy_url = f"http://lmgtfy.com/?s=g&iie=1&q={query_encoded}"         payload = {'format': 'json', 'url': lfy_url}         r = requests.get('http://is.gd/create.php', params=payload)         await lmgtfy_q.edit(f"[{query}]({r.json()['shorturl']})")         if BOTLOG:             await bot.send_message(                 BOTLOG_CHATID,                 "LMGTFY query `" + query + "` was executed successfully",             )                    			                 			    CMD_HELP.update({     "memes": ".cowsay\ \nUsage: cow which says things.\ \n\n.milksay\ \nUsage: Weird Milk that can speak\ \n\n:/\ \nUsage: Check yourself ;)\ \n\n-_-\ \nUsage: Ok...\ \n\n;_;\ \nUsage: Like `-_-` but crying.\ \n\n.cp\ \nUsage: Copypasta the famous meme\ \n\n.vapor\ \nUsage: Vaporize everything!\ \n\n.str\ \nUsage: Stretch it.\ \n\n.10iq\ \nUsage: You retard !!\ \n\n.zal\ \nUsage: Invoke the feeling of chaos.\ \n\n.oof\ \nUsage: Ooooof\ \n\n.moon\ \nUsage: kensar moon animation.\ \n\n.clock\ \nUsage: kensar clock animation.\ \n\n.earth\ \nUsage: kensar earth animation.\ \n\n.hi\ \nUsage: Greet everyone!\ \n\n.coinflip <heads/tails>\ \nUsage: Flip a coin !!\ \n\n.owo\ \nUsage: UwU\ \n\n.react\ \nUsage: Make your userbot react to everything.\ \n\n.slap\ \nUsage: reply to slap them with random objects !!\ \n\n.cry\ \nUsage: y u du dis, i cri.\ \n\n.shg\ \nUsage: Shrug at it !!\ \n\n.runs\ \nUsage: Run, run, RUNNN! [`.disable runs`: disable | `.enable runs`: enable]\ \n\n.metoo\ \nUsage: Haha yes\ \n\n.mock\ \nUsage: Do it and find the real fun.\ \n\n.clap\ \nUsage: Praise people!\ \n\n.f <emoji/character>\ \nUsage: Pay Respects.\ \n\n.bt\ \nUsage: Believe me, you will find this useful.\ \n\n.smk <text/reply>\ \nUsage: A shit module for ツ , who cares.\ \n\n.type\ \nUsage: Just a small command to make your keyboard become a typewriter!\ \n\n.lfy <query>\ \nUsage: Let me Google that for you real quick !!\ \n\n.decide\ \nUsage: Make a quick decision.\ \n\n.abusehard\ \nUsage: You already got that! Ain't?.\ \n\n.chu\ \nUsage: Incase, the person infront of you is....\ \n\n.fuk\ \nUsage: The onlu word that can be used fucking everywhere.\ \n\n.thanos\ \nUsage: Try and then Snap.\ \n\n.noob\ \nUsage: Whadya want to know? Are you a NOOB?\ \n\n.pro\ \nUsage: If you think you're pro, try this.\ \n\n.abuse\ \nUsage: Protects you from unwanted peeps.\ \n\n\nThanks to 🅱️ottom🅱️ext🅱️ot (@NotAMemeBot) for some of these." })

---
## [Temulgeh/NSIProjet](https://github.com/Temulgeh/NSIProjet)@[58b95368b0...](https://github.com/Temulgeh/NSIProjet/commit/58b95368b03bbeccb19dbf128d1b533708b9ed04)
#### Wednesday 2020-12-09 08:40:19 by Temulgeh

Merge branch 'main' of https://github.com/Temulgeh/NSIProjet into main

fuck you

---
## [Temulgeh/NSIProjet](https://github.com/Temulgeh/NSIProjet)@[e5c1ee7e5d...](https://github.com/Temulgeh/NSIProjet/commit/e5c1ee7e5d70d66026d563e7d5a0919a16ae1f8c)
#### Wednesday 2020-12-09 08:41:40 by RetsuOwen

FUCK YOU GIT

I HATE YOU!!!!!!!!!!!!! (i just forgot to save lol)

---
## [Vest/adventofcode](https://github.com/Vest/adventofcode)@[6705eb1ff8...](https://github.com/Vest/adventofcode/commit/6705eb1ff8bd6e2d77dd3323661feb967b7643bd)
#### Wednesday 2020-12-09 10:44:43 by Vest

Day 9 / 2020: 675280050 and 96081673
Better and slightly more debuggable solution than from others :)
My thoughts: stupid day, no practialce usage and joy.

---
## [mrakgr/The-Spiral-Language](https://github.com/mrakgr/The-Spiral-Language)@[e9697598ec...](https://github.com/mrakgr/The-Spiral-Language/commit/e9697598ec5c03c60bfd2aa101f39d4f976c1a5a)
#### Wednesday 2020-12-09 13:31:52 by Marko Grdinić

"11:10am. I got up only 5m ago. Let me chill for a while.

Yesterday's gaming session sucked. I screwed up and made my characters too powerful, now every battle is a cakewalk. Early on, I had tactical fights where the wizard carried the party. Now, I have Valerie who has insane AC and absorbs all the damage without a scrach, I figured out that power attack and ditching those oversized bastard swords works for Amerie, and Ekun does such insane damage at range.

When I first fought the Craig Linnorn a few days ago, it wiped out my whole party. Yesterday I beat it in two rounds without it even getting a single attack on me. The fight did not go at all like I planned it to. I prepared Enervation on my wizard and a shitload of curses. Instead what happened is that Ekun dealt 200 damage, and the rest of the party contributed a little as well. The thing just dropped after that.

Ridiculous.

The game is so boring now.

11:15am. I actually considered changing difficulty, but did not know how - the damn tabs in the option are so dark that I did not even see them. I thought it was impossible until I really started looking.

Forget that. Let me chill for a while.

https://www.microsoft.com/en-us/research/uploads/prod/2020/11/perceus-tr-v1.pdf
Perceus - Garbage Free Reference Counting with Reuse

I haven't read any papers for a while, maybe I'll have a little bit of this.

> The implementation supports typed algebraic effect handlers using evidence translation [47] and compiles into standard C11 code

> The use of reference counting means no runtime system is needed and Koka programs can readily link with other C/C++ libraries.

Both of these statements are interesting to me.

12:05pm. Let me get breakfast

1:40pm. Done with chores.

Let me get my bearings.

1:45pm. I think with the way that the language is at this point, I should start curtailing my gaming. Forget Pathfinder and Divinity 2. Replace that with sleep and getting work done in the morning. Right now I am only starting work at 2pm whereas in the past I'd do a few hours in the morning as well.

Yes, editor support was a huge chore, no doubt about that, but now I am in a more interesting part.

The debugging I am doing now is more like a game. I want to dedicate myself to it.

I want through this part. I want to go to the next phase, because that phase is where I get money and actual status. I want to say fuck off to the future where I get a regular 9-5 job and just end up being a wagecuck.

The fact that I am at my age and still haven't made a damn cent stings like a bitch. Yeah, it is all good that I solved the meaning of life - when do I get the actual power?

I am dying here. This world is just so harsh in not giving me what I want when I want it. But it will give me what I need just the same.

I want to change. And the only way to do that is to finally establish my foundation.

1:50pm. I have been getting into it in the last few days. The debugging I am doing is not so bad. It is not like the kind of programming that I have been doing.

1:55pm. This is the ideal time to switch gears - since gaming has finally became boring to me, I should take this chance to ditch that addiction and refocus my effort on programming.

2pm. I feel a deep fatigue. Games were refreshing for a while, but the food for the soul should be dealing with these tests. I can do quite a lot before the year is over.

I want the sense of confidence to come to me again. I do not want to strain myself to win. I want to be in an environment that suits me.

I do not belong where I am now.

Somewhat ironically, finding a game too easy acts as a repelant now.

I was really much smarter as a kid in some ways - there I would not hesitate at all to bring out cheats, but now the drive to win at some challenge is like a masochism. I do not need to study wizards like they are my doctoral research.

I just need to cover the gaping holes in my heart.

No matter how much potential my future has, and no matter how great I might become - all those dreams are empty in the present. The harshness of reality will grind away at them. The human mind is not designed to allow them completely control over my being. I am always forced to balance - and wallow in regret.

The rational ideas that come to me, never come with affection for them.

There are only bursts of immersion that keep me going.

2:10pm. I really can't do it like this for much longer. This loneliness eats away at me. I want to come to angreement with other people about at least something. And my family excluded, I want to ditch the pieces of trash that I spent time amongst in the past. Physically I've been there for over a decade, but now I just need to accept mentally that no friends are better than bad friends.

I do not feel like programming today - I want to take a bath here.

But in return, I will stop playing games and will ditch Pathfinder. I'll resume it next year at some point. At that time it will be fresh again.

Right now, I want to clean myself up, dwell a bit on my loneliness and ditch the dumb distractors. Then I will start the debugging effort at full force.

I am a crucial fork in the road where I essentially grow up. Once Spiral is done, I'll go from having 'friends' to having allies. I've been meme'd the fuck out with regular social conventions, and I've tried to balance that with my own rational interests. Looking at the last 20 years, that has been a horrible mistake. Rather than employing faux arrogance, I should have gone full demonic and saved myself some dignity, but my insight and skill as a kid had just been too poor to pursue such a way.

It just hurts so much to admit that my childhood and youth has been a mistake and that I've been living in delusions. It is highly ironic after being so stuck up that I would fall apart as soon as I proved to myself that the rest really are NPCs

I am a fool. Somebody, somewhere is definitely laughing at my current predicament and lack of good sense.

2:20pm. Just what will give me the strength to overcome this depression?

Getting some real world acknowledgment would do good. Finishing Spiral would do good. Working on RL agents would do good.

There are plenty of things that would do good, but for now, I have to tile the ground. The harvest is yet in the future.

2:25pm. Usually, after the working day is over, I would spend some time hyping myself for the next step. This is what I would do if I were motivated, but now I am treating my programming as if it were a job, and I start gaming as soon as 6pm gets here.

And there is not enough time in a regular day so I keep going at it till 2am. Then I wake up at 11am and slack for the next few hours. This is bullshit.

I am going to ditch gaming and get back on track.

The last 1.5 month was a huge exception because those shitty streams were just so boring to do, but now I am the final stretch and it is time to pick up the pace. The long marathon is over, and it is time to finish the race.

Of course, after the race is over, there will be a new one, but that race will be different from the ones I've been doing up to now.

I need some variety in my programming life.

2:30pm. Let me clean myself up. I should have done this yesterday, but I was apparently too busy being a degenerate to deal with hygiene."

---
## [nestttgundd12346/cvv-tracks-dumps-fullz-randoms-banklogs-bank-transfer-paypal-cashapp](https://github.com/nestttgundd12346/cvv-tracks-dumps-fullz-randoms-banklogs-bank-transfer-paypal-cashapp)@[3f1b41cc15...](https://github.com/nestttgundd12346/cvv-tracks-dumps-fullz-randoms-banklogs-bank-transfer-paypal-cashapp/commit/3f1b41cc15d1862274c6a7cddea682d0d29da838)
#### Wednesday 2020-12-09 14:35:11 by nestttgundd12346

cvv tracks dumps fullz randoms bank logs bank transfers cashapp paypal zelle

SELL PAYPAL,BANK LOGINS,WU TRF,DUMPS+PIN,GIFTCARDS

contact ____NESTGUN INC____
ICQ : 684077125 or 666120034
Telegram: +1(770) 695-7967
whatsapp: +1 (413) 282-8037
Sms or phone : +1(770) 695-7967
yahoo mail: nestgun@yahoo.com
prontomail: nestgun@protonmail.com

I HAVE HAD SEVERAL SUCCESSFUL TRANSACTIONS AND COUNTING REPORTEDLY INVOLVING BANK TO BANK WIRE TRANSFER, ACH,WESTERN UNION, PAYPAL, SKRILL ETC.. IF YOU ARE JUST SEEING THIS THEN YOU ARE ONE OF THE LUCKY FEW YOU SHOULD TAKE THIS ADVANTAGE TO MAKE OVER $100,000.00.. HIT ME UP ASAP..

VERY IMPORTANT NOTE:- ALL TRANSFER CHARGES ARE DUE BEFORE TRANSACTION CAN PROCEED AS IT IS A STIPULATED FEE TO ACQUIRE THE BASIC REQUIREMENT TO EXECUTE THE TRANSACTION SAFELY AND SUCCESSFULLY...

*Are you having troubles meeting up with you BILLS
*Pay your House Rent with half the fee
*Do you need capital to begin a small or large scale BUSINESS
*Do you need EXCESS funds for PERSONAL USE
*Are you suffering from health issues and you need FINANCING
*Do you need a raise for that SCHOOL FEES
*An improved CREDIT to apply for a LOAN

CONTACT NESTGUN; for all services including Hotel and Apartment reservation anywhere in the world at 20% off - i'm a RELIABLE Underground ANONYMOUS Hacker AKA the

____NESTGUN INC____
ICQ : 684077125 or 666120034
Telegram: +1(770) 695-7967
whatsapp: +1 (413) 282-8037
Sms or phone : +1(770) 695-7967
yahoo mail: nestgun@yahoo.com
prontomail: nestgun@protonmail.com

Hacker well specialized in HACKING and SPAMMING, I am providing service at a MINIMAL COST..
Currently i am trading Bitcoin for FRESH BASE TOOLS that includes Hacked PayPal logs, Bank Wire, Checks & Ach logins, Skrill accounts, Western union transfer and Bug software, Transfer-wise, Credit Card Top-Up, Fullz, Verizon, AT&T account, Clone Atm skimmer, Cvv, smtp, rdp, inbox mailer, Email leads, Dumps track+PIN, Warez also Bots and Hacking tools strictly UNDERGROUND Sales..

____NESTGUN INC____
ICQ : 684077125 or 666120034
Telegram: +1(770) 695-7967
whatsapp: +1 (413) 282-8037
Sms or phone : +1(770) 695-7967
yahoo mail: nestgun@yahoo.com
prontomail: nestgun@protonmail.com

Most other CC/paypal to btc listings only contain parts of this pack
You get 3 working guides + a bonus pack with 8 guides
If you are a NOOB, or if you never knew how to buy BTC with a stolen CC or Paypal then you are in the right place.
This method is not new, but is THE ONLY method that works 100% at the time and its safe. If you dont know how to stay 100% under the radar, please visit my shop and learn how to use VPN, Tor, Socks5, etc.
This is a complete guide and tutorial on how to get Bitcoins with a stolen debit card, credit card, or a hacked Paypal.Enjoy the reading, keep yourself safe and make money online!


ALL TRANSACTIONS ARE COMPLETELY SECURE AND NO BACK TRACES ...

-Here are the Rates List with Explanation :-
SELLING VERIZON, AT&T, SPRINT POSTPAID ACCOUNT $200 DRIVERS LICENSE $300 PASSPORT $500 SSN $200

SELLING IMPORTED BITCOIN ADDRESS

$750 FOR $70,000

$1000 FOR $150,000

$2000 FOR $500,000

$3000 FOR $1,000,000

WESTERN UNION TRANSFER :- This is a CHEAP and FAST method of transferring MONEY to customers ALL OVER THE WORLD..RECEIVER will get payment information within a MAXIMUM OF 30 MINS AFTER PAYMENT.

Necessary Info needed for WU transfers :-

1: Full name 2: City 3:Country

GOOD WESTERN UNION RATE: CHARGING

$200 BTC FOR $1500

$300 BTC FOR $3000

$400 BTC FOR $4500

$500 BTC FOR $7000

$700 BTC FOR $10000

WESTERN UNION ACTIVATION SOFTWARE

$300 FOR 1 MONTH ACTIVATION

$500 FOR 3 MONTHS ACTIVATION

$1200 FOR 1 YEAR ACTIVATION PRO VERSION

BANK TO BANK TRANSFER (LOGS) : I sell Only FRESH and CHECKED Bank (wire and ach) Logs, BANK to BANK WIRE TRANSFER will take 15 Mins MAXIMUM 24 Hours for HIGH BALANCE AND AUTOMATED CLEARING HOUSE CHECKS AND TRANSFERS..

PROVIDE
**Bank name
**Bank Address
**Zip Code
**Account Holder Name
** Account Number/IBAN
**Account Type
** Routing Number/Sort Code.

TRANSFER CHARGE AT :

$300 BTC FOR $5000

$400 BTC FOR $7000

$700 BTC FOR $20,000

$1000 BTC FOR $50,000

$1500 BTC FOR $200,000

PAYPAL TRANSFER/LOGS : VERIFIED PAYPAL transfer is INSTANT, MERCHANT account and HIGH BALANCE May take a MAXIMUM OF 24 Hours

PAYPAL VERIFY TRANSFER IS CHARGED AT 12% FEE PER TRANSFER,

* MINIMUM OF $1000 FOR $150

$240 BTC FOR $3000

$360 BTC FOR $5000

$600 BTC FOR $10,000

$840 BTC FOR $20,000

$1200 BTC FOR $50,000

CREDIT CARD TOP-UP

$7000 Transfer = $300 Charge

$20,000 Transfer = $500 Charge

$50,000 Transfer = $700 Charge

$150,000 Transfer = $1000 Charge

CLONE ATM CARDS

$250 FOR $30000

$400 FOR $50000

$500 FOR $70000

$700 FOR $150,000

***TERMS AND CONDITIONS
*MAKE SURE YOU ARE READY TO MAKE PURCHASE BEFORE CONTACTING ME
*YOU CAN GET PRIVILEGES ONLY AS AN EXISTING CUSTOMER DO NOT REQUEST FOR A FREE TRANSACTION OTHERWISE YOU MIGHT GET BLOCKED
*MAKE SURE TO KEEP YOUR TRANSACTION UNDERGROUND AND TAKE PRECAUTION DURING CASH-OUT.
*USE DIFFERENT STORES FOR PICK-UP AND SEVERAL ID.
PAYMENT METHODS INCLUDE: [ BITCOIN, ETHEREUM, PERFECT MONEY]

____NESTGUN INC____
ICQ : 684077125 or 666120034
Telegram: +1(770) 695-7967
whatsapp: +1 (413) 282-8037
Sms or phone : +1(770) 695-7967
yahoo mail: nestgun@yahoo.com
prontomail: nestgun@protonmail.com

WE ARE ANONYMOUS !!!

cvv tracks fulls randoms dumps tracks 1 and 2 western union cashapp zelle

---
## [mrakgr/The-Spiral-Language](https://github.com/mrakgr/The-Spiral-Language)@[e0f020cbe7...](https://github.com/mrakgr/The-Spiral-Language/commit/e0f020cbe751e8fde62f9382ffdf811e765fe8db)
#### Wednesday 2020-12-09 17:29:40 by Marko Grdinić

"4:30pm. Focus me, stop checking MangaDex.

```
The type 'Object' is required here and is unavailable. You must add a reference to assembly 'System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e'.
```

I have a bunch of errors like this when typechecking `let x = 1`.

It seems Ionide is turned on, but it does not work.

https://dotnet.microsoft.com/download/dotnet/thank-you/sdk-5.0.101-windows-x64-installer

Let me try getting the newest .NET SDK.

It seems the Ionide plugin is up to date.

4:35pm. It is installed. Let me try the script again.

4:40pm.

```fs
let x = 1
let y = 2
x + y |> printfn "%i"
```

It works. I can even send the code fragments to FSI with Alt + Enter just like in regular VS.

This is nice.

Although I have no tried it, I think this should work from the extension host as well.

What I really want to do now is try compiling an F# project from VS Code. How do I do that?

4:50pm. Ok, I can create a new project.

https://docs.microsoft.com/en-us/dotnet/fsharp/get-started/get-started-vscode

Based on this. I remember trying this around a year ago. At that time I run into heavy difficulties, but now the typechecking does work. This is nice.

Still, how do I compile the project? I have no idea how.

https://docs.microsoft.com/en-us/dotnet/fsharp/get-started/get-started-command-line

```fs
open System
open Library

[<EntryPoint>]
let main argv =
    printfn "Nice command-line arguments! Here's what JSON.NET has to say about them:"

    for arg in argv do
        let value = getJsonNetJson arg
        printfn $"{value}"

    0 // return an integer exit code
```

Oh, F# has string interpolation now. I had no idea.

Let me try building the project based on the instructions here. I'll try `dotnet build` and if that fails, I'll also add the solution file.

```
E:\F# Test\FirstIonideProject>dotnet build
Microsoft (R) Build Engine version 16.8.0+126527ff1 for .NET
Copyright (C) Microsoft Corporation. All rights reserved.

  Determining projects to restore...
  All projects are up-to-date for restore.
  FirstIonideProject -> E:\F# Test\FirstIonideProject\bin\Debug\net5.0\FirstIonideProject.dll

Build succeeded.
    0 Warning(s)
    0 Error(s)

Time Elapsed 00:00:02.68

E:\F# Test\FirstIonideProject>dotnet run
Hello world from F#
```

Amazing, everything just works now. I thought it would be a lot more painful than this.

5pm. If things are like this, I might consider switching from VS to VS Code completely for my F# work, but even though it feels fresh, I won't give my trust to Ionide so easily after that experience of a year ago. I do not want to switch from something that works to something that potentially could not. VS has its warts. If both worked fine, I'd prefer VS Code, but that is a big if.

Ok, let me try running the server and the extension host again. I want to see if I can get it to work on those scripts.

5:10pm. No, it does not work. I have the same missing assembly error there. This in both the extension host, and in the regular host which I am using it to run it.

Why is this happening? Does the location of the script matter for some reason?

5:10pm. Lunch time. Let me take a break here.

5:40pm. Done with the lunch break.

Let me see if I can figure out why Ionide is not able to handle script files in the one directory I want it to.

5:50pm. Ok, I see.

I can go into `e:\f# tests`, create `test.fsx` there and it will work. But if I create a subdirectory in that folder, then it will fail to typecheck the script files in it. What a pile of crap.

I knew I was right not to trust Ionide. Even worse, I actually had it fail initially on `f# tests` just now. There was some state being carried over from another file. I had to shut down all the VS Code instances in order to get it to work again.

I did editor support for Spiral using streams, but is is clear to me that the Ionide guys did something a lot worse.

So what should I do now? Because the script files get placed in the directory where there are compiled I cannot use them.

I should report this issue and see if I can get it to work with the author's help.

6:15pm. https://github.com/ionide/ionide-vscode-fsharp/issues/

I opened issue 1449 here.

What can I do here? Unless the author gives me a hand, Ionide is useless. I might as well paste the scripts elsewhere by hand for the time being. Or output them into the core folder.

6:20pm. Thankfully as long as the script file is in the parent folder, I can typecheck it even in the extension host.

...Let me close for the day here. So I could not get it to work completely, but nonetheless, this is a step forward from a year ago. It won't be the comfort level that I want, but maybe something will come of this. Maybe the author will manage to figure out how to fix this.

6:25pm. Just as I dropped Reverend Insanity a while ago, now I have a much worse cRPG poison that I need to purge from my system, at least for the time being. I should endeavor to go to bed before 12am today, wake up tomorrow at 9am and do some proper debugging without strain.

I should focus on getting this done. The month will be done before I know it."

---
## [tonirmv/libsuperuser](https://github.com/tonirmv/libsuperuser)@[0938295f18...](https://github.com/tonirmv/libsuperuser/commit/0938295f1813cfff0c99860117d9494496f6dad7)
#### Wednesday 2020-12-09 20:05:52 by tonirmv

How-To SU Guidelines for problem-free su usage (for Android Developers) Release v1.80 v1.00: October 29, 2012 v1.10: November 7, 2012 v1.20: January 23, 2013 v1.30: February 28, 2013 v1.40: January 20, 2014 - G+ post v1.50: May 18, 2014 - G+ post v1.51: June 16, 2014 v1.60: October 10, 2014 v1.70: November 26, 2014 v1.71: November 27, 2014 v1.80: December 22, 2016 Written by and copyright ©: Jorrit "Chainfire" Jongma Author of SuperSU Initially reviewed by (v1.00): Adam "ChainsDD" Shanks Author of Superuser Home location: http://su.chainfire.eu/  Source codes: https://github.com/Chainfire/libsuperuser Discussion: http://forum.xda-developers.com/showthread.php?t=1962550 All rights reserved  0. Table of Contents 0     Table of Contents  1     Introduction  2     Code: libsuperuser  3     How to call su 3.1     Common pitfalls 3.2     Making the call 3.3     Checking for su availability 3.4     Checking for su version 3.5     Mount namespaces  4     When to call su 4.1     When not to call su 4.2     Detecting the main thread 4.3     Using AsyncTask 4.4     Using IntentService  5     SELinux / SEAndroid (Nov 27, 2014) 5.1     Introduction 5.2     What this means for you 5.3     Detecting SELinux 5.4     Contexts 5.4.1     Basics (Dec 22, 2016) 5.4.2     init vs init_shell vs shell vs supersu (Dec 22, 2016) 5.4.3     Why switch contexts ? 5.4.4     How to switch contexts 5.4.5     When to switch contexts 5.4.6     Filesystem and socket contexts 5.4.7     Direct context manipulation 5.5     Policies 5.5.1     The supolicy tool 5.5.2     Default patches (Dec 22, 2016) 5.5.3     Use caution 5.5.4     Audits 5.5.5     Allow 5.5.6     Other policy statements (Dec 22, 2016)  6     Embedding (Nov 27, 2014) 6.1     Files 6.2     Custom ROMs 6.3     Exploits  X     Miscellaneous updates X.1     Gobbling (Dec 17, 2012) X.2     Full content logging (Jan 23, 2013) X.3     Parameters for su (Jan 23, 2013) X.4     ACCESS_SUPERUSER permission DEPRECATED (Nov 26, 2014) X.5     Tapjacking protection and overlays (Oct 10, 2014) X.6     su.d (Dec 22, 2016)   1. Introduction Since I started writing SuperSU, I have run into a lot of implementation problems. Problems with my own code in SuperSU, undocumented oddities in Android, and problems in other people's apps requiring root. Over time I've gone through a lot of app's source codes (or reversed the binaries) to figure out the root of the problems, and worked with various app authors (from the unknown to the famous) to fix them.  Due to those efforts, it has become clear that most freezes and crashes related to su access - both with SuperSU as well as Superuser - originate from two core problems: how su is called, and when su is called. These cases are not as straightforward as they may sound.  I have been asked by a number of developers to write this guide to provide guidelines and further information on how to get around all these problems - and that is what you are reading. As this is important to all root apps, I have also asked Adam "ChainsDD" Shanks (author of Superuser) to review this document, which he has done.  I don't expect this to be the final word on the matter, or that the code samples will be perfect. I hope this document and the code will provide you the insights needed, and generally be a good start.  - Jorrit "Chainfire" Jongma, author of SuperSU    2. Code: libsuperuser There is source code accompanying this document, in the form of [libsuperuser @ GitHub] (a library project containing reusable code to call su) and [libsuperuser_example @ GitHub] (an example project using that library, and demonstrating some techniques to call su in the background).  The goal of these two projects is specifically not to provide a perfect library catering to your every root need. The goal is to demonstrate techniques you may want to reuse in your root app that work around common problems, in as little code as possible. Advanced techniques like for example maintaining a background su session and using that session when needed are not covered by this article, for the sake of keeping it simple. The library does however include the Shell.Interactive class to make that possible. The code is short, I would advise you to simply read the source for both projects.  Please note that this library behaves slightly differently in debug mode (unsigned APK), providing additional logging and exceptions. Some versions of the ADT do not set/unset debug mode correctly when signing and exporting the final APK. You should definitely check that your exported APKs are not still logging all shell calls before publishing them!    3. How to call su 3.1. Common pitfalls Runtime.exec() and ProcessBuilder It is tempting to use Runtime.getRuntime().exec("su -c [command]");, but you should be aware that [command] should be a single parameter, and thus may require quoting. Unfortunately both quoting the [command] parameter as well as passing the paramaters as separate variables to either Runtime.exec() or ProcessBuilder does not work consistently across all Android versions, and thus this construct should be avoided entirely. It is not impossible to do this right - but there's a high risk of problems.  Outputting a script for su to run As one workaround to the above, various root app authors have taken to writing scripts and then calling su -c /path/to/script to execute all the commands. This does avoid potential parameter passing issues, but you are creating an unneeded temporary file and requires that your writable path does not contain a space. And while the latter is true for the moment, it is a bad idea to depend on that. There may also be SELinux-related issues using this method (see the SELinux section below).  Rapid successive su calls The su call is an expensive operation, and usually involves quite a bit of code being executed, as well as I/O being performed. It is good practise as well as good for performance to batch your commands together as much as possible. Launch as few su processes as you can, and perform as many commands per process as possible.  Many su calls throughout the app's lifecycle Some apps need to make a lot of su calls throughout the app's lifecycle but can't batch these commands together. In such a case you should consider starting an interactive su shell and keeping it alive alongside your app, so you can pipe commands to it as needed. This might have positive effects on the performance and responsiveness of your application.  Hardcoded checks The rights management application is not always /system/app/Superuser.apk. The package name is not a constant either. The su binary's location is not always /system/xbin/su. Many apps have hardcoded checks like these to find su. This is a bad idea and completely unreliable.  Assuming the su binary accepts parameters Not all su binaries support all parameters. Worse, there's a good chance the su binary will start an interactive shell instead of producing an error if an unknown parameter is present (the -v parameter to check version is a good example of this). If you do not anticipate this, your process might never regain control from the su call, and could become stuck.  3.2. Making the call A common method to call su that avoids the known issues listed above is by creating an interactive shell and piping commands to it. This is done by calling Runtime.getRuntime().exec("su");, and retrieving input and output streams from the returned Process object. Doing this is a fairly straight-forward piece of code, but including the debug logs and checks it's a bit long to reproduce here.  The core code is located here: [libsuperuser :: Shell.java @ GitHub]. Shell.run() is a generic call to run shell code, the following more specific (static) utility functions are the ones you will probably end up using:  	List<String> Shell.SH.run(String command) 	List<String> Shell.SH.run(List<String> commands) 	List<String> Shell.SH.run(String[] commands)  	List<String> Shell.SU.run(String command) 	List<String> Shell.SU.run(List<String> commands) 	List<String> Shell.SU.run(String[] commands) The SH variants are used for a non-root shell, where the SU variants are used for a root shell. These calls return a List<String> containing the output of the shell commands. If there was no output, the list is empty, but not null. The result is only null in case an error occured; an access denied may or may not trigger null. These are blocking calls.  Note that in debug compiles, all shell STDIN/STDOUT/STDERR will be logged to logcat, and these calls will (intentionally) crash your app if called from the main thread. The reason for this will be discussed in section 4. When to call su.  3.3. Checking for su availability There are many ways to check whether or not superuser access is available. The two most popular methods are either trying to detect the existance of the su binary or superuser package, or actually trying to run su and seeing what happens. I prefer the latter method, as running su is what you're after no matter where it's at and if you know how to find it - as long as the system does. As further test, run the id command, which prints the ids of the current user and group, so you can use the output to confirm whether or not the shell you have started also really has root rights (the output contains uid=0).  A problem with the id command is that it depends on an external binary that must be present. I have never run into the situation where it wasn't, but to be sure we also issue an echo command that we check for, so that if the id command is not available, we can still know whether a shell was run at all. In the latter case, we assume the shell also has root priviliges - if this ends up being wrong, the user has worse problems than your app not getting root access. If you want to be absolutely sure even in this remote case of a wrongly rooted device, you would have to include its own native binary to perform the check. Of course, if you are including native binaries anyways, it is certainly advised to have them check if they are actually running as root before doing anything else.  [libsuperuser :: Shell.java @ GitHub] provides the following (static) utility function that performs this test for you:  	boolean Shell.SU.available() This is a blocking call.  3.4. Checking for su version While this is not something most root apps need to do, and not all su binaries even support this, this might be something you want to do. Both (recent) Superuser su binaries as well as SuperSU su binaries support the -v (for display) and -V (for internal comparison) parameters to check the version number.  As stated above, a potential problem is that a su binary that doesn't support these parameters may start an interactive shell instead. A work-around for this is to pipe "exit\n" to the su process, this will assure your app gets control back from su.  [libsuperuser :: Shell.java @ GitHub] provides the following (static) utility function that retrieves these version numbers (for the su binary, not the GUI package), or returns null if unable:  	String Shell.SU.version(boolean internal) This is a blocking call.  3.5. Mount namespaces When SuperSU versions 1.50 and up run in daemon mode (Android 4.3+, and rare older Android OEM versions with SELinux set to enforcing), each process' su shell receives an isolated mount namespace. This means that mounts applied in one su shell may not be visible to other processes, except (most) other su shells started by the same parent process (your app). SuperSU in this case also tries to make the sdcards mounts and user-specific mounts available to the su shell, which hopefully makes your job easier.  One of the features of this mount namespace isolation is that it prevents apps from interfering with eachother's mounts so that race conditions between two apps trying to manipulate the same mount (switching /system between read-only and read-write repeatedly, for example) cannot occur, and all works as the app developer expects.  Android itself has offered similar mount namespace isolation for apps from version 4.2. SuperSU versions 1.93 and up support the --mount-master option which (if running in daemon mode) connects your app to a special su shell, which' mount commands are applied to all processes. If you need to 'publicly' apply a mount, use this option.    4. When to call su 4.1. When not to call su The main thread Do not call su when running on the main application thread. The number one reason for freezes and crashes when apps request root access is that su is being called from the main thread. You should consider the su command to be equivalent to a blocking I/O call, like disk or network access. These should not be done from the main thread either - in fact, on newer Android versions, performing network I/O in the main thread will (intentionally) crash your app, and in strict mode the screen will flash red if you perform any disk I/O on the main thread to warn you of your error.  Blocking I/O calls on the main thread are bad because it is completely dependant on external factors how long the call will take. The call may take 100 milliseconds, 30 seconds, or an hour. Even if you think some minor I/O command should never take more than a few milliseconds, you still shouldn't do it from the main thread - you're making a guarantee you can't deliver on, and probably reducing the responsiveness of your app. If the main application thread blocks like this for more than a few seconds, an Application Not Responding (ANR) crash is generated by the system.  Because the su call is pretty much guaranteed to perform blocking I/O itself, and might even need to show its GUI and wait for user input, you cannot make any assumptions about how long it will take for the call to return, and thus you should never call it from the main thread.  I have often received complaints from SuperSU users about the countdown timer in the root access request popup that is (at the time of this writing) enabled by default, and will automatically deny root access after a number of seconds. The only reason this timer was built is because far too many root apps call su from the main thread, and if the popup would not time out and the user wouldn't grant or deny root access relatively quickly, the app that had requested su access would crash with an ANR. The timer helps reduce (but not eliminate) the chances of that happening, but it is merely treating symptoms, not solving problems.  A note on su being a blocking call Most ways to start a new process are actually non-blocking, and the child process runs in a different thread. However, most example and library code either call Process.waitFor or read/write from/to the process's STDIN, STDOUT or STDERR stream. All of these possibilities turn the code that calls su into blocking code, waiting for the su process.  Though it is actually possible to call su in a non-blocking fashion from the main thread, but it is easy to make mistakes that way, and it is often simpler to create a single block of code that handles calling su (like the sample Shell.XX.run code provided) and simply run that from a different thread.  There are however situations where calling su in a non-blocking way is actually preferred (like keeping a su session open in the background and continuously reading and writing from/to it). The sample code does provide the Shell.Interactive class which can be used in this way from the main thread, queueing commands and receiving callbacks, but how to use this class is not documented by this article (read the inline documentation in the source code instead), for the sake of keeping things simple.  BroadcastReceivers Most of the time BroadcastReceivers run on the main thread (something often overlooked), and thus no blocking I/O calls like su should be made. Aside from running on the main thread, the su call itself may need to broadcast an intent to communicate with the GUI. This presents a problem because the latter broadcast may be waiting on the previous broadcast to complete, which it will not do until the onReceive method completes, which is in turn waiting for the su call to complete. This will cause an ANR.  Services As with BroadcastReceivers, many developers at first overlook that a basic Service also executes on the main thread, and is thus also susceptible to ANRs. That is, unless you are using a special Service subclass (like IntentService) that uses a background thread, or added a background thread to the service yourself.  4.2. Detecting the main thread Detecting if your code is running on the main thread is generally done as follows:  	if (Looper.myLooper() == Looper.getMainLooper()) { 		// running on the main thread 	} else { 		// not running on the main thread 	} You might have noticed this code in the Shell.run() call in [libsuperuser :: Shell.java @ GitHub]. If it is detected you are running on the main thread, and the Android project is compiled in debug mode (BuildConfig.DEBUG == true), an exception will be thrown and your application will crash. Hopefully this will convince you to try and run your shell code in a background thread - and not to remove the check!  4.3. Using AsyncTask The AsyncTask class is often used to perform quick and easy background processing for relatively short operations. You can safely call su from the AsyncTask's doInBackground method. Here is an example of a minimal implementation inside an Activity:  	public class MainActivity extends Activity { 		private class Startup extends AsyncTask<Void, Void, Void> { 			@Override 			protected Void doInBackground(Void... params) { 				// this method is executed in a background thread 				// no problem calling su here  				return null; 			} 		}  		@Override 		public void onCreate(Bundle savedInstanceState) { 			super.onCreate(savedInstanceState); 			setContentView(R.layout.activity_main);  			// start background task 			(new Startup()).execute(); 		} 	} Of course, usually you may want to execute some code before and after the background task runs, like showing and hiding a ProgressDialog so the user knows a background action is being performed, and the GUI can't be used until that action completes: [libsuperuser_example :: MainActivity.java @ GitHub] contains a basic example.  Please note that nothing is perfect, and AsyncTask also has some issues. For example, the AsyncTask keeps running until it is finished even if the owning Activity is closed, unless you call the AsyncTask's cancel method, and actually handle that in your doInBackground method (by periodically checking the cancelled state and/or making sure the method is Interruptible). For example, the user rotating the device may cause your Activity to be closed and re-created, re-launching the AsyncTask while the old one is still running. These are not insurmountable issues, but as with any tool you use, you need to know when, how, and when not to use it.  4.4. Using IntentService While AsyncTask is a very useful class you will no doubt often employ, sometimes it's just not the right tool for the job. For example, you can't directly use an AsyncTask from a BroadcastReceiver, because once the onReceive method completes, your process may not have any active components left, and thus may be killed. The correct thing to do for any blocking I/O - including su calls - from a BroadcastReceiver is starting a Service and running the code from there.  However, a standard Service actually runs on the main thread as well, unless you do the extra work to run code in a background thread. The IntentService class however, is an easy to use Service subclass designed specifically to run tasks (expressed by Intents) in a background thread, and automatically stop itself when it runs out of work. Perfect for fire-and-forget style tasks.  Many apps use a BOOT_COMPLETED BroadcastReceiver to perform some processing after the device is booted, without user interaction - a perfect case for IntentService. Your AndroidManifest.xml file will start out looking something like this, with a public (exported) BroadcastReceiver and a private (non-exported) IntentService:  	<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />  	<application ...> 		...  		<receiver android:name=".BootCompleteReceiver"> 			<intent-filter> 				<action android:name="android.intent.action.BOOT_COMPLETED" /> 				<category android:name="android.intent.category.HOME" /> 			</intent-filter> 		</receiver>  		<service android:name=".BackgroundIntentService" />  		... 	</application> Next, we create a very basic IntentService in BackgroundIntentService.java:  	public class BackgroundIntentService extends IntentService { 		public static void launchService(Context context) { 			if (context == null) return; 			context.startService(new Intent(context, BackgroundIntentService.class)); 		}  		public BackgroundIntentService() { 			super("BackgroundIntentService"); 		}  		@Override 		protected void onHandleIntent(Intent intent) { 			// the code you put here will be executed in a background thread 		} 	} All that is left now, is to launch this background service from your BroadcastReceiver, in BootCompleteReceiver.java:  	public class BootCompleteReceiver extends BroadcastReceiver{ 		@Override 		public void onReceive(Context context, Intent intent) { 			BackgroundIntentService.launchService(context); 		} 	} That is all there is to it - once you know how, it's incredibly easy. Of course, this IntentService only performs a single action and doesn't take any parameters: [libsuperuser_example :: BackgroundIntentService.java @ GitHub] contains a more elaborate example.  Instead of running in your BroadcastReceiver on the main thread, your code is now running safely in a background thread without risking an ANR crash. There is however a minor snag. Many apps send Toasts from their BroadcastReceivers - this is a bit harder to do from a background thread due to some minor bugs in the Android framework. Refer to [libsuperuser :: Application.java @ GitHub] for a workaround.    5. SELinux / SEAndroid 5.1. Introduction SELinux is short for NSA Security-Enhanced Linux, and provides fine-grained access control beyond the limits of uid/gid-based access control. SEAndroid is its Android port, which this article will also refer to as SELinux. It is used in one of two modes: permissive mode where policy violations are logged but no action is taken, and enforcing mode where policy violations are prevented from happening.  SELinux has been present in stock Android since 4.3 (API Level 18, JELLY_BEAN_MR2) in permissive mode, and was switched to enforcing mode in Android 4.4 (API Level 19, KITKAT). You should however not depend on these API levels to detect SELinux presence or mode, as there are even some 4.2(!) firmwares in the wild with SELinux built-in and set to enforcing, and the much more common case of 4.4 firmwares running in permissive mode.  5.2. What this means for you As a root app developer, you need to learn how to deal with SELinux. You do not need to know all the ins and outs of this very complex system and the policies used by stock as well as OEM-custom builds, but depending on the type of root app you are making, you may need to spend some extra time testing on different firmwares and devices to get things working reliably.  To make matters worse, SELinux is a moving target, with policies changing between Android versions and even OEMs - the policies on (for example) a Samsung device may be significantly different from the policies on a Nexus device.  If SELinux is set to permissive mode, there is relatively little to worry about, but when it is set to enforcing, the part of your app running as root may run into all sorts of unexpected restrictions.  SuperSU versions 2.11 and newer actively patch SELinux policies from Android 4.4 onwards, circumventing a large number of issues a root app would otherwise run into on an enforcing system. From SuperSU versions 2.23 onwards, by far most cases you would need to write special code for are covered by the newest policy patches. Still, it is good to read the rest of this section so you know how it works if you do run into a special case.  Note that various custom kernels and firmwares switch SELinux back to permissive for Android 4.4 and newer. This completely disables all the new security features SELinux brings, rather than relaxing only the areas we absolutely need to get our apps to function. It is rare for a root app to require further patches to the current SELinux policy beyond what SuperSU already does for you, but if it is needed, an API is provided for that. It is of course up to the user to decide if SELinux should be permissive or not, but it is certainly good practise to make sure your apps work on an enforcing system.  There is a lot of mention of various SuperSU versions. This is only listed for completeness sake, as many details have changed between the first 'retail' Android 4.4 release and the first 'retail' Android 5.0 release. Android 5.0 users should be considered to be running version 2.23 or newer.  5.3. Detecting SELinux While it is probably wise to make sure your code runs regardless of SELinux presence or mode, sometimes you will need to detect if SELinux is present and set to enforcing. This can generally be done by reading /sys/fs/selinux/enforce, which is a world-readable file.  For some example code, see the Shell.SU.shell() call in [libsuperuser :: Shell.java @ GitHub]  5.4. Contexts 5.4.1. Basics The current SELinux context defines which security policies apply to your process. The 'highest' usermode context is generally u:r:init:s0. Contrary to what you may expect, this does not necessarily mean this context has access to everything. Some common contexts you may come in contact with:  u:r:kernel:s0    - Kernel context  u:r:init:s0    - Highest init usermode context u:r:init_shell:s0    - Shell started from init  u:r:shell:s0    - Unpriviliged shell (such as an adb shell)  u:r:system_server:s0    - system_server, u:r:system:s0 on some firmwares u:r:system_app:s0    - System apps u:r:platform_app:s0    - System apps u:r:untrusted_app:s0    - Third-party apps  u:r:recovery:s0    - Recovery  u:r:supersu:s0    - SuperSU's own context, v2.79-SR1+ on Android 7.0+ #4 through #9 can be used with SuperSU's -cn/--context option. With v2.60+ on Android 5.0+, all contexts can be switched to with this option.  The default policies that make up these contexts can be found under external/sepolicy in your Android source tree. Note that OEMs tend to modify these policies, and these policies change between Android version. To assure compatibility, your app should be tested on all API revisions, and if possible on flagship devices from all the major OEMs - if you cannot do this yourself, depend on your core users.  5.4.2. init vs init_shell vs shell vs supersu On firmwares that use SELinux, su is generally implemented as a proxy to a daemon started from init. It is important to note that su shells may run as u:r:init:s0, u:r:init_shell:s0 or u:r:supersu:s0. SuperSU itself should always run as u:r:init:s0 or u:r:supersu:s0 if SELinux is set to enforcing, but not all superuser shells do.  There are various ways to switch contexts, for this specific case switching from u:r:init:s0 to u:r:init_shell:s0 can be done by launching a second sh (be careful not to use mksh as it is being deprecated). If you have a command that needs to be run as u:r:init_shell:s0, just wrap the command in sh -c "...command...", to make sure that it does.  Adb uses the u:r:shell:s0 context, which has very different policies. Be careful not to confuse them!  5.4.3. Why switch contexts ? You might wonder why - if we're already running as the init context, as the root user, and with SuperSU actively patching SELinux policies - do we still need to switch contexts?  If on an enforcing system running SuperSU you run the su command, you do indeed end up in a completely unrestricted shell. Aside from lowlevel manipulations restricted by the bootloader and/or TrustZone (different stories altogether), there is nothing you cannot do in this shell.  Android as a whole is a complex system spanning a number of processes, running as different users and different contexts. The SELinux policy defines the rules for transitions and communication between all these. Just because there are no restrictions for our shell, does not mean no restrictions apply for other processes we need to deal with.  SELinux policies are not bidirectional, so even if we can talk to other processes, those restricted processes may not be able to talk back to us. The solution is to disguise ourselves so those processes are allowed to talk to us: switching contexts.  Of course, we could free those other processes from their SELinux chains as well, but continuing down that line will eventually end up completely negating all the security benefits SELinux can bring. The line has to be drawn somewhere, and for SuperSU the line has been drawn on the basis of necessity. It is not needed to further relax SELinux policies for these commands to be executed, and thus we do not further relax the SELinux policies, even though it is at a slight inconvenience for the root app developers.  5.4.4. How to switch contexts There are several ways to switch contexts. Sometimes executing a certain binary automatically causes a switch (like going from u:r:init:s0 to u:r:init_shell:s0 by running sh from init). Most of the time, you will need to do a more explicit form of context switching.  The runcon command (available in toolbox since select builds of Android 4.1) executes a command as the supplied context argument, assuming you are allowed to make that context transition.  The run-as command (available since Android 2.2.3) will similarly imitate a specific (non-system) package and its context.  Unfortunately, both of these commands cannot generally be depended upon, as they only work in very specific circumstances, and thus, SuperSU versions 1.90 and up support the -cn or --context parameter to execute your su calls in a certain context. See the Shell.SU.shell() call in [libsuperuser :: Shell.java @ GitHub] on how to construct an interactive shell command with that syntax. Right now, only SuperSU supports this, though (please let me know if this situation changes, as I expect it to).  SuperSU versions 1.97 and up are required for Android 4.4+ compatibility of this feature. The u:r:system_server:s0, u:r:system_app:s0, u:r:platform_app:s0, and u:r:untrusted_app:s0 contexts are currently supported from v1.97 onwards, and v2.00 adds u:r:shell:s0 ands u:r:recovery:s0 (if available). My advice is to use the untrusted_app variant wherever possible as it is the least priviliged one and the most likely one to stay available longterm. If you run into issues, try the system_app variant. Note that the system_server variant already doesn't work on all devices out there, so use it only when you absolutely need to and test it well.  Please note that the -cn/--context option is designed to work regardless of platform version and state. If SELinux is not present or set to permissive, the command will simply be executed as the u:r:init:s0 context.  5.4.5. When to switch contexts Context switching is a complicated process, and I advise to use it sparingly. Not only are there a number of processes involved, input and output handling is also done differently from other commands executed through su. Do not be surprised when using an adb shell for testing, if your terminal prompt disappears - the context you just switched to may not support terminal access, as one example.  You will need to find out for yourself what exactly doesn't work as the u:r:init:s0 context and requires a context switch, there is no list of problematic commands. Traditionally, all commands that launch Java-based code however should be run as one of the *_app contexts, though many of them work fine without doing so.  As a (strange) example, let's wipe the interal sdcard, uninstall the com.example.app package, and wipe the Dalvik cache. The following commands would all be piped to a su shell and thus run as root:  	toolbox rm -rf /data/media/* 	su --context u:r:system_app:s0 -c "pm uninstall com.example.app" < /dev/null 	toolbox rm -rf /data/dalvik-cache/* Interesting bits about this example:  su is called again from inside a su shell to minimize risk of running into restrictions for the other commands, and a context switch is only done when needed. u:r:system_app:s0 is used instead of u:r:untrusted_app:s0 as the latter may not be allowed to uninstall an app. The input stream of the context switching su shell is piped from /dev/null, to prevent that command from gobbling up all the data in the input stream (due to the I/O traversing several processes), and thus preventing the wipe of /data/dalvik-cache from happening. This is only needed in select circumstances: when you are piping commands to the su shell, and you send the next command before waiting for the result of the previous command. Note: this specific example is actually no longer relevant from SuperSU version 2.23 onwards, as the pm command now works from the u:r:init:s0 context, but it still illustrates how exactly to run commands as a different context, should the need arise.  5.4.6. Filesystem and socket contexts Previous mentions of context switching have applied to processes. Filesystem objects and sockets however also have an associated SELinux context. In the case of the filesystem, these are easily changed at any time by using the toolbox chcon command. Sockets, however, are another matter - their context can pretty much only be set when the socket is created.  For example, if you are writing your own daemon service, it may be the case that you're communicating between two contexts who cannot normally access eachother's sockets. You could launch the daemon from a different context, but that may lead to other issues. Another option is to change the context of the socket to something both processes can use. This can be done via procfs as listed below. Set the context just before creating the socket, and set it back afterwards.  5.4.7. Direct context manipulation You can manipulate various SELinux contexts for your process directly via procfs: see /proc/self/attr/*. Similarly, global SELinux settings can be accesses via sysfs: /sys/fs/selinux/*.  By far most root app developers should never need to access any of these manually.  5.5. Policies 5.5.1. The supolicy tool The supolicy tool comes with SuperSU versions 2.11 and runs on 4.4 and newer firmwares. Its main use is to modify the current SELinux policy, though it does provide other functionalities as well (which are beyond the scope of this document).  SuperSU runs the supolicy tool when the daemon is started at boot time. Afterwards, it runs all the executables in su.d, and calls setprop supolicy.loaded 1.  The supolicy command's --live parameter patches the current SELinux policy with the core patches for SuperSU, and any additional changes you add on the command line. Patching and reloading SELinux policies is a very expensive call, and should be performed as little as possible. Keeping track of if you have run your patches using a static boolean is advised, as that will keep it's state between app launches, as long as Android doesn't completely clear your app from memory.  The --live parameter takes as many policy statements (explained further below) as you can throw at it, as long as you do not exceed the maximum command line length - which is guaranteed to be >= 4096 bytes. Each policy statement needs to be within a single parameter, though, so you need to wrap them in "quotes". You may separate multiple policy statements inside the quotes with a semicolon; or simply use multiple quoted parameters. Dividing the patches into multiple supolicy calls is possible, but due to the expensive nature of the call, should not be done unless you have a very good reason to. Once the call returns, the policies are active.  It should further be noted that having to patch policies is extremely rare. Ninetynine out of a hundred times you can accomplish what you want to do without patching any policies, so please thoroughly investigate if you need to patch policies at all.  There has been some debate whether or not policy patching needs a special popup or notice in SuperSU. This is not happening because there is nothing special about patching policies. Any process running as root in the u:r:init:s0 context can do it, so if an app has been granted root, they could use their own code to patch the policies rather than using the supolicy tool, and the end user still wouldn't know about it. As a compromise, the supolicy tool does log all policy patches to the Android logs (logcat).  5.5.2. Default patches Aside from various small policy patches that open various communication paths between the su processes, the major changes to the stock policy supolicy makes is making init, init_shell (v2.22+), and recovery permissive.  The logic behind this is that aside from su and the init and recovery processes themselves, nothing should be running as these contexts, so we're not making anything else more exploitable than it already was (contrary to turning the entire system permissive).  If you're wondering why we're not using the AOSP-standard su context, that is because it is filtered out on many 'retail' firmwares.  Starting v2.79-SR1+ on Android 7.0+, instead of the modifications listed above, everything related to SuperSU runs in its own supersu context instead. The init context is only modified enough to let the daemon switch to the supersu context as needed.  5.5.3. Use caution Relaxing security measures in theory always opens up a hole somewhere. The severity of such a hole must be carefully considered before making any changes - it is quite easy to open up major holes. As a rule of thumb, if you're adding allow policies with an *_app class as either source or target class, you're very likely to be doing something you shouldn't, and you should tread carefully.  5.5.4. Audits On most firmwares, if you try to do something that is blocked by SELinux, an audit message appears either in dmesg, logcat, or a log file somewhere on /data. You can use these to track down policies you may need to patch, or at least to get hints where your app's problems lie. Note that audit messages are also produced for permissive contexts, even though nothing is really blocked.  If something is not working as expected in your root app, audit messages are the first thing you should check. A typical audit message may look like this (example from StickMount):  	W/sdcard  (  216): type=1400 audit(0.0:53): avc: denied { getattr } for path="/data/media/0/usbStorage/sda1" dev="sda1" ino=1 scontext=u:r:sdcardd:s0 tcontext=u:object_r:unlabeled:s0 tclass=dir permissive=0 The sdcard process, with source context u:r:sdcardd:s0 does not have the getattr permission (of class dir) on an object (/data/media/0/usbStorage/sda1) with the u:object_r:unlabeled:s0 context. The four variables you need to read in this line are:  source class: sdcardd (scontext=...) target class: unlabeled (tcontext=...) permission class: dir (tclass=...) permission: getattr ({ ... }) 5.5.5. Allow The above example is from StickMount, a root app that allows you to mount USB sticks to a subdirectory of your internal storage. All internal storage reads and writes from 3rd party apps go through the sdcard daemon process, that runs in the sdcardd context. Most mounts are uneventful, as when you mount storage, you can tell the system which security label (context) to use for the files. However, if a filesystem is not supported by the kernel itself (in this case, exFAT on a Nexus 9), the filesystem needs to be mounted via FUSE, which may not support setting a security label. And thus, the files show up as unlabeled, which the sdcardd context is not allowed to touch. When we try to access the mounted directory with a file explorer, the audit message stated above is generated.  What we want to do now is craft an allow policy statement that will fix this issue. We can do so without too much risk, as unlabeled files are not supposed to exist anywhere else on the system, and only sdcard runs as the sdcardd context (it's not like we're patching untrusted_app, which should generally be avoided). Allow policy statements take these form (if you're familiar with .te source policy files, it's very similar):  	allow source-class target-class permission-class permission source-class, target-class, and permission (so not permission-class) can be collections, as denoted by curly brackets:  	allow { source1 source2 } { target1 target2 } permission-class { permission1 permission2 } This is expanded to:  	allow source1 target1 permission-class permission1 	allow source1 target1 permission-class permission2 	allow source1 target2 permission-class permission1 	allow source1 target2 permission-class permission2 	allow source2 target1 permission-class permission1 	allow source2 target1 permission-class permission2 	allow source2 target2 permission-class permission1 	allow source2 target2 permission-class permission2 In our example case, the allow statement becomes:  	allow sdcardd unlabeled dir getattr And it can be applied like this:  	supolicy --live "allow sdcardd unlabeled dir getattr" Trying again to access our mounted directory with a file explorer, results in the following audit message:  	W/sdcard  (  215): type=1400 audit(0.0:60): avc: denied { read } for name="/" dev="sda1" ino=1 scontext=u:r:sdcardd:s0 tcontext=u:object_r:unlabeled:s0 tclass=dir permissive=0 Another missing permission (read) of the same class (dir), so we update our policy statement to:  	supolicy --live "allow sdcardd unlabeled dir { getattr read }" We can continue this process for some time, and we'll end up with a list of policies we need to patch. In this case, you might just want to add all permissions of class dir (and as you would later discover, file as well). But how do you find these? You can go through the external/sepolicy folder in your AOSP source tree, which lists them all, or you can use the supolicy --dumpav command, which lists all current policies, and steal the permissions from there. In the end, these are the policies being applied by StickMount:  	supolicy --live 		"allow sdcardd unlabeled dir { append create execute write relabelfrom link unlink ioctl getattr setattr read rename lock mounton quotaon swapon rmdir audit_access remove_name add_name reparent execmod search open }" 		"allow sdcardd unlabeled file { append create write relabelfrom link unlink ioctl getattr setattr read rename lock mounton quotaon swapon audit_access open }" 		"allow unlabeled unlabeled filesystem associate" 5.5.6. Other policy statements The other policy statements supported by supolicy at this time are:      deny source-class target-class permission-class permission     permissive class     enforcing class     attradd class attribute     attrdel class attribute      v2.79-SR1+:         create class     auditallow source-class target-class permission-class permission     auditdeny source-class target-class permission-class permission     allowxperm source-class target-class permission-class ioctl range All parameters may be collections, aside from the permission-class parameter. The permission parameter may be * to select all (v2.79-SR1+). It is highly unlikely you will ever need any statement other than allow for anything other than testing purposes. That being said, should you come up with a valid reason to use any of these, then it is still advised to only use the statements that relax security (allow, permissive, attradd) rather than further enforce it (deny, enforcing, attrdel). With the latter, you may inadvertently break other root apps running on the device.  If you are reading from the external/sepolicy folder of your AOSP tree, it is also worth noting that neverallow rules are a compile-time thing and these do not show up in the policy files. SELinux denies by default, and only allows what you explicitly state should be allowed. Many of the source statements use collections that are ultimately expanded to a large set of rules. The neverallow statement just makes sure that if a certain allow statement exists, it is removed. The neverallow statement is not stored or applied in the resulting policy file. There's no need to counter these other than allowing whatever your app needs.    6. Embedding 6.1. Files All the files you need are in the latest SuperSU flashable ZIP. The latest 'stable' build can always be retrieved from my server, for the latest 'beta' release you need to check the beta thread in the SuperSU forums.  The installation script inside the ZIP is META-INF/com/google/android/update-binary. This is not a binary as the name suggests, but a shell script, and the standard update ZIP's updater-script file is just a dummy.  This script has comments which document which files go where on which API level, and what their file permissions, ownerhips, and security labels must be. If you have done this exactly right, SuperSU will not complain when you open the app after booting.  6.2. Custom ROMs It is non-trivial to include SuperSU exactly right on your own. It is therefore often easiest to include the latest SuperSU ZIP inside your own flashable ZIP, and chain its installation.  Adding the latest SuperSU zip as supersu/supersu.zip in your ROM's ZIP and appending the folowing lines to the end of your updater-script will do just that:  	package_extract_dir("supersu", "/tmp/supersu"); 	run_program("/sbin/busybox", "unzip", "/tmp/supersu/supersu.zip", "META-INF/com/google/android/*", "-d", "/tmp/supersu"); 	run_program("/sbin/busybox", "sh", "/tmp/supersu/META-INF/com/google/android/update-binary", "dummy", "1", "/tmp/supersu/supersu.zip"); An example ZIP can be downloaded here, which installs SuperSU v2.30 from inside the ZIP, tested with TWRP 2.8.2.1 on a Nexus 9 running Android 5.0.  Additionally, you should see the section about the supolicy tool, as it describes which properties are set and which scripts are called after SuperSU is done patching policies, and root calls are from the unrestricted init context.  6.3. Exploits Over the past years, many exploits have installed SuperSU as their means of persistent root. Often the exploit leaves the system in an unstable state, and a proper and lengthy installation may not be possible. The APK can fix a partial install as long as basic root works. At the time of this writing, that means at least these files need to be present, and for the right architecture and amount of bits for the firmware (see the ZIP script for permissions and API levels):  /system/xbin/su /system/xbin/daemonsu /system/xbin/supolicy /system/lib(64)/libsupol.so Furthermore, daemonsu --auto-daemon needs to be launched somehow on boot. This is generally done via install-recovery.sh, 99SuperSUDaemon, or hijacking app_process([32|64]).  Alternatively, you can include the ZIP and run SuperSU's installation script. For this to work, at the time of this writing, the following commands need to be available on the PATH:  	cat, chmod, chown, cp, dd, echo, grep, ln, losetup, ls, mkdir, mknod, mount, mv, readlink, rm, rmdir, sh, sleep, sync, umount, unzip Additionally, sh needs test support ([ ] square brackets work in if statements). Aside from unzip, all of these should be present on a fully booted 4.3+ Android device. If not, you can provide a (SELinux capable) toolbox or busybox and symlink these commands somewhere on the PATH. Last but not least, /tmp should be writable. If all of these dependencies are met, you can install the ZIP as follows:  	unzip /path/to/supersu.zip META-INF/com/google/android/* -d /tmp 	sh /tmp/META-INF/com/google/android/update-binary dummy 1 /path/to/supersu.zip Due to the script trying things in various ways to support different systems and recovery versions, it will throw errors at you regardless of if the installation is succesfull or not. Just ignore those, reboot, and see if the SuperSU GUI complains when you open it.    X. Updates X.1. Gobbling On December 17 2012, [libsuperuser @ GitHub] has been updated with Gobblers to consume STDOUT and STDERR. These are nothing more than background threads that consume STDOUT and STDERR output as fast as possible. The exact how and why is a long story (if interested, read [When Runtime.exec() won't @ JavaWorld]), but this avoids potential deadlocks when excess output occurs on STDOUT or STDERR. If you are using my library please make sure you are running the latest version. If you're not running my library it may be wise to read the linked article and see if there is a problem with your code.  X.2. Full content logging SuperSU has a feature to log all su command content. While this works fine for most apps, some apps can run into unexpected problems when this feature is used. One example is terminal emulators - these will not show the command prompt if a su shell is started. SuperSU v0.97 (released November 29 2012) and newer support a way to let SuperSU know your app does not function well with full content logging enabled. If you use this method, SuperSU will not enable full content logging for your app if SuperSU has only been configured to log by default. If the user goes into app-specific configuration, the user can still enable full content logging for your app manually. The user will in that case be presented with a warning.  To let SuperSU know your app is not fully compatible with full content logging, add the following to an Activity, Service, or BroadcastReceiver:  	<meta-data android:name="eu.chainfire.supersu.meta.contentlogging.problematic" android:value="true" /> For example:  	<?xml version="1.0" encoding="utf-8"?> 	<manifest xmlns:android="http://schemas.android.com/apk/res/android" ...> 		<application ...> 			<activity ...> 				<intent-filter> 					... 				</intent-filter> 				<meta-data android:name="eu.chainfire.supersu.meta.contentlogging.problematic" android:value="true" /> 			</activity> 		</application> 	</manifest> Adding it to a single Activity, Service, or BroadcastReceiver, is enough to get the entire package excluded from full content logging. There is no need to add it multiple times.  Please note that I will not tolerate abuse of this feature. Full content logging is there for the end-user, and it should not be disabled this way without good reason. I may resort to blacklisting your package from root access altogether if you purposely abuse this.  As far as I know, since SuperSU v1.39 (released July 3 2013), there are no longer any issues with full content logging and certain apps. As such, this section may be obsolete.  X.3. Parameters for su SuperSU originally took its parameter parsing from ChainsDD's Superuser's su binary. On January 11 2012 modifications regarding parameter parsing were pushed to ChainsDD's GitHub [fc7479fab2 @ GitHub]. SuperSU has virtually identical updated parameter parsing from v1.00. While this does allow for some interesting constructs in calling su, you must be aware that not all constructs possible with the original parameter parsing will be interpreted in the same way with the new parameter parsing.  I would also like to point out specifically that (1) the command to execute, following the -c or --command parameter, should be a single parameter, (2) that parameter is not even supported by all su variants available in the wild, and (3) the most reliable way to execute commands as root still remains starting su as a shell and piping commands and output.  Some su variants on some devices do not support anything else than being started as an interactive shell. Exact parameter parsing of the more functional su binaries differs by author and by version, sometimes very subtly. The older the version of Android your app can run on, the higher the chance of running into an exotic or incompatible su binary. You'd be surprised what your app can run into in the wild.  As such, in my personal opinion, it is always wisest and most compatible to simply run su as an interactive shell and pipe commands and output. If you must deviate from this, you should at least thoroughly test your app with (1) the most recent Superuser, (2) a Superuser (and binary) from 2011, (3) SuperSU v0.99 or older, and (4) SuperSU v1.00 or newer.  X.4. ACCESS_SUPERUSER permission DEPRECATED Due to changes in Android 5.0 Lollipop, this permission has been deprecated and is completely ignored from SuperSU v2.30 onwards  From SuperSU version 1.20 and onwards, the android.permission.ACCESS_SUPERUSER permission is declared by SuperSU. All root apps should from now on declare this permission in their AndroidManifest.xml:  	<uses-permission android:name="android.permission.ACCESS_SUPERUSER" /> If this permission is not present, SuperSU will present a warning in its superuser request popup (this is configurable in SuperSU settings). At the time of this writing this permission is not enforced, but it is expected that sometime in the future it will be, and apps requesting root that do not have this permission set will be silently denied.  If this permission is declared, the user will be able to see in the app permissions list that the app requests superuser access.  X.5. Tapjacking protection and overlays SuperSU v2.04 has introduced tapjacking protection to the superuser access prompt. This protection is used in many security-related dialogs in Android. What it comes down to is that the popup will not react to input of it is obscured by any other activity, view, overlay, etc. This prevents a malicious app from displaying a touch-transparent image on top of the popup that would for example switch around the accept and deny buttons.  There are however some legitimate uses for overlays, a common use for them is to adjust display colors. An app displaying such overlays should hide the overlay when the SuperSU popup becomes visible, and show it again. To facilitate this, SuperSU will send a broadcast to apps that have previously been granted root access. So an app like this should indeed disable its overlays and request root access when it is first launched/configured, even if it does not require root!  The following BroadcastReceiver can be used to receive information on when to hide overlays. See [libsuperuser :: HideOverlaysReceiver.java @ GitHub] for a base class explaining the details.  	<receiver android:name=".HideOverlaysReceiver"> 		<intent-filter> 			<action android:name="eu.chainfire.supersu.action.HIDE_OVERLAYS" /> 			<category android:name="android.intent.category.INFO" /> 		</intent-filter> 	</receiver> X.6. su.d Starting v2.22, after supolicy is called to patch SELinux policies, all executables in the /system/su.d/ and /su/su.d/ are executed. Both the directories and the containing scripts and binaries should be chmod 0700. Some firmwares have a similar feature in /system/(etc/)init.d/, though execution of those scripts is both kernel-dependent and they may run before the SELinux policies are patched and/or su is available.  Starting v2.76, these scripts are executed before zygote is started, and are thus in time for most bind-mount purposes, unless the scripts run too long.  These are the guarantees made for su.d:  All SELinux patching is complete before su.d scripts are executed All scripts inside su.d are executed in alphabetical order (0-9a-z) Scripts are run serially. The next one in order is not started until the previous one has finished. Boot does not proceed until all scripts have been executed unless your boot image does not support exec (very rare) unless scripts run longer than the timeout (4 seconds originially, 60 seconds since v2.78-SR1) As the scripts are run serially, if your script does not need to delay the boot process, the script itself should make sure its actions are run asynchronously. For example:  #!/su/bin/sush (     sleep 300     echo done )&      This example is for systemless root, which should use /su/bin/sush as shell interpreter. The () parenthesis cause a sub-process to be created that runs the commands inside them. The & ampersand following the closing parenthesis causes this sub-process to run asynchronously. This allows all the other scripts in su.d to continue running and for boot to continue. 'echo done' will be called after 5 minutes, at which time Android has probably long been up and running.  --- EOF ---

How-To SU
Guidelines for problem-free su usage
(for Android Developers)
Release v1.80
v1.00: October 29, 2012
v1.10: November 7, 2012
v1.20: January 23, 2013
v1.30: February 28, 2013
v1.40: January 20, 2014 - G+ post
v1.50: May 18, 2014 - G+ post
v1.51: June 16, 2014
v1.60: October 10, 2014
v1.70: November 26, 2014
v1.71: November 27, 2014
v1.80: December 22, 2016
Written by and copyright ©:
Jorrit "Chainfire" Jongma
Author of SuperSU
Initially reviewed by (v1.00):
Adam "ChainsDD" Shanks
Author of Superuser
Home location:
http://su.chainfire.eu/

Source codes:
https://github.com/Chainfire/libsuperuser
Discussion:
http://forum.xda-developers.com/showthread.php?t=1962550
All rights reserved

0. Table of Contents
0     Table of Contents

1     Introduction

2     Code: libsuperuser

3     How to call su
3.1     Common pitfalls
3.2     Making the call
3.3     Checking for su availability
3.4     Checking for su version
3.5     Mount namespaces

4     When to call su
4.1     When not to call su
4.2     Detecting the main thread
4.3     Using AsyncTask
4.4     Using IntentService

5     SELinux / SEAndroid (Nov 27, 2014)
5.1     Introduction
5.2     What this means for you
5.3     Detecting SELinux
5.4     Contexts
5.4.1     Basics (Dec 22, 2016)
5.4.2     init vs init_shell vs shell vs supersu (Dec 22, 2016)
5.4.3     Why switch contexts ?
5.4.4     How to switch contexts
5.4.5     When to switch contexts
5.4.6     Filesystem and socket contexts
5.4.7     Direct context manipulation
5.5     Policies
5.5.1     The supolicy tool
5.5.2     Default patches (Dec 22, 2016)
5.5.3     Use caution
5.5.4     Audits
5.5.5     Allow
5.5.6     Other policy statements (Dec 22, 2016)

6     Embedding (Nov 27, 2014)
6.1     Files
6.2     Custom ROMs
6.3     Exploits

X     Miscellaneous updates
X.1     Gobbling (Dec 17, 2012)
X.2     Full content logging (Jan 23, 2013)
X.3     Parameters for su (Jan 23, 2013)
X.4     ACCESS_SUPERUSER permission DEPRECATED (Nov 26, 2014)
X.5     Tapjacking protection and overlays (Oct 10, 2014)
X.6     su.d (Dec 22, 2016)


1. Introduction
Since I started writing SuperSU, I have run into a lot of implementation problems. Problems with my own code in SuperSU, undocumented oddities in Android, and problems in other people's apps requiring root. Over time I've gone through a lot of app's source codes (or reversed the binaries) to figure out the root of the problems, and worked with various app authors (from the unknown to the famous) to fix them.

Due to those efforts, it has become clear that most freezes and crashes related to su access - both with SuperSU as well as Superuser - originate from two core problems: how su is called, and when su is called. These cases are not as straightforward as they may sound.

I have been asked by a number of developers to write this guide to provide guidelines and further information on how to get around all these problems - and that is what you are reading. As this is important to all root apps, I have also asked Adam "ChainsDD" Shanks (author of Superuser) to review this document, which he has done.

I don't expect this to be the final word on the matter, or that the code samples will be perfect. I hope this document and the code will provide you the insights needed, and generally be a good start.

- Jorrit "Chainfire" Jongma, author of SuperSU



2. Code: libsuperuser
There is source code accompanying this document, in the form of [libsuperuser @ GitHub] (a library project containing reusable code to call su) and [libsuperuser_example @ GitHub] (an example project using that library, and demonstrating some techniques to call su in the background).

The goal of these two projects is specifically not to provide a perfect library catering to your every root need. The goal is to demonstrate techniques you may want to reuse in your root app that work around common problems, in as little code as possible. Advanced techniques like for example maintaining a background su session and using that session when needed are not covered by this article, for the sake of keeping it simple. The library does however include the Shell.Interactive class to make that possible. The code is short, I would advise you to simply read the source for both projects.

Please note that this library behaves slightly differently in debug mode (unsigned APK), providing additional logging and exceptions. Some versions of the ADT do not set/unset debug mode correctly when signing and exporting the final APK. You should definitely check that your exported APKs are not still logging all shell calls before publishing them!



3. How to call su
3.1. Common pitfalls
Runtime.exec() and ProcessBuilder
It is tempting to use Runtime.getRuntime().exec("su -c [command]");, but you should be aware that [command] should be a single parameter, and thus may require quoting. Unfortunately both quoting the [command] parameter as well as passing the paramaters as separate variables to either Runtime.exec() or ProcessBuilder does not work consistently across all Android versions, and thus this construct should be avoided entirely. It is not impossible to do this right - but there's a high risk of problems.

Outputting a script for su to run
As one workaround to the above, various root app authors have taken to writing scripts and then calling su -c /path/to/script to execute all the commands. This does avoid potential parameter passing issues, but you are creating an unneeded temporary file and requires that your writable path does not contain a space. And while the latter is true for the moment, it is a bad idea to depend on that. There may also be SELinux-related issues using this method (see the SELinux section below).

Rapid successive su calls
The su call is an expensive operation, and usually involves quite a bit of code being executed, as well as I/O being performed. It is good practise as well as good for performance to batch your commands together as much as possible. Launch as few su processes as you can, and perform as many commands per process as possible.

Many su calls throughout the app's lifecycle
Some apps need to make a lot of su calls throughout the app's lifecycle but can't batch these commands together. In such a case you should consider starting an interactive su shell and keeping it alive alongside your app, so you can pipe commands to it as needed. This might have positive effects on the performance and responsiveness of your application.

Hardcoded checks
The rights management application is not always /system/app/Superuser.apk. The package name is not a constant either. The su binary's location is not always /system/xbin/su. Many apps have hardcoded checks like these to find su. This is a bad idea and completely unreliable.

Assuming the su binary accepts parameters
Not all su binaries support all parameters. Worse, there's a good chance the su binary will start an interactive shell instead of producing an error if an unknown parameter is present (the -v parameter to check version is a good example of this). If you do not anticipate this, your process might never regain control from the su call, and could become stuck.

3.2. Making the call
A common method to call su that avoids the known issues listed above is by creating an interactive shell and piping commands to it. This is done by calling Runtime.getRuntime().exec("su");, and retrieving input and output streams from the returned Process object. Doing this is a fairly straight-forward piece of code, but including the debug logs and checks it's a bit long to reproduce here.

The core code is located here: [libsuperuser :: Shell.java @ GitHub]. Shell.run() is a generic call to run shell code, the following more specific (static) utility functions are the ones you will probably end up using:

	List<String> Shell.SH.run(String command)
	List<String> Shell.SH.run(List<String> commands)
	List<String> Shell.SH.run(String[] commands)

	List<String> Shell.SU.run(String command)
	List<String> Shell.SU.run(List<String> commands)
	List<String> Shell.SU.run(String[] commands)
The SH variants are used for a non-root shell, where the SU variants are used for a root shell. These calls return a List<String> containing the output of the shell commands. If there was no output, the list is empty, but not null. The result is only null in case an error occured; an access denied may or may not trigger null. These are blocking calls.

Note that in debug compiles, all shell STDIN/STDOUT/STDERR will be logged to logcat, and these calls will (intentionally) crash your app if called from the main thread. The reason for this will be discussed in section 4. When to call su.

3.3. Checking for su availability
There are many ways to check whether or not superuser a…

---
## [tgstation/tgstation](https://github.com/tgstation/tgstation)@[160175ee8b...](https://github.com/tgstation/tgstation/commit/160175ee8b2df4a6112fb404a2ddab907ca5a54d)
#### Wednesday 2020-12-09 20:29:31 by silicons

pass_flags handling refactor + rewrites a part of projectiles for the n-th time (#54924)

Yeah uhh this'll probably need testmerging even after it's done because yeah it's a bit big.
If y'all want me to atomize this into two PRs (pass flags vs projectiles) tell me please. Pass flags would have to go in first though, in that case, as new projectile hit handling will rely on pass_flags_self.
Pass flags:

Pass flags handling now uses an atom variable named pass_flags_self.
If any of these match a pass_flag on a thing trying to pass through, it's allowed through by default.
This makes overriding CanAllowThrough unnecessary for the majority of things. I've however not removed overrides for very.. weird cases, like plastic flaps which uses a prob(60) for letting PASSGLASS things through for god knows why.
LETPASSTHROW is now on pass_flags_self
Projectiles:

Not finalized yet, need to do something to make the system I have in mind have less unneeded overhead + snowflake

Basically, for piercing/phasing/otherwise projectiles that go through things instead of hitting the first dense object, I have them use pass_flags flags for two new variables, projectile_phasing and projectile_piercing. Anything with pass_flags_self in the former gets phased through entirely. Anything in the latter gets hit, and the projectile then goes through. on_hit will also register a piercing hit vs a normal hit (so things like missiles can only explode on a normal hit or otherwise, instead of exploding multiple times. Not needed as missiles qdel(src) right now but it's nice to have for the future).

I still need to decide what to do for hit handling proper, as Bump() is still preferred due to it not being as high-overhead as something like scanning on Moved(). I'm thinking I'll make Moved() only scan for cases where it needs to hit a non-dense object - a prone human the user clicked on, anything special like that. Don't know the exact specifics yet, which is why this is still WIP.

Projectiles now use check_pierce() to determine if it goes through something and hits it, doesn't hit it, or doesn't go through something at all (should delete self after hitting). Will likely make an on_pierce proc to be called post-piercing something so you can have !fun! things like projectiles that go down in damage after piercing something. This will likely deprecate the process_hit proc, or at least make it less awful.

scan_for_hit() is now used to attempt to hit something and will return whether the projectile got deleted or not. It will delete the projectile if the projectile does hit something and fails to pierce through it.

scan_moved_turf() (WIP) will be used for handling moving onto a turf.

permutated has been renamed to impacted. Ricocheting projectiles get it reset, allowing projectiles to pierce and potentially hit something again if it goes back around.

A new unit test has been added checking for projectiles with movement type of PHASING. This is because PHASING completely causes projectiles to break down as projectiles mainly sense collisions through Bump. The small boost in performance from using PHASING instead of having all pass flags active/overriding check_pierce is in my opinion not worth the extra snowflake in scan_moved_turf() I'd have to do to deal with having to check for hits manually rather than Bump()ing things.
Movement types

UNSTOPPABLE renamed to PHASING to better describe what it is, going through and crossing everything but not actually bumping.
Why It's Good For The Game

Better pass flags handling allows for less proc overrides, bitflag checks are far less expensive in general.

Fixes penetrating projectiles like sniper penetrators

This system also allows for better handling of piercing projectiles (see above) without too much snowflake code, as you'd only need to modify on_pierce() if you needed to do special handling like dampening damage per target pierced, and otherwise you could just use the standardized system and just set pass flags to what's needed. If you really need a projectile that pierces almost everything, override check_pierce(), which is still going to be easier than what was done before (even with snowflake handling of UNSTOPPABLE flag process_hit() was extremely ugly, now we don't rely on movement types at all.)

---
## [gASK13/AOC](https://github.com/gASK13/AOC)@[87d1f01d41...](https://github.com/gASK13/AOC/commit/87d1f01d411312bf46cc1d1009afa741bee2bb3a)
#### Wednesday 2020-12-09 20:43:16 by gASK13

2020/10: Who would have thought I'd get to use Fractions to vaporize asteroids? BEWARE THE CODE IS UGLY AS HELL!
2020/15: Navigating a blind robot through a maze? Check. Note to self - random walk almost solved this (but it took too long).

---
## [chaosvolt/cdda-arcana-mod](https://github.com/chaosvolt/cdda-arcana-mod)@[2b34a207bc...](https://github.com/chaosvolt/cdda-arcana-mod/commit/2b34a207bc08e2fdb2bbcc0ee5618667962faf5d)
#### Wednesday 2020-12-09 23:49:08 by Chaosvolt

Various updates

* Fixed Sofia's dialogue adding a nonsensical response if you become a
paragon of the veil after having done missions for her.
* Marked some mission-related responses with [MISSION] that weren't.
* Added dialogue for asking Sofia for advice on the survivor camp side
mission.
* Added dialogue to the hermit about Johnathan's final mission.
* Added uncrafts for the talismans.
* Added some lights to the sanguinist holdouts so they're a little
harder to cheese.
* Updated how the candle pedestal in the rural church works to be
slightly less hacky, and so the lit version works as a usable fire.
* Fixed it so the well at the rural church is actually constructed after
a few missions instead of never finishing.
* Set it so the workshop at the rural church also gets a side entrance
for the player's convenience.
* Gave Arcane Blessings the NO_HANDS flag because the mana cost increase
is actually pretty wacky.

---

# [<](2020-12-08.md) 2020-12-09 [>](2020-12-10.md)

