# [<](2023-01-16.md) 2023-01-17 [>](2023-01-18.md)

there were a lot of events recorded by [gharchive.org](https://www.gharchive.org/) of which 2,352,644 were push events containing 3,523,140 commit messages that amount to 282,107,741 characters filtered with [words.py@e23d022007...](https://github.com/defgsus/good-github/blob/e23d022007992279f9bcb3a9fd40126629d787e2/src/words.py) to these 23 messages:


## [tgstation/tgstation](https://github.com/tgstation/tgstation)@[66b7310039...](https://github.com/tgstation/tgstation/commit/66b7310039297843b01c5b14a9b59180909ab52c)
#### Tuesday 2023-01-17 00:07:57 by Rhials

STAY IN THE LIGHT: Adds terrify Nightmare spell, terrified status effect, and a reason to mind the shadows (#72282)

Adds the Terrify spell, and its associated status effect, Terrified.
This new spell is given to antagonist nightmares, as a part of their
brain. The spell only works in those surrounded by darkness, and will
apply the Terrified status effect if successful. Upon being Terrified,
victims will passively gain **Terror Buildup** if they remain in the
dark. As buildup increases, so do the negative effects, including tunnel
vision, panic attacks, dizziness, and more.

There are two primary methods for mitigating terror buildup. The first
is moving into the light, which will reverse the passive terror buildup
and eventually make it go away. The other method is by getting a hug
from a friendly hand, which will reduce buildup significantly.

Getting a hug from an UNfriendly hand (a nightmare, for instance) will
cause the victim to freak out and be briefly knocked down. This can be
spammed on targets who are caught alone in the dark, keeping them in an
unfavorable position (sideways) and adding to the victim's terror
buildup considerably. Escape into the light as soon as possible, or
you'll be pushed to MAXIMUM TERROR BUILDUP.

To what end? Heart failure. Past the soft terror cap (which limits how
much passively generated terror you can make) exists the hard terror
cap. Bypassing that threshold will cause a stress induced heart attack
and knock you unconscious (embarrassing!)

---
## [TaleStation/TaleStation](https://github.com/TaleStation/TaleStation)@[accaa12b08...](https://github.com/TaleStation/TaleStation/commit/accaa12b085232b44e8479fcba18de3d9d3beebd)
#### Tuesday 2023-01-17 01:01:07 by Jolly

Renews a bunch of old roundend new reports that got lost. Plus, some roundend report QoL for cult and revs. (#71284) (#4144)

A few roundend reports got lost from moving to dynamic and other prs.
This PRs re-allows them to occur. Namely: "Wizard Killed" (lost in
dynamic), "Blob nuked" (lost in dynamic), "Cult escaped" (lost in cult
rework), and "Nuke Ops Victory" (station destroyed via nuke) (lost from,
what I can see, an oversight / accidental swap of report values).

Additionally, small roundend report QOL for cult: Removes antag datums
from spirit realm ghosts after being dusted, so they do not show up on
the report. And in reverse, heads of staff who were dusted / destroyed
in revolution rounds are now also shown in roundend reports.

Some of these reports are dead, which is is a shame because I think
they're cool and fun.

:cl: Melbert
qol: Successfully fending off a blob now has a cross station news report
again. More pressing reports will take priority over it, though.
qol: Successfully killing a wizard (and all of their apprentices) now
has a cross station news report again.
qol: If more than half of a cultist team manages to escape on the
shuttle (rather than summoning Nar'sie), they will send a unique cross
station news report. This is still a loss, by the way. Summon Nar'sie!
qol: Nuclear Operatives successfully nuking the station now has its
unique cross station news report again, and no longer uses the generic
"The station was nuked" report.
qol: Nuking the station to stop a blob infection now has a unique cross
station news report again. Good luck convincing admins to allow this.
qol: Cult ghosts from "Spirit Realm" no longer persist on the cult's
team after being desummoned, meaning they will not show up on roundend
report.
qol: Heads of staff will now always show up on revolution roundend
report - even if their body was fully destroyed.
/:cl:

Co-authored-by: MrMelbert <51863163+MrMelbert@users.noreply.github.com>

---
## [willior/Action_RPG_1](https://github.com/willior/Action_RPG_1)@[5a23a57401...](https://github.com/willior/Action_RPG_1/commit/5a23a574016db4c81a320a33ec598d828bea8dd8)
#### Tuesday 2023-01-17 01:27:45 by willior

expanding layer system

first issue was that enemies weren't detecting you on ladder. this was because before, we were comparing z_index of the detected body and the detector's body. being on a ladder changes your z-index. so now, instead of checking z-index, we compare layer. this causes another issue, however, which is that getting on a ladder doesn't change your layer; only getting OFF it does. so if you enter a ladder from above, you are on layer 1 until you exit from the bottom. if you enter a ladder from below, you are on layer 0 until you exit from the top.
what happens now is we set the climbing player's layer when we call climb_start(); we set it to the layer the ladder is on, which is the lower layer (eg, if a ladder provides a transition between layer 0 and layer 1, the ladder is considered to be on layer 0). we do this without calling the Global collision setter functions, and so in order to achieve proper draw order, we add 10 to the the player's z-index on climb_start(), and subtract 10 on climb_end().
we've added the current layer to to the HUD's SubstatDisplay, and emit a "layer_changed" signal when it's changed. this code is messy: the player has a "layer" variable, but it's not used in any mechanics, technically; it's simply an identifier to tell certain methods how to assign values.
anyways, back to the ladder: for some reason, entering a ladder from above does not result in the expected enemy detection behaviour: entering a ladder from above (thus going from layer 1 to 0) should make the player detectable by enemies who are also on layer 0, but they don't aggro you. this is not a big deal, but i'm not sure why a descending player doesn't get monitored by enemies, since an ascending player gets monitored just fine. lemme double check the methods...
code is fine, but i've troubleshot the problem: when a body enters detection range and passes a reference to itself to the detectionZone, it's passing its current value. so what was happening:
if the player is on layer 1 but would be in detection range of a bat on layer 0 when climb_start() is called upon getting on a ladder, then it means the body had ALREADY ENTERED its detectionZone with a different layer value and thus got ignored by the detectionZone. weird problem. maybe one way around this would be to "refresh" the player's body collision somehow, perhaps on climb_start(). though that's extremely hacky and i've already been very hacky to get this system in place, lots of cleanup is already required... maybe i'll just save this for another day.

---
## [TaleStation/TaleStation](https://github.com/TaleStation/TaleStation)@[ce177e7bc7...](https://github.com/TaleStation/TaleStation/commit/ce177e7bc70c474205eea3aec3d6c84fc0efba10)
#### Tuesday 2023-01-17 01:39:52 by TaleStationBot

[MIRROR] [MDB IGNORE] Converts blindness and nearsightedness to status effects, scratches some VERY dumb blindness handling that resulted in mobs becoming "incurably" blind (#4129)

* Converts blindness and nearsightedness to status effects, scratches some VERY dumb blindness handling that resulted in mobs becoming "incurably" blind (#72267)

## About The Pull Request

- Nearsighted is now a grouped status effect.
- Blindness is now a grouped status effect.
   - Eye handling of blindness has improved. 
- When eyes are removed, they now cause you to become blind, rather than
handling it in `update_tint`.
- Being ahealed no longer blinds you for one tick, meaning that black
overlay on aheal is gone.
- Temporary Blindness is now a status effect.
- Both Nearsightedness and Blindness have been exorcised from mob vars
and life chains. This means that we've finally cut 2 procs from life,
`handle_status_effect` and `handle_traits`, and moved both to event
based processing. Wooo optimizations.
- Swapped pacifism status effect to use apply and set helpers. 
- Removed an unused admin toggle that disabled welding helmet tint but
also tint from every clothing item and also blindness from losing your
eyes.
- Clothes now generally all blind their mob more consistently.
- Oculine, eye surgery, and sensory restoration are now no longer the
only way to fix blindness from eye damage. If your eyes are healed
through any other means, it will also heal your blindness.
- Some things that made you blind, such as ling blind sting, no longer
just flat made you blind from eye damage forever. They now cause eye
damage directly, which in turn makes you blind from eye damage, as
expected.
- Pacifists can't eyestab anymore. Eyestabs now have a limit on the
amount of blur applied.
- Refactored some `is_x_covered` procs to accept flags rather than have
a lot of arguments for some silly reason.
- Unit tests for blindness. 

## Why It's Good For The Game

Blindness was exceptionally poorly handled prior, primarily due to the
fact that it was tied to the mob instead of separated out

On top of that the system put a LOT of faith in proper handling of
blindness on the coder's end which was misplaced evidently. Many places
didn't update or handle blindness correctly, or just let people
perma-blind.

Deferring it to a status effect improves this a lot

## Changelog

:cl: Melbert
refactor: Refactored blindness and nearsightedness. Important to note is
that all mobs are naturally blind until their eyes are actually created.
refactor: Refactored "is covered" procs
fix: Less sources of blindness now cause permanent blindness. Includes
the "Blind" Spell and "Blind Sting" from changelings.
admin: Ahealing someone no longer flashes the blind overlay for 1 tick.
admin: I removed an unused (sort of) inaccessible admin verb that
allowed you to toggle the tint from all welding helmets (and clothing)
(and lack of eyes) in existence, let me know if you want similar back
balance: Changeling "Blind Sting" now causes eye damage (enough to
blind) rather than arbitrarily forcing blindness.
balance: Visionloss virus symptom now causes eye damage (enough to
blind) rather than arbitrarily forcing blindness.
balance: Oculine has been reworked slightly. Prior, Oculine arbitrarily
healed blindness and nearsightedness from eye damage reagrdless of how
damaged the eyes were, and applied blur on success. Now, Oculine just
heals eye damage, and blindness / nearsightedness is restored in the
process. There is now a probability every tick that eye blur is applied
based on how pure the oculine is while healing very damaged eyes.
balance: Pacifists can no longer eyestab.
balance: Any clothing item that covers your eyes contributes to getting
the bonus while sleeping, and to removing temporary blindness faster
/:cl:

* Converts blindness and nearsightedness to status effects, scratches some VERY dumb blindness handling that resulted in mobs becoming "incurably" blind

* modular stuff

Co-authored-by: MrMelbert <51863163+MrMelbert@users.noreply.github.com>
Co-authored-by: Jolly-66 <70232195+Jolly-66@users.noreply.github.com>

---
## [vr-voyage/shadermeowmeow](https://github.com/vr-voyage/shadermeowmeow)@[8ccdb76ff8...](https://github.com/vr-voyage/shadermeowmeow/commit/8ccdb76ff8ff65d9dd6705ca423622f849716873)
#### Tuesday 2023-01-17 01:42:13 by Voyage

Midway commit : Reimplementing the shader in GDScript

Since I'm not sure that my gray decoder is correct,
I'm actually using RenderDoc to step through the
ShaderMotion shader in a Unity Scene, and reimplement
each step in GDScript while checking that the algorithms
are sending back the same values.

This of course lead to some issues, texture sampling
from the CPU with Godot 4 is a pain when the Image is
compressed for a reason or another.

But the most painful is reading horrible HLSL one-liners.
HLSL is **veeeerry** lenient in its syntax and allows
for extremely hard to read code, especially when it comes
to conditional evaluation, where the condition works
"per-component" and you have no idea about the priority
of evaluation of the various parts, like :

  // Example of interview worthy HLSL one-liner
  a.xz = bool_value && round(x) == float2(0, 1) ? b.zw : 1-round(x);

I'll let you meditate on that one.
Hint : Conditions evaluation work PER-COMPONENT.
Fuck HLSL for allowing that kind of crap.

Signed-off-by: Voyage <voyage@miouyouyou.fr>

---
## [Offroaders123/Dino-TSX](https://github.com/Offroaders123/Dino-TSX)@[22b8fb0a50...](https://github.com/Offroaders123/Dino-TSX/commit/22b8fb0a5031a2582ab5f8634f43dd3b4f95af55)
#### Tuesday 2023-01-17 02:16:35 by Offroaders123

Web Component JSX

Further expanded my own JSX factory setup! Did some testing with how React handles typing for JSX elements, and used that to make mine more consistent with that.

I noticed that all JSX components are of the type `JSX.Element` in regular JSX, even with a more specific tag being passed in. So I realized that `HTMLElement` would probably be the fitting type for the vanilla version here.

When I tried to use SVG elements though, I found out that they are under a different tag map interface, so I had to account for that inside of the factory definitions.

https://stackoverflow.com/questions/41557309/typescript-jsx-without-react
https://www.typescriptlang.org/docs/handbook/jsx.html

I haven't gotten Component types working yet. I'm not totally sure how all of this should work quite yet, so I'm learning little by little what the best way to set it up should be.

With this update, I noticed that the properties on the elements are being properly type-checked, which is awesome! But it makes it hard for some properties, as right now I'm getting the types from the element classes themselves, which means for attributes like `part`, it doesn't like when you assign a string to it, because it's of the `DOMTokenList` type, which uses methods to be interacted with instead.

So I think Texsaur was smart in using separate definitions for the element attributes themselves, which makes it behave more like you're working with HTML elements and their direct attributes, rather than their properties, which are more complex.

Yeah, I'm suprised how semi-nice this has worked so far. I didn't expect you to be able to customize the behind the scenes implementation of JSX like this! It's not quite too straightforward right away though. I'm suprised there haven't been more projects to try and do it like this, it seems like a fairly nice dev setup to structure it like this. It is a bit quirky though. Maybe because I'm trying to use it for something other than React? Haha.

I am curious about trying to use JSX for NBT though, that sounds kind of interesting. It sounds very neat, and very ugly at the same time XD

I was having some trouble with `git commit --amend --no-edit --date=""` today, I can't get it to work for the life of me! Really annoying. Not sure what's going wrong with it. I put in multiple date formats with the time and date that I want to use, and they all either error out during the Rebase, or they put a super wonky date on the commit instead. My old scripts that I've been using for a while don't seem to work anymore. Aggh! If you have any info about it, please let me know. It seems to have been more broken in the last year or so. A newer update to Git maybe? It used to only not work on my Chromebook, so I would go to my Mac. Now my Mac is having the same weird issues on there too :(

When in doubt, I'ma keep coding :)

---
## [willior/Action_RPG_1](https://github.com/willior/Action_RPG_1)@[bb8c853274...](https://github.com/willior/Action_RPG_1/commit/bb8c85327461a8ba75b221bf690942d9526812db)
#### Tuesday 2023-01-17 02:48:00 by willior

hardball working step 1

the new system provides easy access to whatever layer needed by getting a reference to the thing that spawned it - for example, when the player spawns a projectile, to know which node to which to add it as a child, we call Global.layer_nodes[player.layer].add_child(projectile).
collision is not set yet - i've yet to decide how i want to handle this. i think i will make certain formulas interact with the current layer, and some not. maybe some formulas, like ones that drop from the sky (eg. Thunder Strike) will only be able to interact with the uppermost layer. the hardball will simply collide with the first world collision it hits - but other formulas will be able to transcend layers and hit distant enemies/objects.
actually, one thing comes to mind: if the world collision is a cliff, you should technically be able to throw it off the side. not sure how to handle that, honestly, but i'm thinking 1 of 2 ways:
1. incorporate one-way collisions, somehow;
2. create new physics logic specifically for cliffs... no, wait... it's going to need one-way collision, either way. well fuck, guess i'll learn how to do that... but still need a system too. maybe it can be built-in to the tile via custom data?

---
## [Bawhoppen/-tg-station](https://github.com/Bawhoppen/-tg-station)@[58b61a17a7...](https://github.com/Bawhoppen/-tg-station/commit/58b61a17a78e90ea9da91351572abee9a4f93ccb)
#### Tuesday 2023-01-17 02:58:23 by Jacquerel

Basic Mob Carp: Retaliate Element (#71593)

## About The Pull Request

Adds an Element and AI behaviour intended to replicate the "retaliate"
behaviour which made up an entire widely-populated subtype of simple
mobs.
The behaviour is pretty simply "If you fuck with me I fuck with you".
Mobs with the component will "remember" being attacked and will try to
attack people who attacked them, until they lose sight of those people.
They don't have very long memories so breaking line of sight is enough
to remove you from their grudge list.
The implementation unfortunately requires registering to 600 different
"I have been attacked by X" signals but c'est la vie.

It will still be cleaner than
`/mob/living/simple_animal/hostile/retaliate/clown/clownhulk/honcmunculus`
and `mob/living/simple_animal/hostile/retaliate/bat/sgt_araneus`.

I attached it to the pig for testing and left it there because out of
all the farm animals we have right now, a pig would probably get pissed
off if you tried to kill it. Unfortunately it's got a sausage's chance
in hell of ever killing anyone.

## Why It's Good For The Game

It doesn't have much purpose yet but as we make more basic mobs this is
going to see a **lot** of use.

## Changelog

:cl:
add: Basic mobs have the capability of being upset that you kicked and
punched them.
add: Pigs destined for slaughter will now ineffectually attempt to
resist their fate, at least until they lose sight of you.
balance: Bar bots are better at noticing that you're trying to kill
them.
/:cl:

---
## [Prashant-1695/kernel_xiaomi_lavender-4.19](https://github.com/Prashant-1695/kernel_xiaomi_lavender-4.19)@[cfbef5e7d0...](https://github.com/Prashant-1695/kernel_xiaomi_lavender-4.19/commit/cfbef5e7d0f5b5b9f434346556af892073907602)
#### Tuesday 2023-01-17 03:10:35 by Angelo G. Del Regno

Makefile.lib: Lower kernel gzip compression to fastest

You're reading this - so you're trying to understand "JUST WHY OMG".
That's already a good step.

First of all, this is a downstream kernel - always keep that in mind!
Now, this kernel is targeting new *very powerful* Qualcomm platforms
like SM8250 and the Sony Edo platform - which has a very fast UFS card.

Keep in mind that the bootloader sets the CPU at a frequency that is
slightly faster than the "in the middle" ones, which is anyway not
veeeery fast - but that's good, really. I agree.

So.. check this out:   for Image.gz-dtb.....
COMP_LEVEL    SIZE
9             20116171
5      	      20220479
2      	      20940223
1      	      21231290

Remember again that we're loading from a UFS card and that
we are loading ~1.1MB more out of a 20MB file.
If you're smart enough you surely know already about RAM and CPU
overhead of very high compression levels.

If you still disagree with what I just did, read this commit description
another 20 times, or more, until you understand it. :)))

Signed-off-by: Tashfin Shakeer Rhythm <tashfinshakeerrhythm@gmail.com>
Signed-off-by: ImPrashantt <prashant33968@gmail.com>

---
## [Offroaders123/Num-Text-Component](https://github.com/Offroaders123/Num-Text-Component)@[a08a5304f0...](https://github.com/Offroaders123/Num-Text-Component/commit/a08a5304f0654faa036b46b18ea0d20da11da34d)
#### Tuesday 2023-01-17 03:45:25 by Offroaders123

HypeScript: The Never-Ending Saga

Haven't brought my latest learnings over here in a while! I have been using TypeScript a ton in my other projects. I did a lot of work to Menu Drop in TypeScript, and NBTify is completely TypeScript-based now! It's really awesome.

Since I have been experimenting with publishing to npm, I think type definitions are a key part to making a library really strong for your users. It works great to use it to develop the library too.

Fully brought over Smart Text Editor to be fully JSDoc-typed out, which is a massive step forward! Since that's the case now, it really does make sense for my other projects that it relies on, to also be typed out (This one, Menu Drop, and eventually NBTify once I add NBT editing support in STE).

A good amount of these upcoming changes I have recently been looking into for Menu Drop, and I think they will also work great for Num Text, too.

Once I have both of them up and running a bit more, I think I am going to publish both Num Text and Menu Drop to npm too! Then I can import them in my projects with CDN URLs, and also use HTML Import Maps to reference them by their module names, rather than always by a CDN URL. ES Module Shims is an outstanding project to help make this possibly, in the few remaining browsers where Import Maps aren't supported yet. Using Import Maps, I can also safely depend on writing ES Module code that can run both directly in the browser, *and* in NodeJS, without any module transpilation!

https://github.com/guybedford/es-module-shims

Note, I know I'm still using TypeScript here, so I'm still transpiling that down to JavaScript to make it runnable, but you get type definitions out of that, which is a super huge feature. In my projects where I tend to be using type and interface definitions a lot, it feels more justified to use TypeScript directly. So far, JSDoc documentation types have worked really well for implementation code, where it depends on already strongly-typed libraries to work off of.

Just last night, I started looking into making a custom JSX factory which transpiles down to `document.createElement()` calls, and it's actually not too shabby! That's another super cool idea to make. Gonna see how that goes. All of this is really coming together super neat! I wonder if I could make a library or framework out of this :)

As Fireship says (I don't remember what he says), "A new JavaScript framework is born NaN times a day!"

---
## [rombodawg/Pong.ai](https://github.com/rombodawg/Pong.ai)@[44223a67df...](https://github.com/rombodawg/Pong.ai/commit/44223a67dfa1fd1bfaf935c16dde6e6791aaeff8)
#### Tuesday 2023-01-17 04:39:08 by rombodawg

Add files via upload

Controls: 
W to move up
S to move down
Click with mouse on restart if you win or lose
If ball gets stuck somehow before end screen please close the game and open again

This is a game, and really more of an art piece. The point of it is to show the advancement of the common ai accessible to anyone who has access to the internet.  This is a game of pong, its diffrent from normal pong, firstly because its very weird the ai you play against might as well be cheating and its very hard to beat. But the real reason why its diffrent is because the entire script for the game was written by an Ai (artificial intelligence) chatbot on the chat.openai website. The game was made in unity by me and 1 other friend. But the only thing we did was place the objects, write some text for the end screen, you win and lose screen. And make extremely minor adjustments to the game that would account for less than 5% of any actual coding done by a human being. All of the rest of the scripting/coding was done by asking an ai in the chat bot website a promt. Like "I want the game to do this" And the ai spitting out a script, which i then copied and pasted into unity. Please enjoy this awful game, and enjoy your future in our dystopian society ♥

---
## [Offroaders123/Num-Text-Component](https://github.com/Offroaders123/Num-Text-Component)@[6727ea7b93...](https://github.com/Offroaders123/Num-Text-Component/commit/6727ea7b93f2fbca5af7ab6864c20242fc9e01f9)
#### Tuesday 2023-01-17 05:03:42 by Offroaders123

CSS Modules + ES Module Shims

So happy to finally be able to use CSS Modules! This is all thanks to ES Module Shims, which brings support to all other browsers that don't have it built in just yet.

This has been the ideal setup for my Web Components for some time now, and it really helps take Web Components to a new level! It's great to just be able to bridge the missing support gaps with polyfills before support is fully there.

I tried adding these directly into the library code itself, but it looks like you have to run it before your module with modern code is run, because it essentially has to be built with ES Module Shims before you can run it directly. So, if you import the polyfill in your script with modern code, then it can't polyfill your script because it's already loaded in, and ready to run. So a nice way around this is to simply have a module script run before your actual app code, which runs the polyfills before your app code is read. I didn't like having multiple script tags for all of these, so I figured out that I can just run them all in one single module tag, thanks to dynamic imports, which don't have to run at the beginning of the module. You can first set the shim polyfill options on the window, then run the polyfills after that. Works like a shim! XD

https://web.dev/css-module-scripts/
https://github.com/guybedford/es-module-shims

https://web.dev/constructable-stylesheets/
https://github.com/calebdwilliams/construct-style-sheets

It really was a while ago that I first heard about Constructable Stylesheets and CSS Modules. It reminds me of coding during school on my Chromebook (not yet Linux, lol), when we came back from the initial COVID shutdown. That was a while ago! It's when I first found out about https://web.dev, so looking at the explainers for the two specs (the image with the shipping containers especially) really brings me back to then :) I've some such a long way in coding since then though, I'm super proud of that! Always trying to find better ways of doing things :)

Oh yeah, very briefly looked into Vite the other day. It sounds as close to what I'm looking for in terms of mainstream build pipelines out there, it looks great! ESBuild, with ES Modules, TypeScript, ooh man. Getting React working there sounds like the place where I'll probably learn React too, since I have tried my hardest to stay away from bloated build pipelines as much as possible, as you can probably tell by now. Eventually I want to try Theo's Create T3 App too, I think it's a little too big-brained for me as of now XD Gonna keep the same pace I've been going so far, to get the full picture of everything along the way.

---
## [FaustinOdong/Website.js](https://github.com/FaustinOdong/Website.js)@[14d7e62668...](https://github.com/FaustinOdong/Website.js/commit/14d7e62668c22bad2febdeb8246d32e9475eb6ee)
#### Tuesday 2023-01-17 09:10:02 by FaustinOdong

<html>
<head>
<style>
body {
  background-color: lightblue;
}
</style>
</head>
<body>

 !DOCTYPE html>
<html>
<body>

<h2>Narcissistic Personality Disorder?</h2>

<p>What is Narcissistic Personality Disorder?</p>

<p id="demo" style="display:none">Narcissistic personality disorder is a mental health condition in which people have an unreasonably high sense of their own importance. They need and seek too much attention and want people to admire them. People with this disorder may lack the ability to understand or care about the feelings of others. But behind this mask of extreme confidence, they are not sure of their self-worth and are easily upset by the slightest criticism.

A narcissistic personality disorder causes problems in many areas of life, such as relationships, work, school or financial matters. People with narcissistic personality disorder may be generally unhappy and disappointed when they're not given the special favors or admiration that they believe they deserve. They may find their relationships troubled and unfulfilling, and other people may not enjoy being around them.

Treatment for narcissistic personality disorder centers around talk therapy, also called psychotherapy.

Narcissistic personality disorder affects more males than females, and it often begins in the teens or early adulthood. Some children may show traits of narcissism, but this is often typical for their age and doesn't mean they'll go on to develop narcissistic personality disorder.</p>

<button type="button" onclick="document.getElementById('demo').style.display='block'">Click Me!</button>

<p>Symptoms<p/>

<p id="demo 2" style="display:none">Symptoms of narcissistic personality disorder and how severe they are can vary. People with the disorder can:

Have an unreasonably high sense of self-importance and require constant, excessive admiration.
Feel that they deserve privileges and special treatment.
Expect to be recognized as superior even without achievements.
Make achievements and talents seem bigger than they are.
Be preoccupied with fantasies about success, power, brilliance, beauty or the perfect mate.
Believe they are superior to others and can only spend time with or be understood by equally special people.
Be critical of and look down on people they feel are not important.
Expect special favors and expect other people to do what they want without questioning them.
Take advantage of others to get what they want.
Have an inability or unwillingness to recognize the needs and feelings of others.
Be envious of others and believe others envy them.
Behave in an arrogant way, brag a lot and come across as conceited.
Insist on having the best of everything — for instance, the best car or office.</p>
<button type="button" onclick="document.getElementById('demo 2').style.display='block'">Click Me!</button>

<p id="demo 3" style="display:none">The exact cause of Narcissistic Personality Disorder (NPD) is not known, but it is thought to be a combination of genetic and environmental factors. Some theories suggest that childhood experiences, such as excessive pampering, neglect, or abuse, may contribute to the development of NPD.

Treatment for NPD typically involves long-term psychotherapy with a therapist who has experience in treating personality disorders. The goal of therapy is to help the person with NPD understand the impact of their behavior on others and to learn to relate to others in a more empathetic and healthy way. Medications, such as antidepressants, may also be prescribed to help manage symptoms.

It is important to note that individuals with NPD often have difficulty recognizing that they have a problem and may be resistant to seeking treatment. Therefore, it may take a lot of effort from loved ones or a therapist to convince them to seek help.</p>
<button type="button" onclick="document.getElementById('demo 3').style.display='block'">Click Me!</button>

<p>At the same time, people with narcissistic personality disorder have trouble handling anything they view as criticism. They can:</p>

<p id="demo 4" style="display:none">Become impatient or angry when they don't receive special recognition or treatment.
Have major problems interacting with others and easily feel slighted.
React with rage or contempt and try to belittle other people to make themselves appear superior.
Have difficulty managing their emotions and behavior.
Experience major problems dealing with stress and adapting to change.
Withdraw from or avoid situations in which they might fail.
Feel depressed and moody because they fall short of perfection.
Have secret feelings of insecurity, shame, humiliation and fear of being exposed as a failure.</p>

<button type="button" onclick="document.getElementById('demo 4').style.display='block'">Click Me!</button>

<p> WHEN TO SEE A DOCTOR</p>

<p id="demo 5" style="display:none">People with narcissistic personality disorder may not want to think that anything could be wrong, so they usually don't seek treatment. If they do seek treatment, it's more likely to be for symptoms of depression, drug or alcohol misuse, or another mental health problem. What they view as insults to self-esteem may make it difficult to accept and follow through with treatment.

If you recognize aspects of your personality that are common to narcissistic personality disorder or you're feeling overwhelmed by sadness, consider reaching out to a trusted health care provider or mental health provider. Getting the right treatment can help make your life more rewarding and enjoyable.</p>

<button type="button" onclick="document.getElementById('demo 5').style.display='block'">Click Me!</button>

<p>Causes</p>

<p id="demo 6" style="display:none">It's not known what causes narcissistic personality disorder. The cause is likely complex. Narcissistic personality disorder may be linked to:

Environment — parent-child relationships with either too much adoration or too much criticism that don't match the child's actual experiences and achievements.
Genetics — inherited characteristics, such as certain personality traits.
Neurobiology — the connection between the brain and behavior and thinking.</p>

<button type="button" onclick="document.getElementById('demo 6').style.display='block'">Click Me!</button>


</body>
</html>

---
## [ElsonM/AbapToTheFuture4](https://github.com/ElsonM/AbapToTheFuture4)@[ae9d06816a...](https://github.com/ElsonM/AbapToTheFuture4/commit/ae9d06816a6d571922cc1c0baac0778101979571)
#### Tuesday 2023-01-17 15:12:11 by EMECO

Frankenstein; or, The Modern Prometheus

Mary Shelley traveled through Europe in 1815 long the river Rhine in Germany, stopping in Gernsheim, 17 km away from Frankenstein Castle, where two centuries before, an alchemist engaged in experiments. She the journeyed to the region of Geneva, Switzerland, where much of the story takes place. Galvanism and occult ideas were topics of conversation among her companions, parcticularly her future husband Percey Shelley. In 1816, Mary, Percey and Lord Byron had a competition to see who could write the best horror story. After thinking for days, Shelley was inspired to wite Frankenstein after imagining a scientist who created life and was horrified by what he had made.

---
## [git-for-windows/git](https://github.com/git-for-windows/git)@[857abe69a9...](https://github.com/git-for-windows/git/commit/857abe69a997d9671354eeca0fd5b2f1e2a52505)
#### Tuesday 2023-01-17 18:06:42 by Johannes Schindelin

windows: ignore empty `PATH` elements

When looking up an executable via the `_which` function, Git GUI
imitates the `execlp()` strategy where the environment variable `PATH`
is interpreted as a list of paths in which to search.

For historical reasons, stemming from the olden times when it was
uncommon to download a lot of files from the internet into the current
directory, empty elements in this list are treated as if the current
directory had been specified.

Nowadays, of course, this treatment is highly dangerous as the current
directory often contains files that have just been downloaded and not
yet been inspected by the user. Unix/Linux users are essentially
expected to be very, very careful to simply not add empty `PATH`
elements, i.e. not to make use of that feature.

On Windows, however, it is quite common for `PATH` to contain empty
elements by mistake, e.g. as an unintended left-over entry when an
application was installed from the Windows Store and then uninstalled
manually.

While it would probably make most sense to safe-guard not only Windows
users, it seems to be common practice to ignore these empty `PATH`
elements _only_ on Windows, but not on other platforms.

Sadly, this practice is followed inconsistently between different
software projects, where projects with few, if any, Windows-based
contributors tend to be less consistent or even "blissful" about it.
Here is a non-exhaustive list:

Cygwin:

	It specifically "eats" empty paths when converting path lists to
	POSIX: https://github.com/cygwin/cygwin/commit/753702223c7d

	I.e. it follows the common practice.

PowerShell:

	It specifically ignores empty paths when searching the `PATH`.
	The reason for this is apparently so self-evident that it is not
	even mentioned here:
	https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_environment_variables#path-information

	I.e. it follows the common practice.

CMD:

	Oh my, CMD. Let's just forget about it, nobody in their right
	(security) mind takes CMD as inspiration. It is so unsafe by
	default that we even planned on dropping `Git CMD` from Git for
	Windows altogether, and only walked back on that plan when we
	found a super ugly hack, just to keep Git's users secure by
	default:

		https://github.com/git-for-windows/MINGW-packages/commit/82172388bb51

	So CMD chooses to hide behind the battle cry "Works as
	Designed!" that all too often leaves users vulnerable. CMD is
	probably the most prominent project whose lead you want to avoid
	following in matters of security.

Win32 API (`CreateProcess()`)

	Just like CMD, `CreateProcess()` adheres to the original design
	of the path lookup in the name of backward compatibility (see
	https://learn.microsoft.com/en-us/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessw
	for details):

		If the file name does not contain a directory path, the
		system searches for the executable file in the following
		sequence:

		    1. The directory from which the application loaded.

		    2. The current directory for the parent process.

		    [...]

	I.e. the Win32 API itself chooses backwards compatibility over
	users' safety.

Git LFS:

	There have been not one, not two, but three security advisories
	about Git LFS executing executables from the current directory by
	mistake. As part of one of them, a change was introduced to stop
	treating empty `PATH` elements as equivalent to `.`:
	https://github.com/git-lfs/git-lfs/commit/7cd7bb0a1f0d

	I.e. it follows the common practice.

Go:

	Go does not follow the common practice, and you can think about
	that what you want:
	https://github.com/golang/go/blob/go1.19.3/src/os/exec/lp_windows.go#L114-L135
	https://github.com/golang/go/blob/go1.19.3/src/path/filepath/path_windows.go#L108-L137

Git Credential Manager:

	It tries to imitate Git LFS, but unfortunately misses the empty
	`PATH` element handling. As of time of writing, this is in the
	process of being fixed:
	https://github.com/GitCredentialManager/git-credential-manager/pull/968

So now that we have established that it is a common practice to ignore
empty `PATH` elements on Windows, let's assess this commit's change
using Schneier's Five-Step Process
(https://www.schneier.com/crypto-gram/archives/2002/0415.html#1):

Step 1: What problem does it solve?

	It prevents an entire class of Remote Code Execution exploits via
	Git GUI's `Clone` functionality.

Step 2: How well does it solve that problem?

	Very well. It prevents the attack vector of luring an unsuspecting
	victim into cloning an executable into the worktree root directory
	that Git GUI immediately executes.

Step 3: What other security problems does it cause?

	Maybe non-security problems: If a project (ab-)uses the unsafe
	`PATH` lookup. That would not only be unsafe, though, but
	fragile in the first place because it would break when running
	in a subdirectory. Therefore I would consider this a scenario
	not worth keeping working.

Step 4: What are the costs of this measure?

	Almost nil, except for the time writing up this commit message
	;-)

Step 5: Given the answers to steps two through four, is the security
	measure worth the costs?

	Yes. Keeping Git's users Secure By Default is worth it. It's a
	tiny price to pay compared to the damages even a single
	successful exploit can cost.

So let's follow that common practice in Git GUI, too.

Signed-off-by: Johannes Schindelin <johannes.schindelin@gmx.de>

---
## [Villavu/SRL-Development](https://github.com/Villavu/SRL-Development)@[0e9d69914c...](https://github.com/Villavu/SRL-Development/commit/0e9d69914cafa0e7089ca9eb2bd95febbb069505)
#### Tuesday 2023-01-17 18:10:15 by Torwent

Bug fixes and minor additions (#65)

* fix: Mouse.DragTo was failing sometimes because the click was not registering

This is pretty much the same issue Inventory.ShiftDrop() had.

* fix: fix to avoid issues with zoom roundings

This might be my personal opinion but I think this should have a -1/+1 threshold due to the zoom levels that do not exist in the slider.

Can't quite remember them now!
14 I think was one of them.
So you either are 13 zoom or 15.)

* fix: Make failfafe

Because the make menu is dynamic, this can avoid potential crashes.
E.G. if you are cooking with several types of food, the make menu, will change as the number of different raw foods you have available change.

* feat: add methods to get the display name box

- This is useful to hide people usernames in screenshots.

* feat: added a OnSleeping task

I don't know why this was not done in the first place?

I mean, yes it's supposed to have the account sleeping but I personally would like to update my proggies while sleeping.

* feat: mm2ms 1500 backport

This is really unrelated to walker tbh but it's something I've also decided to backport.

This brings the changes I've proposed and submited for MM2MS in the Simba1500 branch where you can pass in the size of the final rectangle in tiles.
E.G:
```pascal
TRSMinimap.VecToMsRect(Vec: Vector3; WESize, NSSize: Double = 1; Roll:Single=$FFFF);

TRSMinimap.GetTileMS(Loc: TPoint; TileVector: Vector3 = [1, 1, 0]; Offset: Vector2 = [0, 0]; Roll: Single = $FFFF);
```

BREAKING CHANGE: This breaks compatibility with old SRL scripts that used the updated methods because what used to be passed as **roll** is not something else.
BREAKING CHANGE: `TRSMainScreen.ConvertDistance()` was renamed to `TRSMainScreen.NormalizeDistance()`.
				 This was renamed by Olly in Simba1500, I guess it's an optional change but I think the rename
				 makes sense and since we are breaking compatibility, might as well bring things closer to 1500
				 already so people have less headaches later.
				 We could also optionally keep both methods and mark this one as deprecated. I'll wait for your feedback.
				 P.S. The method was actually rewrotten in 1500 but was not worth backporting, so I just renamed it!

* fix: update `MainScreen.ConvertDistance()` references to `MainScreen.NormalizeDistance()`

* refactor: added `Contains` methods to equipment and inventory.

I've also left a comment on the PR after the last commit because I forgot to mention TRSBank.ContainsItem().

Anyway, this has the same reasoning. This is optional but I would like to bring the SRL1400 API closer to SRL1500 API.

Old methods are kept and marked with a comment as deprecated so there's no downside to adding this.

This also brings documentation to TRSInventory which is nice :)

* fix: added deprecated warnings

also added more docs to inventory

* fix: added delay after mouse drag release

---
## [Fabinistere/fight_arena](https://github.com/Fabinistere/fight_arena)@[2e6c3aeb8b...](https://github.com/Fabinistere/fight_arena/commit/2e6c3aeb8b0a6a919c2197947e2a2c62eec0d555)
#### Tuesday 2023-01-17 19:41:03 by Wabtey

add Durability and CleanUp and add FEAR resistance

Restructure of Event (related with combat placed in Combat, etc)

- dialog_box
  - update_dialog_panel
    - refactor how to detect dialog change;
    by looking at directly the DialogPanel,
    instead of the Entity Interlocutor which their dialog is being change only after the update_dialog_tree.
    Fix the bug: Reset the text even if there is no change
    - Activate Event (by adding them in their plugin)
    Fix the bug:  Need to skip twice (or more) to exit a node
  - end_node_dialog
    - extraction of update_dialog_panel
- dialog_player
  - dialog_dive
    - extraction for a NeverNester Behavior
    - Only modify UIPanel or Scroll
    (for exception like monologue)
  - hide_empty_button:
  Disable empty button
    - prevent crash by selecting a non accepted button
- dialog_system
  - fix print_file (issue with list of text/choice)
  - rm debug print
  - add print_file unit test
- npc
  - aggression
    - doc
  - movement
    - import
    - format
- combat
  - add the event to be processed
- debug
  - TODO in Debug

- vscode
  - add TODOs in logs

## FIXME

Still some issue to exit dialog

## Note

I have been VAPORIZED.
If God could existed, i dismembered them under my bed.
Dedication to gabriel, Apostate of Hate.

[cathartic laughter]

---
## [NTB45/testing](https://github.com/NTB45/testing)@[7dde6f0e34...](https://github.com/NTB45/testing/commit/7dde6f0e34d7ae35c5578d0068ae9d7f72946fb7)
#### Tuesday 2023-01-17 19:57:49 by NTB45

FUCK THIS SHIT MATE GODDAMNIT WHY THE FUCK I UGHHH

AHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH

aaaawubadugh
wort wort wort

---
## [Evolution-X-Devices/kernel_oneplus_sdm845](https://github.com/Evolution-X-Devices/kernel_oneplus_sdm845)@[1e0dacdd93...](https://github.com/Evolution-X-Devices/kernel_oneplus_sdm845/commit/1e0dacdd936695269de5c3256ce5c57871b13a8d)
#### Tuesday 2023-01-17 20:12:22 by Jason A. Donenfeld

random: credit cpu and bootloader seeds by default

[ Upstream commit 846bb97e131d7938847963cca00657c995b1fce1 ]

This commit changes the default Kconfig values of RANDOM_TRUST_CPU and
RANDOM_TRUST_BOOTLOADER to be Y by default. It does not change any
existing configs or change any kernel behavior. The reason for this is
several fold.

As background, I recently had an email thread with the kernel
maintainers of Fedora/RHEL, Debian, Ubuntu, Gentoo, Arch, NixOS, Alpine,
SUSE, and Void as recipients. I noted that some distros trust RDRAND,
some trust EFI, and some trust both, and I asked why or why not. There
wasn't really much of a "debate" but rather an interesting discussion of
what the historical reasons have been for this, and it came up that some
distros just missed the introduction of the bootloader Kconfig knob,
while another didn't want to enable it until there was a boot time
switch to turn it off for more concerned users (which has since been
added). The result of the rather uneventful discussion is that every
major Linux distro enables these two options by default.

While I didn't have really too strong of an opinion going into this
thread -- and I mostly wanted to learn what the distros' thinking was
one way or another -- ultimately I think their choice was a decent
enough one for a default option (which can be disabled at boot time).
I'll try to summarize the pros and cons:

Pros:

- The RNG machinery gets initialized super quickly, and there's no
  messing around with subsequent blocking behavior.

- The bootloader mechanism is used by kexec in order for the prior
  kernel to initialize the RNG of the next kernel, which increases
  the entropy available to early boot daemons of the next kernel.

- Previous objections related to backdoors centered around
  Dual_EC_DRBG-like kleptographic systems, in which observing some
  amount of the output stream enables an adversary holding the right key
  to determine the entire output stream.

  This used to be a partially justified concern, because RDRAND output
  was mixed into the output stream in varying ways, some of which may
  have lacked pre-image resistance (e.g. XOR or an LFSR).

  But this is no longer the case. Now, all usage of RDRAND and
  bootloader seeds go through a cryptographic hash function. This means
  that the CPU would have to compute a hash pre-image, which is not
  considered to be feasible (otherwise the hash function would be
  terribly broken).

- More generally, if the CPU is backdoored, the RNG is probably not the
  realistic vector of choice for an attacker.

- These CPU or bootloader seeds are far from being the only source of
  entropy. Rather, there is generally a pretty huge amount of entropy,
  not all of which is credited, especially on CPUs that support
  instructions like RDRAND. In other words, assuming RDRAND outputs all
  zeros, an attacker would *still* have to accurately model every single
  other entropy source also in use.

- The RNG now reseeds itself quite rapidly during boot, starting at 2
  seconds, then 4, then 8, then 16, and so forth, so that other sources
  of entropy get used without much delay.

- Paranoid users can set random.trust_{cpu,bootloader}=no in the kernel
  command line, and paranoid system builders can set the Kconfig options
  to N, so there's no reduction or restriction of optionality.

- It's a practical default.

- All the distros have it set this way. Microsoft and Apple trust it
  too. Bandwagon.

Cons:

- RDRAND *could* still be backdoored with something like a fixed key or
  limited space serial number seed or another indexable scheme like
  that. (However, it's hard to imagine threat models where the CPU is
  backdoored like this, yet people are still okay making *any*
  computations with it or connecting it to networks, etc.)

- RDRAND *could* be defective, rather than backdoored, and produce
  garbage that is in one way or another insufficient for crypto.

- Suggesting a *reduction* in paranoia, as this commit effectively does,
  may cause some to question my personal integrity as a "security
  person".

- Bootloader seeds and RDRAND are generally very difficult if not all
  together impossible to audit.

Keep in mind that this doesn't actually change any behavior. This
is just a change in the default Kconfig value. The distros already are
shipping kernels that set things this way.

Ard made an additional argument in [1]:

    We're at the mercy of firmware and micro-architecture anyway, given
    that we are also relying on it to ensure that every instruction in
    the kernel's executable image has been faithfully copied to memory,
    and that the CPU implements those instructions as documented. So I
    don't think firmware or ISA bugs related to RNGs deserve special
    treatment - if they are broken, we should quirk around them like we
    usually do. So enabling these by default is a step in the right
    direction IMHO.

In [2], Phil pointed out that having this disabled masked a bug that CI
otherwise would have caught:

    A clean 5.15.45 boots cleanly, whereas a downstream kernel shows the
    static key warning (but it does go on to boot). The significant
    difference is that our defconfigs set CONFIG_RANDOM_TRUST_BOOTLOADER=y
    defining that on top of multi_v7_defconfig demonstrates the issue on
    a clean 5.15.45. Conversely, not setting that option in a
    downstream kernel build avoids the warning

[1] https://lore.kernel.org/lkml/CAMj1kXGi+ieviFjXv9zQBSaGyyzeGW_VpMpTLJK8PJb2QHEQ-w@mail.gmail.com/
[2] https://lore.kernel.org/lkml/c47c42e3-1d56-5859-a6ad-976a1a3381c6@raspberrypi.com/

Cc: Theodore Ts'o <tytso@mit.edu>
Reviewed-by: Ard Biesheuvel <ardb@kernel.org>
Signed-off-by: Jason A. Donenfeld <Jason@zx2c4.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>

---
## [CharonXXIII/Pixel-Worlds-C-Cheat](https://github.com/CharonXXIII/Pixel-Worlds-C-Cheat)@[f048fb4b3b...](https://github.com/CharonXXIII/Pixel-Worlds-C-Cheat/commit/f048fb4b3bb9d7259672eb1be349a2d813e187f0)
#### Tuesday 2023-01-17 20:16:39 by CharonXXIII

I love Krak, additions/fixes

Added Aim-Bot for enemies, I can probably change a few things to make it work for players later (thank Krak)
Added Auto-Fish (thank Krak)
Added immunity/god-mode to anti-bounce properly so spikebombs etc shouldn't kill you as they won't let you go through them to die (thank Krak)
Added Auto Leave toggle so if a Mod/Admin is detected then it'll auto leave the world

Next update I'll probably just sort the cheats alphabetically so it's more organised or if not that just organise the menu and remove now useless functions like auto-replace blocks, no-clip and free repair (forgot if it works or not the free repair)

---
## [dievilz/dotfiles](https://github.com/dievilz/dotfiles)@[4ffa8f2c25...](https://github.com/dievilz/dotfiles/commit/4ffa8f2c257c697cb011ef237cb92a421c29b8c6)
#### Tuesday 2023-01-17 22:29:27 by Diego Villarreal

file(windows): start using Windows filesystem hierarchy xd

I fucking hate my life :''v

---
## [hometown-fork/hometown](https://github.com/hometown-fork/hometown)@[d7e2a5c6e7...](https://github.com/hometown-fork/hometown/commit/d7e2a5c6e734dac918fb0cacffd23f839599d199)
#### Tuesday 2023-01-17 22:39:12 by hjhornbeck

Dockerfile update (#1270)

While Docker isn't officially supported by Hometown, leaving the
Mastodon 3.5.5 Docker configuration in place with the new 4.0.2 code is
a bad idea. At minimum, you'll have a stale Node install that's months
behind on security updates. There are some minor tweaks to the default
configuration, but they're flagged by comments so they're easy to revert
or modify as necessary.

#  Running Hometown on Docker

I'll by typing up my own longer blog post in due time, but there's no
harm dropping a cheat sheet here. By following this outline, I was able
to upgrade a Hometown 1.0.8 install to 1.1.0 with nothing worse than a
minute or two of downtime.

My configuration uses the GitHub repository as its source, rather than
images drawn from DockerHub. I like to tweak and fiddle with my setup,
especially the themes, and I'm happy to sacrifice some disk space for
the privilege.

## Installing from Scratch

This is by far the easiest approach, you just follow [one
of](https://gist.github.com/TrillCyborg/84939cd4013ace9960031b803a0590c4)
the [existing
guides](https://sleeplessbeastie.eu/2022/05/02/how-to-take-advantage-of-docker-to-install-mastodon/)
for running Mastodon via Docker, pause after you've set up
`.env.production`, add any Hometown-specific features to it [as per the
Wiki](https://github.com/hometown-fork/hometown/wiki), then resume what
the guide says to do.

If you're enabling ElastiSearch, the second of the two guides has some
additional actions you'll need to do, plus be aware of [this
bug](https://github.com/mastodon/mastodon/issues/18625) in Mastodon
which can quietly block ES from working at all.

## Upgrading from Hometown 1.0.8

Here's how I accomplished this. I committed any leftover changes, then
ran these commands from the non-Docker instructions in the root of my
local Hometown repository:

```
git remote update
git checkout v4.0.2+hometown-1.1.0
```

This "wiped out" my customizations, but as I committed them all to a
branch I can reconstruct them later via diffs. I then ran:

```
sudo docker-compose build
```

to build the new image. The old image will continue running in the
background, as per usual. I like adding `2>&1 | less` to the end and
mashing `PgDn`, as if a compilation error happens it almost invariably
requires scrolling back a few screens to find the issue.

If the build succeeded, we're almost clear to start the dangerous
portion. If you're running on the cloud, now would be a great time to
take a snapshot. Whatever the case, you should back up the existing
database. If you haven't changed the defaults from the Dockerfile, then

```
sudo docker exec -it hometown_db_1 pg_dump -U postgres -Fc postgres > hometown.db.dump
```

should do the trick. If you have changed the defaults, you may need to
use `sudo docker ps` to figure out the name of the PostgreSQL image to
swap in place of "hometown_db_1", then browse through `.env.production`
to extract the username to place after `-U` and the database name to
place after `-Fc`. The Hometown docs don't say how to restore the
database should the process go South, but after reading a manpage or two
I think the magic words are roughly

```
sudo docker exec -it hometown_db_1 pg_restore -U postgres --clean --if-exists -d postgres < hometown.db.dump
```

Now we're ready for the scary "you could destroy everything" part. All
the earlier commands are trivial to roll back, but after this point any
delay could cause data corruption. As per the Hometown docs, run the
pre-deployment database migrations.

```
sudo docker-compose run -e SKIP_POST_DEPLOYMENT_MIGRATIONS=true -e RAILS_ENV=production --rm web bundle exec rails db:migrate
```

where `web` is the name of the webserver image in `docker-compose.yml`.
The docs state you should precompile all assets next, but I'm 95% sure
they were already built when you ran `sudo docker-compose build`. If
you're paranoid and want to be absolutely sure precompilation is done,
then at this stage run:

```
sudo docker-compose run -e RAILS_ENV=production --rm web bundle exec rails assets:precompile
```

Here, the Hometown docs say you should run the post-deployment
migrations. In Docker-ese:

```
sudo docker-compose run -e RAILS_ENV=production --rm web bundle exec rails db:migrate
```

Finally, we need to stop the old images and spin up the new ones. Run:

```
sudo docker-compose up -d
```

and give Docker some time to finish rotating. A quick `sudo docker ps`
should confirm the new images are booting up, and in a short while
(10-15 seconds for the teeny-tiny instance I manage) you should be back
to fully functional.

---
## [agraef/purr-data](https://github.com/agraef/purr-data)@[387915c23a...](https://github.com/agraef/purr-data/commit/387915c23ae8747fb97305d9b06aa659c48c5e5d)
#### Tuesday 2023-01-17 23:36:11 by Albert Gräf

Windows packaging: GH-friendly OutputBaseFilename.

This makes my life less miserable when doing releases on the GH mirror,
because I don't have to manually edit the installer filenames before
uploading any more.

GitHub doesn't like blanks in upload file names, using dashes instead
makes uploading much easier and eliminates the need to zip the installer
before uploading. We also include a proper cpu architecture designation
(x86 or x86_64) in the output file name in lieu of the '(64 bit)' suffix
which causes trouble in GH uploads as well, because of the parentheses.

Note that this shouldn't affect the Gitlab CI since it looks for a
'Purr*.exe' build artifact, which will still match the package name.

---

# [<](2023-01-16.md) 2023-01-17 [>](2023-01-18.md)

