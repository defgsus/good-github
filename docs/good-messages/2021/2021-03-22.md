# [<](2021-03-21.md) 2021-03-22 [>](2021-03-23.md)

3,251,872 events, 1,599,683 push events, 2,517,161 commit messages, 185,316,799 characters


## [neoJINXD/MilleniumArts@34d7fb91f6...](https://github.com/neoJINXD/MilleniumArts/commit/34d7fb91f6d074138fd6c7d42021e0a206dcb9f3)
##### 2021-03-22 02:02:04 by neoJINXD

god fucking damnit unity stop changing my settings :hkStare:

---
## [T-J-Teru/binutils-gdb@08c428aff4...](https://github.com/T-J-Teru/binutils-gdb/commit/08c428aff4a793b63c7dd2229ae172879623e3a2)
##### 2021-03-22 16:57:42 by Nick Alcock

libctf: eliminate dtd_u, part 5: structs / unions

Eliminate the dynamic member storage for structs and unions as we have
for other dynamic types.  This is much like the previous enum
elimination, except that structs and unions are the only types for which
a full-sized ctf_type_t might be needed.  Up to now, this decision has
been made in the individual ctf_add_{struct,union}_sized functions and
duplicated in ctf_add_member_offset.  The vlen machinery lets us
simplify this, always allocating a ctf_lmember_t and setting the
dtd_data's ctt_size to CTF_LSIZE_SENT: we figure out whether this is
really justified and (almost always) repack things down into a
ctf_stype_t at ctf_serialize time.

This allows us to eliminate the dynamic member paths from the iterators and
query functions in ctf-types.c in favour of always using the large-structure
vlen stuff for dynamic types (the diff is ugly but that's just because of the
volume of reindentation this calls for).  This also means the large-structure
vlen stuff gets more heavily tested, which is nice because it was an almost
totally unused code path before now (it only kicked in for structures of size
>4GiB, and how often do you see those?)

The only extra complexity here is ctf_add_type.  Back in the days of the
nondeduplicating linker this was called a ridiculous number of times for
countless identical copies of structures: eschewing the repeated lookups of the
dtd in ctf_add_member_offset and adding the members directly saved an amazing
amount of time.  Now the nondeduplicating linker is gone, this is extreme
overoptimization: we can rip out the direct addition and use ctf_member_next and
ctf_add_member_offset, just like ctf_dedup_emit does.

We augment a ctf_add_type test to try adding a self-referential struct, the only
thing the ctf_add_type part of this change really perturbs.

This completes the elimination of dtd_u.

libctf/ChangeLog
2021-03-18  Nick Alcock  <nick.alcock@oracle.com>

	* ctf-impl.h (ctf_dtdef_t) <dtu_members>: Remove.
	<dtd_u>: Likewise.
	(ctf_dmdef_t): Remove.
	(struct ctf_next) <u.ctn_dmd>: Remove.
	* ctf-create.c (INITIAL_VLEN): New, more-or-less arbitrary initial
	vlen size.
	(ctf_add_enum): Use it.
	(ctf_dtd_delete): Do not free the (removed) dmd; remove string
	refs from the vlen on struct deletion.
	(ctf_add_struct_sized): Populate the vlen: do it by hand if
	promoting forwards.  Always populate the full-size
	lsizehi/lsizelo members.
	(ctf_add_union_sized): Likewise.
	(ctf_add_member_offset): Set up the vlen rather than the dmd.
	Expand it as needed, repointing string refs via
	ctf_str_move_pending. Add the member names as pending strings.
	Always populate the full-size lsizehi/lsizelo members.
	(membadd): Remove, folding back into...
	(ctf_add_type_internal): ... here, adding via an ordinary
	ctf_add_struct_sized and _next iteration rather than doing
	everything by hand.
	* ctf-serialize.c (ctf_copy_smembers): Remove this...
	(ctf_copy_lmembers): ... and this...
	(ctf_emit_type_sect): ... folding into here. Figure out if a
	ctf_stype_t is needed here, not in ctf_add_*_sized.
	(ctf_type_sect_size): Figure out the ctf_stype_t stuff the same
	way here.
	* ctf-types.c (ctf_member_next): Remove the dmd path and always
	use the vlen.  Force large-structure usage for dynamic types.
	(ctf_type_align): Likewise.
	(ctf_member_info): Likewise.
	(ctf_type_rvisit): Likewise.
	* testsuite/libctf-regression/type-add-unnamed-struct-ctf.c: Add a
	self-referential type to this test.
	* testsuite/libctf-regression/type-add-unnamed-struct.c: Adjusted
	accordingly.
	* testsuite/libctf-regression/type-add-unnamed-struct.lk: Likewise.

---
## [GitInVisualStudio/KnueppelKampf@328aa3f39c...](https://github.com/GitInVisualStudio/KnueppelKampf/commit/328aa3f39cea19bfa436492e890bd88c93a78e20)
##### 2021-03-22 21:19:51 by yami.miriam

GOT THE FUCKING BULLSHIT WORKING YOU CAN M O V E NOW FUCK YEAH

---
## [sumghai/NewRatkin@06b075dd40...](https://github.com/sumghai/NewRatkin/commit/06b075dd40aa35afcce346b3b2fcfa3b3dbad03d)
##### 2021-03-22 22:23:55 by Proxyer

Japanese translation update: 20 Mar, 2021

 - Add "Ratkin shepherd boy" has "girl" female backstory.
 - Add "Ratkin heir" has "heiress" female backstory
 - Add new young girl only backstory "Apprentice seamstress".
 - Add new backstory "Farmhand".
 - Add new backstory type B "Guardener leader".
 - Add new female only backstory "Seamstress".

---

# [<](2021-03-21.md) 2021-03-22 [>](2021-03-23.md)

