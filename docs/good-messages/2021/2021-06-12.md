# [<](2021-06-11.md) 2021-06-12 [>](2021-06-13.md)

2,264,208 events, 1,196,246 push events, 1,795,151 commit messages, 108,016,402 characters


## [tsipa/bpf-next@926b133677...](https://github.com/tsipa/bpf-next/commit/926b1336778f9751188379f2236748ce17eba7f5)
##### 2021-06-12 00:06:08 by Maciej Żenczykowski

bpf: do not change gso_size during bpf_skb_change_proto()

This is technically a backwards incompatible change in behaviour,
but I'm going to argue that it is very unlikely to break things,
and likely to fix *far* more then it breaks.

In no particular order, various reasons follow:

(a) I've long had a bug assigned to myself to debug a super rare kernel
crash on Android Pixel phones which can (per stacktrace) be traced back
to bpf clat ipv6 to ipv4 protocol conversion causing some sort of ugly
failure much later on during transmit deep in the GSO engine, AFAICT
precisely because of this change to gso_size, though I've never been able
to manually reproduce it.
I believe it may be related to the particular network offload support
of attached usb ethernet dongle being used for tethering off of an
IPv6-only cellular connection.  The reason might be we end up with more
segments than max permitted, or with a gso packet with only one segment...
(either way we break some assumption and hit a BUG_ON)

(b) There is no check that the gso_size is > 20 when reducing it by 20,
so we might end up with a negative (or underflowing) gso_size or
a gso_size of 0.  This can't possibly be good.
Indeed this is probably somehow exploitable (or at least can result
in a kernel crash) by delivering crafted packets and perhaps triggering
an infinite loop or a divide by zero...
As a reminder: gso_size (mss) is related to mtu, but not directly
derived from it: gso_size/mss may be significantly smaller then
one would get by deriving from local mtu.  And on some nics (which
do loose mtu checking on receive, it may even potentially be larger,
for example my work pc with 1500 mtu can receive 1520 byte frames
[and sometimes does due to bugs in a vendor plat46 implementation]).
Indeed even just going from 21 to 1 is potentially problematic because
it increases the number of segments by a factor of 21 (think DoS,
or some other crash due to too many segments).

(c) It's always safe to not increase the gso_size, because it doesn't
result in the max packet size increasing.  So the skb_increase_gso_size()
call was always unnecessary for correctness (and outright undesirable, see
later).  As such the only part which is potentially dangerous (ie. could
cause backwards compatibility issues) is the removal of the
skb_decrease_gso_size() call.

(d) If the packets are ultimately destined to the local device, then
there is absolutely no benefit to playing around with gso_size.
It only matters if the packets will egress the device.  ie. we're
either forwarding, or transmitting from the device.

(e) This logic only triggers for packets which are GSO.  It does not
trigger for skbs which are not GSO.  It will not convert a non-GSO mtu
sized packet into a GSO packet (and you don't even know what the mtu is,
so you can't even fix it).  As such your transmit path must *already* be
able to handle an mtu 20 bytes larger then your receive path (for ipv4
to ipv6 translation) - and indeed 28 bytes larger due to ipv4 fragments.
Thus removing the skb_decrease_gso_size() call doesn't actually increase
the size of the packets your transmit side must be able to handle.
ie. to handle non-GSO max-mtu packets, the ipv4/ipv6 device/route mtus
must already be set correctly.  Since for example with an ipv4 egress mtu
of 1500, ipv4 to ipv6 translation will already build 1520 byte ipv6 frames,
so you need a 1520 byte device mtu.  This means if your ipv6 device's
egress mtu is 1280, your ipv4 route must be 1260 (and actually 1252,
because of the need to handle fragments).  This is to handle normal non-GSO
packets.  Thus the reduction is simply not needed for GSO packets,
because when they're correctly built, they will already be the right size.

(f) TSO/GSO should be able to exactly undo GRO: the number of packets
(TCP segments) should not be modified, so that TCP's mss counting works
correctly (this matters for congestion control).
If protocol conversion changes the gso_size, then the number of TCP segments
may increase or decrease.  Packet loss after protocol conversion can result
in partial loss of mss segments that the sender sent.  How's the sending
TCP stack going to react to receiving ACKs/SACKs in the middle of the
segments it sent?

(g) skb_{decrease,increase}_gso_size() are already no-ops for GSO_BY_FRAGS
case (besides triggering WARN_ON_ONCE). This means you already cannot
guarantee that gso_size (and thus resulting packet mtu) is changed.
ie. you must assume it won't be changed.

(h) changing gso_size is outright buggy for UDP GSO packets, where framing
matters (I believe that's also the case for SCTP, but it's already excluded
by [g]).  So the only remaining case is TCP, which also doesn't want it
(see [f]).

(i) see also the reasoning on the previous attempt at fixing this
(commit fa7b83bf3b156c767f3e4a25bbf3817b08f3ff8e) which shows
that the current behaviour causes TCP packet loss:

  In the forwarding path GRO -> BPF 6 to 4 -> GSO for TCP traffic, the
  coalesced packet payload can be > MSS, but < MSS + 20.

  bpf_skb_proto_6_to_4() will upgrade the MSS and it can be > the payload
  length. After then tcp_gso_segment checks for the payload length if it
  is <= MSS. The condition is causing the packet to be dropped.

  tcp_gso_segment():
    [...]
    mss = skb_shinfo(skb)->gso_size;
    if (unlikely(skb->len <= mss)) goto out;
    [...]

Thus changing the gso_size is simply a very bad idea.
Increasing is unnecessary and buggy, and decreasing can go negative.

Cc: Dongseok Yi <dseok.yi@samsung.com>
Cc: Daniel Borkmann <daniel@iogearbox.net>
Cc: Willem de Bruijn <willemb@google.com>
Fixes: 6578171a7ff0 ("bpf: add bpf_skb_change_proto helper")
Signed-off-by: Maciej Żenczykowski <maze@google.com>

---
## [Dejaku51/tgstation@8be08bc348...](https://github.com/Dejaku51/tgstation/commit/8be08bc34860ae3dc5e75c0e9fa71d81b48ff772)
##### 2021-06-12 01:37:40 by aquila33-bot

[MIRROR] adds a new clown mask, the madman, a madness combat reference (#1048)

* adds a new clown mask, the madman, a madness combat reference (#4356)

* funni reference

* fixes bug

* oh fuck oh shit im stupid

* adds a new clown mask, the madman, a madness combat reference

Co-authored-by: bluezorua <54711687+bluezorua@users.noreply.github.com>
Co-authored-by: jack-pie <themenofpl53@gmail.com>

---
## [TincyThomas/edabit-challenges@4cee6625b9...](https://github.com/TincyThomas/edabit-challenges/commit/4cee6625b97e918c9c65e54dd1ec770ec271ff66)
##### 2021-06-12 10:08:03 by Tincy Thomas

Create Buggy Code (Part 4)

Emmy has written a function that returns a greeting to users. However, she's in love with Mubashir, and would like to greet him slightly differently. She added a special case in her function, but she made a mistake.

Can you help her?

Examples
greeting("Matt") ➞ "Hello, Matt!"

greeting("Helen") ➞ "Hello, Helen!"

greeting("Mubashir") ➞ "Hello, my Love!"

---
## [mrakgr/The-Spiral-Language@df90cbd580...](https://github.com/mrakgr/The-Spiral-Language/commit/df90cbd580677acd378f6eba0e82b971eff93dc9)
##### 2021-06-12 16:32:41 by Marko Grdinić

"10:25am. Did the chores and caught up to Her Majesty's Swarm. Let me finish the chapter of what I reading now and then I will do some work.

10:45am. Ok, that was enough fun for the morning. Fiction is always more fun when you are not dead tired.

10:50am. Good, the Start Server command now works properly.

10:55am. I need some time off from programming to think about it. Yesterday and during the night, my mind was still on the hand scorer. I hadn't thought about the game in any detail.

It won't be hard at all, but I need to run it in my head for a bit first. Let me take a nap here. The weather is so nice, the temperature is moderate, the musquitoes still haven't arrived. If it was like this all year round, life would be great. It is the ideal time to sleep a bit.

I should roll the game in my mind until I have a handle on it, and then do it and the UI for it. Then I'll be able to move to agent training.

1:10pm. Done with breakfast. Let me have fun for a bit and then I will go back to bed. I haven't even been thinking about the game, so my motivation is not all there. I need to connect it to the task at hand, and staying away from the screen and the distractions for a while will do me good.

1:30pm. Let me go back to bed. I need to find my focus instead of frittering it away on leisure activities.

I need to think. I just need to do the game and the UI for it.

As a programmer, I am not close to my ideal. I might not be a normie now, but throughout my life, I've always kept an eye on the other side. I thought that if tech turns out to be false, I would commit myself to joining society. But instead coming to an understanding of the self improvement loop was a huge blow to me.

The urge to program is there. Programming is the one activity that most rewards creativity.

I just do regret my behavior so much. If I knew it would be like this, I would never have spent time with other people and would have active run away from school. It seems absurd to say it. But that is what my beliefs are telling me. I made a mistake to passively resist mundanity.

People have their own path, but I regret my path being a path of evil. I thought that infinite power could be used for infinite good, but the structure of the universe prevents that. Differences exist for a reason, red is not blue and naive algorithms like a map will never sort an array no matter how much their inputs are varied. One's will does not matter in this. There is always the naive hope that if one pushes harder, the square peg will fit into a round hole, but it never does.

I regret having my foot on two paths in past. Whatever mistake normies have made, they are right to follow only one thing. I'll give them that.

I do not want the pain, suffering and humiliation on being on two paths anymore.

It is my destinity to find my own power and create my own side.

I need to feel that. I need to feel the urge to work towards it.

I want to get over my regrets. I want to leave behind my sadness. This is the burden that I've been carrying for six years, and I do not indent to truck it for the rest of my life. There is rage, but that is pointless too. The only thing that needs to be accepted is the coldness of rationality.

The normies are fucked as it is, there i no point in crying about the meaninglessness of it all.

My heart does not need to turn cold. It just needs to turn warm for the task at hand.

I need to get rid of the thoughts such as 'for how long will this continue' and 'just when will I get my first success.' I know when I am going to get my first success - very soon.

I managed to clear Leduc and even got the reward scale invariant training scheme to work. There is not a single reason to suspect that I might fail the next part.

If I start, I could implement the game, the UI and the first agent in less than a week.

And I could have an excellent if not top of the line agent trained in a month. And I going to groan and bitch about how much work it would take to automate and fight the online dens after that?

It is this weak mentality and the self doubt that resurfaces over and over in me. I am close to being an expert, in terms of programming skill I am all the way there, but I lack the self assurance and the real world confidence. Six years ago, I found my path and I've persevered, but I am being a bit too open minded. I cannot find it in me to forgive myself for failing my old ideals. I cannot find the strength to play life like a game.

But the perspective is there. If I could fully internalize it my pace could become very steady and I could regain some of the lost vigor of my youth.

2pm. I have a lot of grief inside of me. It took me a lot of time to get good at roguelikes. When I was a kid, I'd play them like Diablo. I'd find an enemy, fight rinse and repeat. If you do that in roguelikes, you die pretty quickly because there are situations that need to be avoided. In Diablo you just mop the map like a janitor.

It goes back to when I was a kid. When I was a kid, I wanted to grow up being the strongest in the world. I thought that if I could channel the the desire for long enough, I could find some real life cheats. Running away would deny me the valuable practice and experience.

But just look at me now. If my soul got sent backward in time, just what advantage would my elder experinece give me?

Compared to the 14 year old me, is the almost 20 year old older me better in any way? Not at all.

I never got any stronger in physical sense. The boring adult things never became fun. I never found meaning in responsibilities and expectations. The society never gave me clear goals and rewards for reaching them.

Yes, I know about the self improvement loop. I know programming. But being transported back, none of the things would help me in the classroom or the playground. With the power I have now, if I had to go back the only smart move would be to run.

I wanted to become strong in my youth, but in my older age the only thing I found was the wisdom of escape.

2:10pm. I did not want to create my own side, I thought that since all paths converge to omnipotence, that I'd be able to see eye to eye with other people eventually. My that path is for one in a million. Expecting other people to accept it is nothing more than a delusion.

Ultimately, sides exist for a reason. Different tribes existing is not just a matter of fashion, though it might seem that way these days.

It is not so much that I will create my own side, but rather than the awareness of its existence will come naturally at some point.

2:20pm. I regret it. In my youth I looked down on the normal side and its people, but now that there is a proof of how fucked they are, I regret it. I feel as if it is my fault, but I am just a messenger. Maybe the accusation of being too arrogant is true.

There is no need to be emotional about doom. It is not I who should be suffering here.

They do not deserve pity either. The only thing they deserve is for me to challenge them with my full power.

My style was always to build up my methods in secret. Yes, I have this journal, so it hardly counts as being secret, but I doubt anybody takes me seriously. Hell, half my brain does not take me seriously.

2:20pm. Ah, how great it would be if I could start programming the Holdem game without the slightest bit of hesitation. How great it would be if I could fully commit to my path.

It is not other people that I want to convince, but myself most of all. I am not a rationalist, so I do not believe my rationality without tangible evidence.

2:25pm. It do not need to tell 'it' to others. I need to tell 'it' to myself. Maybe it is not the others that I want to run from, but myself. Maybe it is my weakness which I should stop running away from. Without feeling regret, pity or remorse.

Let me go back to bed. I need to get these emotions out of my system.

6:05pm. I spent this time in bed.

In order to get rid of my regrets, I need to convince myself that the fact that I thought was enough. Maybe I'll have great accomplishments in the future, but that does not matter. Whatever it is today is in the past, whatever the time was, I spent my time thinking and pondering. Where the others raced on a threadmill and looked down on me for not getting ahead wasn't I the one who was looking down on them?

The story of my life is not about others, but about myself.

If the worth of the thoughts passing through my mind is nothing, and we only look at results, the my life is worthless. But if the time I spent in thought is worth something, then I am the richest person there is.

6:10pm. I won't accept the regrets. Sure, my thoughts might not have been good back then as they are now, but if I wasn't the kind of person to keep the inspiration going back then, I would not have managed to understand the things I do now.

So I need to accept this as the value of my worth.

I might not have done much programming today, but this thinking that I am doing is what should count as my work. A parallel reality that I am creating in my own mind.

I really won't get anywhere competing with the normies on their own term.

6:20pm. I need to find my power. In my youth I had the dreams of having big muscle when I got older, but it would be a step forward if instead I thought about using my own fists to get my way, I use the power of the machines do deal with obstacles. The dream of a man is nothing but a scam. Strike another with your first, and you will land in jail. Use killer robots, and you will conquer the world and devour the universe.

Make no mistake, using drones to deal with all your problems isn't manly or brave. It is not even smart when all you are doing is just pushing a button to make things happen.

But who cares about manliness? Who cares about strength, coordination and intelligence? Who cares about social skill? Those ways of competing are how the uninspired fight. The inspired use algorithms and base their power on accumulated thinking.

This is the side I need to join. This is the side I need to make. This is the side I belong to.

Who cares about ways of fighting that will only give you slight ego bumps. This is the real world, and I am aiming to grasp the stars. No ordinary effort will suffice.

6:25pm. One day I will turn my algorithms into real world spells.

I do not know whether I will feel like working on the Holdem game tomorrow. But whether I shake of my regrets or not, I will continue to think. I will continue to push my mind forward. I will not say that I've done enough. My brain can cool when I am dead.

I will loosen my clenched fist so that I might grasp the heart of the machine."

---
## [usharajam/graph_analytics_assignments@b5f5f7a0d8...](https://github.com/usharajam/graph_analytics_assignments/commit/b5f5f7a0d8930445884888097e8f0b8c387fd8c8)
##### 2021-06-12 21:44:32 by usharajam

Update README.md

Assignment 1

The goal of this assignment is for you to understand and try out basic NetworkX methods to create a simple graph. The requirements for the graph are:


The graph should represent a real-world use case, for example, friendships in a social network, emails in a communication network, roads and cities in a transportation network, etc.


The graph should contain at least two different kinds of nodes. In other words, nodes should represent at least two different kinds of entities. For example, a social network could contain nodes representing people and events that they participated in, while a transportation network could contain nodes representing cities and countries.


The graph should contain at least two different kinds of relationships. In other words, the relationships should represent at least two real-life connections between entities. So, for example, two people could be connected with relationships that represent friendships and acquaintanceships.


The graph should contain at least 20 nodes and 20 edges.

You don’t have to create the graph manually by adding every node explicitly, you can just use local files to import data. Don’t use graph generators because they will be covered in the next lesson.


You need to use some of the following methods in your code:
G.add_node(): Reference guide
G.add_nodes_from(): Reference guide
G.add_edge(): Reference guide
G.add_edges_from(): Reference guide


You will need to visualize the graph using nx.draw() (Reference guide).

---

# [<](2021-06-11.md) 2021-06-12 [>](2021-06-13.md)

