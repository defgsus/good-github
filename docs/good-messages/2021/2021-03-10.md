# [<](2021-03-09.md) 2021-03-10 [>](2021-03-11.md)

5,496,955 events, 1,387,294 push events, 2,139,569 commit messages, 158,745,587 characters


## [k21971/EvilHack](https://github.com/k21971/EvilHack)@[1f01321b4c...](https://github.com/k21971/EvilHack/commit/1f01321b4c04b2d8f8ea5afa905f3cc3ecec7658)
#### Wednesday 2021-03-10 00:59:45 by k21971

Yet another Gehennom revamp.

I took some inspiration from my last dNetHack game where I was able to
ascend (first time!) - its Gehennom is fairly random. The player won't
encounter the same demon lords/princes everytime, it's randomized, which
gives the endgame much more 're-playability'. This is my attempt to do
the same thing, EvilHack style. Here's the summary:

* Instead of encountering all eight demon bosses, the player is only
guaranteed to encounter four (Orcus plus three others)
* The other three demon boss lairs are divided into three tiers, with
each tier randomly picking from a pool of maps to load
* The map chosen does not determine the demon boss the player will
encounter - the demon bosses are also split up into three tiers (four
demon bosses per tier)
* Each tier is progressively more difficult than the last:
  - First tier: Juiblex, Baalzebub, Geryon, or (new demon lord) Baphomet
  - Second tier: Dispater, Yeenoghu, (new demon lords) Lolth, or
    Mephistopheles
  - Third tier: Asmodeus, Demogorgon, Tiamat, or (new demon prince)
    Graz'zt
* Both demon lords and princes have increased hit points
* Two new maps (demon lairs) were added (pulled the templates from
Splicehack and heavily modified them), and a few existing maps were
modified (notably Asmodeus level and Orcus town)
* A new room type was added (lemurepit) to go with one of the new demon
lairs
* Since Tiamat was pulled from the Caveperson quest, she has been
replaced with a new quest nemesis - Annam (Father of all Giants)
* Various tweaks and adjustments to existing demon lords/princes

There's more to do here (especially with Lolth), but I was at a point
where I needed to commit before I started to forget some of the earlier
edits :) These changes will hopefully make the endgame more fun,
interesting, and challenging.

---
## [ccodwg/Covid19Canada](https://github.com/ccodwg/Covid19Canada)@[9988e33ebb...](https://github.com/ccodwg/Covid19Canada/commit/9988e33ebbb1b85f5d16dd995d7cc9379145405d)
#### Wednesday 2021-03-10 01:37:38 by Jean-Paul R. Soucy

New data: 2021-03-09: See data notes.

Revise historical data: cases (AB, BC, MB, NB, ON, SK).

Note regarding deaths added in QC today: “12 new deaths, for a total of 10,493 deaths: 4 deaths in the last 24 hours, 4 deaths between March 2 and March 7, 3 deaths before March 2, 1 death at an unknown date.” We report deaths such that our cumulative regional totals match today’s values. This sometimes results in extra deaths with today’s date when older deaths are removed.

Recent changes:

2021-01-27: Due to the limit on file sizes in GitHub, we implemented some changes to the datasets today, mostly impacting individual-level data (cases and mortality). Changes below:

1) Individual-level data (cases.csv and mortality.csv) have been moved to a new directory in the root directory entitled “individual_level”. These files have been split by calendar year and named as follows: cases_2020.csv, cases_2021.csv, mortality_2020.csv, mortality_2021.csv. The directories “other/cases_extra” and “other/mortality_extra” have been moved into the “individual_level” directory.
2) Redundant datasets have been removed from the root directory. These files include: recovered_cumulative.csv, testing_cumulative.csv, vaccine_administration_cumulative.csv, vaccine_distribution_cumulative.csv, vaccine_completion_cumulative.csv. All of these datasets are currently available as time series in the directory “timeseries_prov”.
3) The file codebook.csv has been moved to the directory “other”.

We appreciate your patience and hope these changes cause minimal disruption. We do not anticipate making any other breaking changes to the datasets in the near future. If you have any further questions, please open an issue on GitHub or reach out to us by email at ccodwg [at] gmail [dot] com. Thank you for using the COVID-19 Canada Open Data Working Group datasets.

- 2021-01-24: The columns "additional_info" and "additional_source" in cases.csv and mortality.csv have been abbreviated similar to "case_source" and "death_source". See note in README.md from 2021-11-27 and 2021-01-08.

Vaccine datasets:

- 2021-01-19: Fully vaccinated data have been added (vaccine_completion_cumulative.csv, timeseries_prov/vaccine_completion_timeseries_prov.csv, timeseries_canada/vaccine_completion_timeseries_canada.csv). Note that this value is not currently reported by all provinces (some provinces have all 0s).
- 2021-01-11: Our Ontario vaccine dataset has changed. Previously, we used two datasets: the MoH Daily Situation Report (https://www.oha.com/news/updates-on-the-novel-coronavirus), which is released weekdays in the evenings, and the “COVID-19 Vaccine Data in Ontario” dataset (https://data.ontario.ca/dataset/covid-19-vaccine-data-in-ontario), which is released every day in the mornings. Because the Daily Situation Report is released later in the day, it has more up-to-date numbers. However, since it is not available on weekends, this leads to an artificial “dip” in numbers on Saturday and “jump” on Monday due to the transition between data sources. We will now exclusively use the daily “COVID-19 Vaccine Data in Ontario” dataset. Although our numbers will be slightly less timely, the daily values will be consistent. We have replaced our historical dataset with “COVID-19 Vaccine Data in Ontario” as far back as they are available.
- 2020-12-17: Vaccination data have been added as time series in timeseries_prov and timeseries_hr.
- 2020-12-15: We have added two vaccine datasets to the repository, vaccine_administration_cumulative.csv and vaccine_distribution_cumulative.csv. These data should be considered preliminary and are subject to change and revision. The format of these new datasets may also change at any time as the data situation evolves.

https://www.quebec.ca/en/health/health-issues/a-z/2019-coronavirus/situation-coronavirus-in-quebec/#c47900

Note about SK data: As of 2020-12-14, we are providing a daily version of the official SK dataset that is compatible with the rest of our dataset in the folder official_datasets/sk. See below for information about our regular updates.

SK transitioned to reporting according to a new, expanded set of health regions on 2020-09-14. Unfortunately, the new health regions do not correspond exactly to the old health regions. Additionally, the provided case time series using the new boundaries do not exist for dates earlier than August 4, making providing a time series using the new boundaries impossible.

For now, we are adding new cases according to the list of new cases given in the “highlights” section of the SK government website (https://dashboard.saskatchewan.ca/health-wellness/covid-19/cases). These new cases are roughly grouped according to the old boundaries. However, health region totals were redistributed when the new boundaries were instituted on 2020-09-14, so while our daily case numbers match the numbers given in this section, our cumulative totals do not. We have reached out to the SK government to determine how this issue can be resolved. We will rectify our SK health region time series as soon it becomes possible to do so.

---
## [systemd/systemd](https://github.com/systemd/systemd)@[e5f8ce13bb...](https://github.com/systemd/systemd/commit/e5f8ce13bbaf0d8b9ff597692c67fba0e38b4200)
#### Wednesday 2021-03-10 02:11:57 by Lennart Poettering

socket-util: refuse ifnames with embedded '%' as invalid

So Linux has this (insane — in my opinion) "feature" that if you name a
network interface "foo%d" then it will automatically look for the
interface starting with "foo…" with the lowest number that is not used
yet and allocates that.

We should never clash with this "magic" handling of ifnames, hence
refuse this, since otherwise we never know what the name is we end up
with.

We should probably switch things from a deny list to an allow list
sooner or later and be much stricter. Since the kernel directly enforces
only very few rules on the names, we'd need to do some research what is
safe and what is not first, though.

---
## [AnonymousRevan/darkesthour](https://github.com/AnonymousRevan/darkesthour)@[a6d5ab614c...](https://github.com/AnonymousRevan/darkesthour/commit/a6d5ab614ce47ca0dab79fd9b5190bf5a35ccbea)
#### Wednesday 2021-03-10 02:49:05 by NoraValk

Holy shit yorkee, if you use my work, at least take the files you incompetent fuck

---
## [hipe/downtownfun](https://github.com/hipe/downtownfun)@[6d75a3d0c5...](https://github.com/hipe/downtownfun/commit/6d75a3d0c5214d5f1e4c83bfd443ba94faa00501)
#### Wednesday 2021-03-10 02:51:43 by Mark Meves

pho(wip): document history for notecard-based documents ((1613))

Journal: Finally seeing this thing come together after 2 or 3 weeks
was thrilling. We cried a few times (joy then terror then joy again):

When it finally game time to ~ bring the two sides of the St. Louis
Arch ~ together, (really it was three sides: 1) populate the data
warehouse 2) use our linguistic processing/bucketing thing, 3)
integrate into the “view” layer (and 3.5 integrate it with pelican
plugin life);

As we tried to stitch these disparate parts together we realized that
we had done zero investigation of what the template looked like near
where the feature was produced that we were going to change.

Initially our target output was “just a paragraph of text (so, lines
of text wordwrapped at no particular place)”; but when we looked at
the structure of the existing HTML we found there was markup and
structure there that we hadn’t planned for:

The page structure had the idea of “created” vs “modified” and also
used locale features of HTML which possibly made their output better
for internationalization.

This sent us “back to the drawing board” a little bit because a big
implicit design vector of our feature was to *remove* structure, and
turn everything into just a stream of words (sentences).

Fortunately (tears of joy again) this wasn’t that painful to retrofit
and regress our pipeline; but it was uncomfortable for a little while.

(times)
  03-06 02:54  begin stats command 
        04:03  stats done! zz
        17:09  ready to integrate looking at template
  03-07 09:34  Don't produce words, produce time bucket expressers
        11:52  lol the first ever real smoke test of the feature and all
               kinds of things are wrong with it. but still, thrilling
        13:44  (it was just one little thing wrong with it in addition
               to another little thing)
               happy with progress, gotta literally run
  03-08 11:06  ~ 1 hour on writing algo for rigged documents
.

---
## [canine0/zigcrawl](https://github.com/canine0/zigcrawl)@[cbf6559ca7...](https://github.com/canine0/zigcrawl/commit/cbf6559ca7476b2863967ca347e8ab6b0a2ec1ed)
#### Wednesday 2021-03-10 03:29:45 by canine

New spell school: Eldritch Magic

Currently used by nothing new (though Summon Horrible Things is now Summ/Eldr, Malign Gateway is pure Eldritch Magic, and Animate Armor is Summ/Eldr). Plans include bringing back Singularity under this spell school, retheming it to a cosmic rift, and adding some new and strange heavily RNG-based spells as well as an associated mage background. Wanderers intentionally can't start with any Eldritch Magic skill - the idea is that it's a highly esoteric and dangerous form of magic available only in secretive and forbidden covens persecuted by the societies of the overworld, that it tears at the caster's sanity the longer they use it. All Eldritch spells are chaotic, but not necessarily hated by good gods besides Zin. TODO, future me: Fix a webtiles-only bug by properly figuring out aptitudes.txt instead of the horrible solution I'm using involving deleting the spellschool/apt-related COMPILE_CHECKs,, but it only really matters in webtiles so I don't care for now (I've been told it crashes in webtiles when player tries to view aptitudes table in character creation, but locally, everything works fine, albeit Eldr doesn't show up in the aptitude tables when listing aptitudes during character creation).

---
## [JamieHoSzeYui/android_packages_apps_Launcher3](https://github.com/JamieHoSzeYui/android_packages_apps_Launcher3)@[090339533c...](https://github.com/JamieHoSzeYui/android_packages_apps_Launcher3/commit/090339533c719632ffb3838dd36c18e3066a409e)
#### Wednesday 2021-03-10 04:04:22 by Wiley L

launcher3: add back missing permissions

fuck you pizza

---
## [leahfortier/nextjs-app](https://github.com/leahfortier/nextjs-app)@[5bd7633c48...](https://github.com/leahfortier/nextjs-app/commit/5bd7633c48f3fadd9b47752dc68cc93cf12b2364)
#### Wednesday 2021-03-10 06:26:31 by leahfortier

switch from auth0 to next auth......

- yeah yeah yeah I changed my mine and now handling auth in the user database
- currently removed email verification but I should hopefully add that back soon once I figure out how that works
- main logic here is handled in the authorize method inside [...nextauth].ts
- still trying to fully figure out how this file works but I have a small handle on just this method at the moment
- can now easily get the session on the server side (main motivator in making this switch as this was becoming more complicated to figure out than I was hoping for with auth0)
- (because of this no longer passing email and/or other piii as url parameters)
- right now if there is no user associated with the login info it will create a new user with the login password -- tbh I don't love this as opposed to a separate intentional create section but I haven't figured that out yet

---
## [kleinerm/Psychtoolbox-3](https://github.com/kleinerm/Psychtoolbox-3)@[4b90b29dda...](https://github.com/kleinerm/Psychtoolbox-3/commit/4b90b29dda9d30aa9b89b2cb1077e85dddd61ecc)
#### Wednesday 2021-03-10 07:03:21 by Mario Kleiner

Screen/Linux: Support Wayland compositors without wl_shell, but xdg_shell.

libWaffle as of its latest release now also supports the basic stable
xdg shell protocol for window creation and management:

In the past, only wl_shell was supported. Now it will try to use
xdg_shell and fall back to wl_shell if xdg_shell is not supported.
As most production compositors do support xdg_shell in at least a
basic variant by now, this means most of the time xdg_shell will
be used.

Adapt our window setup code to make use of this new Waffle feature.
Also some cosmetic changes to status messages etc.

This now allows testing on wlroots-based compositors like Sway WM,
which do not support old wl_shell, but only xdg_shell. Also a bit
more robust on KDE's kwin wayland and GNOME's Mutter wayland.

Restrictions:

- We do not use xdg_shell calls ourselves yet, but rely on Waffle,
  so we are restricted: Can't select which output to display a
  fullscreen window on. That's supported on wl_shell only so far.

- Also no assignment of window titles in windowed mode.

- Oh and we need a bug-fixed libWaffle, as upstream release has a
  bug in its fullscreen xdg support! I'll need to upstream my fix.

- Sway does support the presentation timing feedback protocol, so
  now we have n=2 compositors with not totally broken timing, yay!
  However: Scheduling on Sway is as much of a s***-show as expected,
  as each Wayland compositor seems to reinvent the wheel in terms
  of composition scheduling. This will stay awful until a proper
  presentation timing extension is released and supported by most
  compositors. On Sway one needs these tweaks to get not totally
  awful timing and performance on a 144 Hz display:

  In Octave: setenv('PSYCH_WAYLAND_SWAPDELAY', '-0.002')
  In Sway's config file (see man sway-output):

  output DP-3 max_render_time 2

  Why these magic numbers? I wouldn't know, but endless tinkering
  made it work best for these settings. Any other refresh rate
  would probably need different numbers.

-> So this is an improvement, but far from anything one would want
   to expose ones's users to. X-Server still rules...

---
## [d12frosted/environment](https://github.com/d12frosted/environment)@[cc6b4e82f5...](https://github.com/d12frosted/environment/commit/cc6b4e82f5efa18ded84a6e3e821e75cef922c7e)
#### Wednesday 2021-03-10 08:11:08 by Boris Buliga

(emacs) retry some straight operations

Initially there were retries for fetching packages, but as CI and my
experience show, cloning fails sometimes to. It's lovely to have
retries there too.

---
## [Delvigore/liliths-throne-public](https://github.com/Delvigore/liliths-throne-public)@[e4c82f2bd7...](https://github.com/Delvigore/liliths-throne-public/commit/e4c82f2bd7e08f036f5ced79fc0da2c1e6c72543)
#### Wednesday 2021-03-10 09:37:02 by Delvigore

Sexings and threesomes update

Changed the elasticity and plasticity on Sameera's vagina.
Implemented getFHGroup in dialogue with Sameera and Bevikar.  I was
being silly and finally figured out how to put it in.  Many thanks to
AceXP and his patience with me.
Added applyUniform to Bevikar with him wearing a hard hat.  Need to
figure out how to implement.

things that still need to be done:
Get the 'busy' dialogue to work
Need to finish adding NPCs
implement conversations with all proper NPCs
Need to write for NPCs so that they each have their own character and
personality
Need to figure out how to ask NPCs to have sex privately in case the
player doesn't want people watching
Need to fix the secretary 'step back' response so it accounts for time
Finish adding rooms
probably some sex behavior based on if dom or sub
enable dialogue flags so the NPCs only do the intro once
NPC affection stuff
Quests
Fire events and interactions
writing
NPCs change outfit depending on if they're working or not
Fire fighter equipment and uniforms
Fire fighter background perk
Arcane fire fighter background perk

additional thoughts
thinking of maybe having a quasi-hidden control panel on the secretary
desk for testing/debug purposes

---
## [griwes/reaveros](https://github.com/griwes/reaveros)@[fd358dfca5...](https://github.com/griwes/reaveros/commit/fd358dfca52bba548c020c631fdb817f495f9b72)
#### Wednesday 2021-03-10 09:55:19 by Michał 'Griwes' Dominiak

Introduce a proper build system.

There's a lot here and I don't feel like really describing it in detail,
but the crux of it all is: all the non-native things are built as
external projects built with toolchains and tools built before them,
also as external project; there's a bunch of aggregate targets; and also
this now does not depend on a C++ library coming from the toolchain,
instead depending on libfreestanding, which is a partial implementation
of the stdlib that will be filled in as the need arises (and that will
probably not have _any_ ABI guarantees for a _long_ time, yay).

Next steps for this branch are to actually print to serial in addition
of the EFI text protocols, so that I can try to hack together some test
targets for live QEMU runs (by parsing the console output). I should
also do some testing for conformance in libfreestanding, but as that is
a much larger project to attempt, I will ignore that for now and just
assume I can actually read the spec when I am implementing std:: (and
writing this sentence is probably a very good way to cause my hubris to
crush me in the future).

Next next steps would be to get back to actually working on the loader,
so selecting the video mode, loading the kernel and the initrd, and
entering the kernel proper, so I can start actually working on an OS
again, instead of spending many evenings on creating an awful CMake
contraption.

---
## [KI5FPL/tronj](https://github.com/KI5FPL/tronj)@[ac59574dba...](https://github.com/KI5FPL/tronj/commit/ac59574dba154ca808e08c80c13c815ec00316e7)
#### Wednesday 2021-03-10 10:44:46 by KI5FPL

*: rm instruction, fuck official, your ugly code sucks

---
## [mrakgr/The-Spiral-Language](https://github.com/mrakgr/The-Spiral-Language)@[cd36a7c3ba...](https://github.com/mrakgr/The-Spiral-Language/commit/cd36a7c3badd86a7308ecad88b7e6d901eac5814)
#### Wednesday 2021-03-10 11:38:26 by Marko Grdinić

"10:15am. I am up. Let me chill a bit and then I will start.

10:35am. https://zerophilosophy.substack.com/p/rules

This article really is a lot better than that article by Moldbug scolding some guy for confusing power for truth. In that particular context I thought the guy's problem was him mistaking New York Times for power. You can always count on Land not to moralize.

Let me read Frieren and Samayoeru. After that I will start.

10:50am. Let me start.

10:55am. First I'll cut out everything in the ServerUtils apart from the code action stuff. Now, let me put down my first type definition.

```fs
type SchemaState = { schema : Schema; errors_intra : RString list; errors_inter : RString list}
```

Previously I had a couple of these schema states, all linking to one another, but now I will only have one. By reducing the number of types in use, I will radically simplify my work. For links and actions I will make separate functions that merely look at the schema and the environment. And speaking of the later, here it is.

```fs
type SchemaEnv = Map<string,SchemaState>
```

Let me make the `ModuleEnv`.

```fs
type ModuleEnv = Map<string,ModuleState>
```

Do I need anything more than this for the dirty segment? Not really. Later I'll need a map of package dir paths to their ids, but I'll leave that when the time comes to connect the clean and the dirty segments.

```fs
let ss_has_error x = (List.isEmpty x.errors_intra && List.isEmpty x.errors_inter) = false
```

Let me make this for later.

Now...I need to do validation.

```fs
let ss_validate (packages : SchemaEnv) (modules : ModuleEnv) (x : SchemaState) =
    let errors = ResizeArray()
    let rec loop = function
        | SpiProj.FileHierarchy.Directory(_,_,_,l) -> list l
        | SpiProj.FileHierarchy.File(_,(r,path),_) -> if Map.containsKey path modules = false then errors.Add(r,"Module not found.")
    and list l = List.iter loop l
    list x.schema.modules
    x.schema.packages |> List.iter (fun {path=r,path} -> if Map.containsKey path packages = false then errors.Add(r,"Package not found."))
    {x with errors_intra=Seq.toList errors}
```

Missing directories will not be errors this time. I'll just use validate after loading the schema.

Actually, let me do it like...

```fs
let ss_validate' (packages : SchemaEnv) (modules : ModuleEnv) (x : SchemaState) =
    let errors = ResizeArray()
    let rec loop = function
        | SpiProj.FileHierarchy.Directory(_,_,_,l) -> list l
        | SpiProj.FileHierarchy.File(_,(r,path),_) -> if Map.containsKey path modules = false then errors.Add(r,"Module not found.")
    and list l = List.iter loop l
    list x.schema.modules
    x.schema.packages |> List.iter (fun {path=r,path} -> if Map.containsKey path packages = false then errors.Add(r,"Package not found."))
    Seq.toList errors
let ss_validate packages modules (x : SchemaState) = {x with errors_intra=ss_validate' packages modules x}
```

Ok, good. I won't do diffing for the dirty segments as the loading demands would invalidate it.

11:25am. The next part would be to make the propagation function.

```fs
x.schema.packages |> List.iter (fun {path=r,path} -> if Map.containsKey path packages = false then errors.Add(r,"Package not found."))
```

Actually, let me move this check to propagate.

```fs
let ss_propagate (packages : SchemaEnv) (x : SchemaState) (circulars : string HashSet) (order : string []) =
    let has_error x = (List.isEmpty x.errors_intra && List.isEmpty x.errors_inter) = false
    Array.fold (fun s path ->
        match Map.tryFind path s with
        | Some (x : SchemaState) ->
            let ers =
                (x.schema.packages, []) ||> List.foldBack (fun {path=r,p} ers ->
                    if circulars.Contains p then (r,"Package is circular.") :: ers
                    else
                        match Map.tryFind p s with
                        | Some s' when has_error s' -> (r,"Package has an error.") :: ers
                        | Some _ -> ers
                        | None -> (r,"Package not found.") :: ers
                    )
            Map.add path {x with errors_inter=ers} s
        | _ -> s
        ) packages order
```

Actually, when it comes to circulars, how about I in fact separate each in its own strong component.

11:55am.

```fs
let ss_propagate (packages : SchemaEnv) (x : SchemaState) (circulars : Dictionary<string,int>) (order : string []) =
    let has_error x = (List.isEmpty x.errors_intra && List.isEmpty x.errors_inter) = false
    Array.fold (fun s path ->
        match Map.tryFind path s with
        | Some (x : SchemaState) ->
            let c p = match circulars.TryGetValue(p) with true,b -> b | false,_ -> -1
            let is_circular x = x <> -1
            let are_in_same_strong_component a b = is_circular a && is_circular b && a = b
            let ers =
                let cpath = c path
                (x.schema.packages, []) ||> List.foldBack (fun {path=r,p} ers ->
                    let cp = c p
                    if are_in_same_strong_component cpath cp then (r,"Package is circular and loops through the current one.") :: ers
                    elif is_circular cp then (r,"Package is circular.") :: ers
                    else
                        match Map.tryFind p s with
                        | Some s' when has_error s' -> (r,"Package has an error.") :: ers
                        | Some _ -> ers
                        | None -> (r,"Package not found.") :: ers
                    )
            Map.add path {x with errors_inter=ers} s
        | _ -> s
        ) packages order
```

This is really good. Let me modify the graph operation.

```fs
let circular_nodes ((abs,bas) : MirroredGraph) dirty_nodes =
    let sort_order, sort_visited = topological_sort bas dirty_nodes
    let order = sort_order.ToArray()
    let visited = HashSet()
    let circular_nodes = Dictionary()
    Array.fold (fun i a ->
        let sc = ResizeArray() // This array stores the strongly connected components.
        let rec dfs a = if sort_visited.Contains(a) && visited.Add(a) then Seq.iter dfs (links_get abs a); sc.Add a
        dfs a
        if 1 < sc.Count then
            sc |> Seq.iter (fun x -> circular_nodes.Add(x,i) |> ignore)
            i+1
        else
            i
        ) 0 order |> ignore
    order, circular_nodes
```

This is good. Previously, the way I propagated information was wrong.

```fs
                    elif is_circular cp then (r,"Package is circular.") :: ers
```

Actually, no. i need to remove this. This error will only be valid when diffing everything. After a change it would revert to the normal one.

```fs
let ss_propagate (packages : SchemaEnv) (x : SchemaState) (order : string [], circulars : Dictionary<string,int>) =
    let has_error x = (List.isEmpty x.errors_intra && List.isEmpty x.errors_inter) = false
    Array.fold (fun s path ->
        match Map.tryFind path s with
        | Some (x : SchemaState) ->
            let c p = match circulars.TryGetValue(p) with true,b -> b | false,_ -> -1
            let is_circular x = x <> -1
            let are_in_same_strong_component a b = is_circular a && is_circular b && a = b
            let ers =
                let cpath = c path
                (x.schema.packages, []) ||> List.foldBack (fun {path=r,p} ers ->
                    let cp = c p
                    if are_in_same_strong_component cpath cp then (r,"Package is circular and loops through the current one.") :: ers
                    else
                        match Map.tryFind p s with
                        | Some s' when has_error s' -> (r,"Package has an error.") :: ers
                        | Some _ -> ers
                        | None -> (r,"Package not found.") :: ers
                    )
            Map.add path {x with errors_inter=ers} s
        | _ -> s
        ) packages order
```

Yes, this is it.

```fs
type SchemaState = { schema : Schema; errors_modules : RString list; errors_packages : RString list}
```

```fs
let ss_validate_modules modules (x : SchemaState) = {x with errors_modules=ss_validate_modules' modules x}
let ss_validate_packages (packages : SchemaEnv) (x : SchemaState) (order : string [], circulars : Dictionary<string,int>) =
```

Let me change the naming. Now it is much better.

Now what comes next?

12:20pm. Well, breakfast, but before that let me at least figure out what I want to do next. I have all the pieces ready in my mind, but not the order I shuold approach them. Ok, here is what I am going to do. I'll finally connect the clean and the dirty segments. After the packages have been validated, it is the `PackageEnv`'s turn to be processed.

After that I will do with the loading.

That will give me breathing room to deal with the rest.

I should also make a function to update the mirrored graph. This is the way to go.

...

```fs
open System
open System.IO
open System.Collections.Generic

let x = Stack()
x.Push(1)
x.Push(2)
x.Push(3)

printfn "%A" (x.ToArray())
```

This prints 3,2,1...

```fs
let circular_nodes ((abs,bas) : MirroredGraph) dirty_nodes =
    let sort_order, sort_visited = topological_sort bas dirty_nodes
    let order = sort_order.ToArray()
    let visited = HashSet()
    let circular_nodes = Dictionary()
    Array.fold (fun i a ->
        let sc = ResizeArray() // This array stores the strongly connected components.
        let rec dfs a = if sort_visited.Contains(a) && visited.Add(a) then Seq.iter dfs (links_get abs a); sc.Add a
        dfs a
        if 1 < sc.Count then
            sc |> Seq.iter (fun x -> circular_nodes.Add(x,i) |> ignore)
            i+1
        else
            i
        ) 0 order |> ignore
    order, circular_nodes
```

This is the right order for calculating the strong components, but is this really what I should be returning here?

No, not it is not. I am assuming the order starts from the current node and goes outward.

```fs
open System
open System.IO
open System.Collections.Generic

let x = Queue()
x.Enqueue(1)
x.Enqueue(2)
x.Enqueue(3)

printfn "%A" (x.ToArray())
```

Yes, the queue is what I need.

```fs
let topological_sort bas dirty_nodes =
    let sort_order = Queue()
    let sort_visited = HashSet()
    let rec dfs_rev a = if sort_visited.Add(a) then Seq.iter dfs_rev (links_get bas a); sort_order.Enqueue(a)
    Seq.iter dfs_rev dirty_nodes
    sort_order, sort_visited

let circular_nodes ((abs,bas) : MirroredGraph) dirty_nodes =
    let sort_order, sort_visited = topological_sort bas dirty_nodes
    let order = sort_order.ToArray()
    let visited = HashSet()
    let circular_nodes = Dictionary()
    Array.foldBack (fun a i ->
        let sc = ResizeArray() // This array stores the strongly connected components.
        let rec dfs a = if sort_visited.Contains(a) && visited.Add(a) then Seq.iter dfs (links_get abs a); sc.Add a
        dfs a
        if 1 < sc.Count then
            sc |> Seq.iter (fun x -> circular_nodes.Add(x,i) |> ignore)
            i+1
        else
            i
        ) order 0 |> ignore
    order, circular_nodes
```

To think there was a bug here. This might have contributed to the instability. Amazing what a second pass unearths.

I can see things much more clearly now.

Let me list out the bullet points again:

* Update the `PackageEnv` after validating the `SchemaEnv` based on the order.
* Do the schema loader.
* Update the mirror graph based on the order.

Let me have breakfast here."

---
## [Buildstarted/linksfordevs](https://github.com/Buildstarted/linksfordevs)@[2712845f9d...](https://github.com/Buildstarted/linksfordevs/commit/2712845f9dfc5d4eb62d78fed331a31640ce8df1)
#### Wednesday 2021-03-10 17:29:20 by Ben Dornis

Updating: 3/10/2021 5:00:00 AM

 1. Added: Git clone vulnerability announced - The GitHub Blog
    (https://github.blog/2021-03-09-git-clone-vulnerability-announced/)
 2. Added: Ask The Experts w/ Scott Hanselman, Wes Bos, Sarah Drasner, Troy Hunt, and Kent C. Dodds Part 1 | Junior to Senior with David Guttman
    (https://juniortosenior.io/34)
 3. Added: Asemblr - BuiltWithDot.Net
    (https://builtwithdot.net/project/24/asemblr)
 4. Added: Compressing data with Parquet
    (https://dev.l1x.be/posts/2021/03/08/compressing-data-with-parquet/)
 5. Added: security - git: malicious repositories can execute remote code while cloning
    (https://www.openwall.com/lists/oss-security/2021/03/09/3)
 6. Added: Search Scholarly Materials Preserved in the Internet Archive - Internet Archive Blogs
    (http://blog.archive.org/2021/03/09/search-scholarly-materials-preserved-in-the-internet-archive/)
 7. Added: Refactor object-oriented code with ReSharper | The .NET Tools Blog
    (https://blog.jetbrains.com/dotnet/2021/03/08/refactor-object-oriented-code-with-resharper/)
 8. Added: On .NET Live - Deep Dive into Microsoft Orleans
    (https://www.youtube.com/watch?v=R0ODfwU6MzQ)
 9. Added: Lynicon asp.net core CMS - BuiltWithDot.Net
    (https://builtwithdot.net/project/112/lynicon-asp.net-core-cms)
10. Added: Hackers breach thousands of security cameras, exposing Tesla, jails, hospitals -  BNN Bloomberg
    (https://www.bnnbloomberg.ca/hackers-break-into-thousands-of-security-cameras-exposing-tesla-jails-hospitals-1.1574681)
11. Added: .NET March 2021 Updates – 5.0.4, 3.1.13, 2.1.26 | .NET Blog
    (https://devblogs.microsoft.com/dotnet/net-march-2021/)
12. Added: Monsters Weekly 203 -  OzCode Production Debugger
    (https://www.aspnetmonsters.com/2021/03/monsters-weekly%5Cep203/)
13. Added: Developing with Rust on Windows
    (https://docs.microsoft.com/en-us/windows/dev-environment/rust/)
14. Added: Dynamically Creating Components in Angular
    (http://wildermuth.com/2021/03/09/Dynamically-Creating-Components-in-Angular)
15. Added: Why asynchronous Rust doesn't work
    (https://theta.eu.org/2021/03/08/async-rust-2.html)
16. Added: Let's Learn .NET: Web APIs
    (https://channel9.msdn.com/Shows/lets-learn-dotnet/Web-APIs?WT.mc_id=dotnet-00000-cephilli)
17. Added: New in Visual Studio F# Tooling: .NET 5 Scripting and F# Interactive -- Visual Studio Magazine
    (https://visualstudiomagazine.com/articles/2021/03/09/new-fsharp.aspx)
18. Added: Simplifying Rest Parameters in JavaScript
    (https://www.telerik.com/blogs/simplifying-rest-parameters-javascript)
19. Added: New article: “Beyond console.log() – level up your debugging skills”
    (https://christianheilmann.com/2021/03/09/new-article-beyond-console-log-level-up-your-debugging-skills/)
20. Added: Is a REST API with CQRS Possible?
    (https://www.youtube.com/watch?v=6XO6vSiioWE)
21. Added: Role based JWT Tokens in ASP.NET Core
    (https://weblog.west-wind.com/posts/2021/Mar/09/Role-based-JWT-Tokens-in-ASPNET-Core)
22. Added: State of Secrets Sprawl on GitHub - 2021 report
    (https://blog.gitguardian.com/state-of-secrets-sprawl-2021/)
23. Added: artperrin/image2csv
    (https://github.com/artperrin/image2csv)
24. Added: Debian running on Rust coreutils
    (https://sylvestre.ledru.info/blog/2021/03/09/debian-running-on-rust-coreutils)
25. Added: The .NET Docs Show - Compiler time dependency injection in C# using StrongInject
    (https://www.youtube.com/watch?v=8cyumKVEth0)
26. Added: Arduino C# Serial USB to Computer | C# Tutorials Blog
    (https://wellsb.com/csharp/iot/arduino-csharp-serial-usb-computer/)
27. Added: Conflicted Capital
    (https://blog.aaronkharris.com/conflicted-capital)
28. Added: Sentry .NET SDK - BuiltWithDot.Net
    (https://builtwithdot.net/project/23/sentry-.net-sdk)
29. Added: GitHub Quick Reviews
    (https://www.youtube.com/watch?v=_Svjl1-jauY)
30. Added: Inside Israel’s lucrative — and secretive — cybersurveillance industry
    (https://restofworld.org/2021/inside-israels-lucrative-and-secretive-cybersurveillance-talent-pipeline/)
31. Added: Calzolari.DependencyInjection.Extensions 5.0.1
    (https://www.nuget.org/packages/Calzolari.DependencyInjection.Extensions/5.0.1)
32. Added: Know your “One Job” and do it first
    (https://charity.wtf/2021/03/07/know-your-one-job-and-do-it-first/)
33. Added: Creating other types of synchronization objects that can be used with co_await, part 1: The one-shot event | The Old New Thing
    (https://devblogs.microsoft.com/oldnewthing/20210309-00/?p=104942)
34. Added: Let's Learn .NET: Web APIs
    (https://channel9.msdn.com/Shows/lets-learn-dotnet/Web-APIs/player)
35. Added: Getting started with Dapr for .NET Developers
    (https://laurentkempe.com/2021/03/09/getting-started-with-dapr-for-dotnet-developers/)
36. Added: Api2Pdf - BuiltWithDot.Net
    (https://builtwithdot.net/project/20/api2pdf)
37. Added: Final Fantasy Randomizer - BuiltWithDot.Net
    (https://builtwithdot.net/project/26/final-fantasy-randomizer)
38. Added: No Kubernetes? How to run Docker containers in Azure VM Scale Sets
    (https://blog.sixeyed.com/you-cant-always-have-kubernetes-running-containers-in-azure-vm-scale-sets/)
39. Added: Pandemic Bill Would Cut Taxes by An Average of $3,000, With Most Relief Going to Low- And Middle-Income Households
    (https://www.taxpolicycenter.org/taxvox/pandemic-bill-would-cut-taxes-average-3000-most-relief-going-low-and-middle-income-households)
40. Added: The coding interview that I failed
    (https://ayende.com/blog/193409-B/the-coding-interview-that-i-failed?Key=91893b7f-c17a-4135-ae0e-6315cfde09aa)
41. Added: Write libraries instead of services, where possible
    (http://catern.com/services.html)
42. Added: .NET App Developer Links - 2021-03-10
    (https://links.danrigby.com/2021/03/app-developer-links-2021-03-10/)
43. Added: Inventor of cassette tape Lou Ottens passed away | Financial - Netherlands News Live
    (https://netherlandsnewslive.com/inventor-of-cassette-tape-lou-ottens-passed-away-financial/107722/)
44. Added: Security Flaw in iPhone App Could Have Let Anyone Listen To Your Recordings
    (https://www.gizmodo.com.au/2021/03/security-flaw-in-iphone-app-could-have-let-anyone-listen-to-your-recordings/)
45. Added: Saas sucks: we can do better
    (http://www.adambourg.com/business/models/software/2021/03/09/saas-sucks-for-the-consumer.html)
46. Added: part 1 — Store Halfword Byte-Reverse Indexed
    (https://sthbrx.github.io/blog/2021/03/04/fuzzing-grub-part-1/)
47. Added: Welcome Session
    (https://channel9.msdn.com/Events/dotnetConf/Focus-on-Windows/Welcome-Session?hss_channel=tw-2384354214)
48. Added: A Git security release
    (https://lwn.net/Articles/848893/)
49. Added: Creating other types of synchronization objects that can be used with co_await, part 2: The basic library | The Old New Thing
    (https://devblogs.microsoft.com/oldnewthing/20210310-00/?p=104945)
50. Added: Generating HTTP API clients using dotnet tools and Visual Studio Connected Services
    (https://dotnetthoughts.net/generating-http-api-clients-using-dotnet-tools/)
51. Added: Language detection and words-in-sentence classification in C#
    (https://www.productiverage.com/language-detection-and-wordsinsentence-classification-in-c-sharp)
52. Added: What's New in Visual Basic on .NET 5?
    (https://www.youtube.com/watch?v=0lRVGI4eTmg)
53. Added: So you want to invest
    (https://johnathannader.com/so-you-want-invest/)
54. Added: Using Alba to Test ASP.Net Services
    (https://jeremydmiller.com/2021/03/09/using-alba-to-test-asp-net-services/)
55. Added: half of curl’s vulnerabilities are C mistakes
    (https://daniel.haxx.se/blog/2021/03/09/half-of-curls-vulnerabilities-are-c-mistakes/)
56. Added: What is the role of inflammation in the immune system? – Trevor Klee
    (https://trevorklee.com/what-is-the-role-of-inflammation-in-the-immune-system/)
57. Added: Anti-NFT sale.gif by Far Few Giants
    (https://farfewgiants.itch.io/anti-nfc-sale-gif)
58. Added: OVH Tasks
    (http://travaux.ovh.net/?do=details&id=49471)
59. Added: TypeScript Handbook Revamped as Primary Learning Resource -- Visual Studio Magazine
    (https://visualstudiomagazine.com/articles/2021/03/09/typescript-handbook.aspx)
60. Added: Webmention.io
    (https://webmention.io/)
61. Added: Search Jobs - Google Careers
    (https://careers.google.com/jobs/results/?distance=50&employment_type=FULL_TIME&jlo=en_US&location=Washington%20D.C.,%20DC,%20USA&q=Chrome%20AND%20(Security%20OR%20Privacy))
62. Added: The Future of Group Messaging
    (https://thejarren.com/group-messaging/)

Generation took: 00:15:42.1525381

---
## [canalplus/rx-player](https://github.com/canalplus/rx-player)@[60fe3fb237...](https://github.com/canalplus/rx-player/commit/60fe3fb2375748027afb39e0aa48fe10eccc304c)
#### Wednesday 2021-03-10 18:00:48 by Paul Berberian

remove most rxjs-related code from the SegmentBuffers

This commit is a first attempt to remove most RxJS-related code from the
RxPlayer code. Here it is mainly done for the code inside
`src/core/segment_buffers`.

There are multiple reasons for this weird new idea:

  1. Observables in general are complex beasts. By default, they are
     lazy, they are called as much times as they are subscribed to,
     they are "teared down" (all linked side-effects such as event
     listeners are cleaned-up) automatically on unsubscription,
     depending on the scheduler used they may emit or be subscribed to
     in a synchronous or multiple types of asynchronous ways, they keep
     being open until you either complete them, emit an error or
     unsubscribe from them - when you're not careful, you thus have a
     chance of leaking memory.

     Even if we understand it well, we still make frequent mistakes with
     it, some having pretty big consequences (e.g. big memory leak in
     #913, API events sent too much time in #850 - well to be honest -
     I am guilty on both I think!).

     And that's only talking about us, with multiple years of experience
     with it. Newer developper may find it even more complex to
     understand.

  2. Observables are IMO too much used in the code, even when `Promises`
     seems like a simpler and better solution (for example when there is
     only one item emitted).

  3. They are too risky (in my opinion) when we're talking about code
     with important side-effects (e.g. HTTP requests, SourceBuffer
     interactions, API interactions) due to the easyness with which we
     can perform them multiple times by mistake.

  4. I find Observables tear-down too implicit (the fact that it happens
     silently on unsubscription, mostly) for what we use it for:
     Unsubscribing from some Observables will stop the content, others
     will stop segments from being pushed, others will cancel requests.

     Here I would prefer a much more explicit solution: one where we
     explicitly write a line of code anouncing that operation are
     aborted at the time we abort them.

  5. Call stacks are unreadable and too long currently. I don't know if
     we ever exploited any call stack information because of that.

     The fact that call stacks are unreadable seems to be directly
     linked to the heavy usage of RxJS operators.

  6. Observables cannot be used with async/await. We often end-up with
     a huge callback hell when inner Observables contain other inner
     Observables and so one, whereas it could in effect be much simpler.

I still think that there are real good use cases for RxJS in the
RxPlayer, for example I found the text synchronization code in the
`HTMLTextSegmentBuffer` really simple to grasp and functional.

In this commit, I also created the `TaskCanceller` util, which allows to
implement explicit Promise cancellation roughly the same way that is is
done for the native `fetch` API (on that note, I was heavily inspired by
the `AbortController` interface - used to cancel fetch operations - to
write it).

---
## [makingglitches/CensusScripts](https://github.com/makingglitches/CensusScripts)@[ea656f7a99...](https://github.com/makingglitches/CensusScripts/commit/ea656f7a9967967af9e63d2771b4b90aad744313)
#### Wednesday 2021-03-10 18:56:40 by Magical Marvelous MADMADMAD Mister Mim !

in the record books, if ever this bullshit makes it there, they will look back and call this entire time period of overt trickery, whoredom, needless pain and suffering and years of deleted time in which they were probably murdering children, breeding deformed ones intentionally and in general just stuffing the world with bodies and the trash which was themselves, as the greatest period of idiocy anyone ever could have conceived patterned and designed by corrupt members of the baby boomer generation and older who didnt give a damn about anyone but themselves, and whose partial loyalty elsewhere stopped at their own age group, and was forbidden their children. thats a decent way of putting what pieces of garbage like my father were like, weak fools who could have their minds and impulses bent to lash out at whatever outlet was provided them because boo hoo they were cowards and boo hoo life was hard. think this has been easy you fucking bastard ? I wasnt a some bat eyed fuck that wanted my kids to be hurt traumatized or die or took weird pleasure in this constraining retard system you morons created, but here i am, and here i am again, and here i find myself wondering WHAT THE FUCK WAS WRONG WITH YOU ????

and yeah smirk a little more assholes, the older garbage is almost dead, the younger garbage is beginning to feel its artificially produced period of superior feeling and satisfaction spawned of exceedingly manipulated states of mania and surrender fade.

in the end i will find more of my own, and all of you will be left to rot here where you fucking pieces of shit belong.

you in this case meaning the chomo garbage such as runs colorado
and i/us = the remaining sane people in fucking america.

and stop playing stupid games with electronics assholes. keep track of your own bullshit. wanna help ? give up them salaries since money apparently isnt important to any of you and we'll walk off  :)

---
## [makingglitches/CensusScripts](https://github.com/makingglitches/CensusScripts)@[6418adf7bd...](https://github.com/makingglitches/CensusScripts/commit/6418adf7bd48d1026c2a27ace88f05e0e7df5c48)
#### Wednesday 2021-03-10 19:22:01 by Magical Marvelous MADMADMAD Mister Mim !

god damn it you fucking people wanting shit broken
mother fuckers, let me keep some progress and as before i'll fucking contribute more !!!!!!!!

the same version of wget for windows has been up on the site for years now as well !
its stuff like that..

if you'd just port visual studio to linux i'd convert over everything to that os since i can rebuild and check the software my fucking self !

---
## [PANCHO7532/scripts-and-random-code](https://github.com/PANCHO7532/scripts-and-random-code)@[13528b30fd...](https://github.com/PANCHO7532/scripts-and-random-code/commit/13528b30fd9597bb17ac1e541763f1f70ddfe3a0)
#### Wednesday 2021-03-10 19:25:22 by PANCHO7532

updated this shit

thanks i failed a test for a fucking symbol you bitch

---
## [mongodb/docs-worker-pool](https://github.com/mongodb/docs-worker-pool)@[5ca902efab...](https://github.com/mongodb/docs-worker-pool/commit/5ca902efabb02edb8406a78a8ded0a6054dd83df)
#### Wednesday 2021-03-10 21:25:32 by Allison Reinheimer Moore

Updates the URL whence we download pip2 (#387)

Per this lovely debugging message:
```
Hi there!

The URL you are using to fetch this script has changed, and this one will no
longer work. Please use get-pip.py from the following URL instead:

    https://bootstrap.pypa.io/pip/2.7/get-pip.py

Sorry if this change causes any inconvenience for you!

We don't have a good mechanism to make more gradual changes here, and this
renaming is a part of an effort to make it easier to us to update these
scripts, when there's a pip release. It's also essential for improving how we
handle the `get-pip.py` scripts, when pip drops support for a Python minor
version.

There are no more renames/URL changes planned, and we don't expect that a need
would arise to do this again in the near future.

Thanks for understanding!

- Pradyun, on behalf of the volunteers who maintain pip.
```

---
## [BeeStation/BeeStation-Hornet](https://github.com/BeeStation/BeeStation-Hornet)@[1db82198e1...](https://github.com/BeeStation/BeeStation-Hornet/commit/1db82198e15d5d320011e240b8b862927c923113)
#### Wednesday 2021-03-10 22:14:32 by Xenomedes

Ports PRs suggested by Archanial (#3830)

* Fixes GC for observers and new players, and tons of loose references to stuff that shouldnt be (tgstation/tgstation#55563)

I've done this on a signal because atom_hud is applied very loosely in some contexes, and the objects themselves dont have an easy way to track back into what huds they're affected by, so this seemed the best. Properly cleans up next_time_allowed, which was missing.

Update: I discovered this is also an issue for a lot of simple mobs, such as slimes and bots and such. So fixing this is huge

* Removes a source of ian harddels, keeps mcgruffs bed discription from getting overwritten at roundstart, moves the bed claiming feature to just the dogbed typepath, none of the subtypes, this applies to buckling too (tgstation/tgstation#55158)

Removes a source of ian harddels, keeps mcgruff's bed description from getting overwritten at roundstart, moves the bed claiming feature to just the dogbed typepath, blacklisting subtypes. This applies to buckling too.

This means that a dogbed can only ever belong to one dog. Fuck you.
Remake of #54892, github doesn't like force pushes, not sure why

* Some changes suggested by lummox

* Fixes an edgecase where an area can be deleted, but still be stored inside GLOB.sortedAreas, which can cause a runtime on player related Initialize(), which can cause mobs to improperly init. No I don't know why this would happen, but it happen to me. This is an ided commit (tgstation/tgstation#56954)

Fixes an edgecase where an area can be deleted, but still be stored inside GLOB.sortedAreas, which can cause a runtime on player related Initialize(), which can cause mobs to improperly init. No I don't know why this would happen, but it happen to me.

Co-authored-by: Azarak <azarak10@gmail.com>
Co-authored-by: LemonInTheDark <58055496+LemonInTheDark@users.noreply.github.com>
Co-authored-by: oranges <email@oranges.net.nz>

---
## [cockroachdb/cockroach](https://github.com/cockroachdb/cockroach)@[a046bf43ad...](https://github.com/cockroachdb/cockroach/commit/a046bf43ad757e87ae60e50887fb0a115d0492b9)
#### Wednesday 2021-03-10 23:52:35 by Andrew Werner

sql: fix dropping of NOT NULL enum columns

I added enums to the random schemachange workload and it hit a fun scenario.
If we recall https://github.com/cockroachdb/cockroach/issues/42459#issuecomment-600139293
we decided to have default "zero" values for columns which are in the process
of being dropped (being added is fine because you have to have a default). We
didn't extend this for enums. Enums are a bit awkward here. Given that we know
the column is going to be dropped, I'm thinking it is okay to put an arbitrary
value, the smallest one. Alternatively we could return an error. Error seems
worse but I'd love somebody to tell me writing the smallest value seems sane.

Unfortunately there's an edge case when dealing with an enum that has no
values. In that case, we have to return an error, but it's sort of okay (sort
of) because nobody could write to the table.

Release note (bug fix): Fixed a bug which would cause an internal error when
writing to a table with a recently (concurrent or in the same transaction)
NOT NULL enum column.

---

# [<](2021-03-09.md) 2021-03-10 [>](2021-03-11.md)

